define(["jquery","version!fly/components/base","version!fly/utils/data-selector"],function(t){var e=t.support.touch?"vclick":"click";t.widget("fly.tabs",t.fly.base,{options:{tabSelector:'[data-item="trigger"]',classSelected:"selected",enableDeselect:!1},_create:function(){var t=this.options,s={};this._setup(),s[e+" "+t.tabSelector]="_handleClick",this._on(this.$element,s)},_handleClick:function(e){var s=this.options,a=t(e.target).closest(s.tabSelector);e.preventDefault(),this.change(a)},_getContent:function(e){var s,a=e.data()||{},n=a.$content||[];return n.length?n:(s=a.target||e.attr("href"),n=t(s),e.data("$content",n),n)},_show:function(t){var e,s=this.options;this._trigger("show",null,{$tab:t})!==!1&&(e=this._getContent(t),t.addClass(s.classSelected),e.addClass(s.classSelected),this._trigger("shown",null,{$tab:t,$content:e}))},_hide:function(t){var e,s=this.options;this._trigger("hide",null,{$tab:t})!==!1&&(e=this._getContent(t),t.removeClass(s.classSelected),e.removeClass(s.classSelected),this._trigger("hidden",null,{$tab:t,$content:e}))},change:function(t){var e,s,a=this.options;return e=this.$element.find(a.tabSelector+"."+a.classSelected),s=t.data(),t.hasClass(a.classSelected)?void(a.enableDeselect&&this._hide(e)):(this._hide(e),void this._show(t))}}),t(document).on(e+".tabs-api","[data-tabs-show]",function(e){var s,a=t(this),n=a.data(),i=t(n.tabsShow||a.attr("href"));e.preventDefault(),i.length&&(s=i.parents(":data(tabs)"),s.length&&s.data("tabs").change(i))})});