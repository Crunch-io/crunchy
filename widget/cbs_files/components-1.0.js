define(["jquery","version!fly/utils/string-helper","version!fly/utils/object-helper","version!fly/managers/debug","version!fly/components/base"],function(n,t,e,i,o){var r,a={attr:"data-component",includeContext:!0},s=i.init("components"),c={};return n(document).on("domUpdated",function(n,t){t=t||{},r.process(t.$context)}),r={process:function(e){var i=this,o=this.findByAttr(e);o.each(function(e,o){var r=n(o),a=r.data(),s=t.toCleanArray(a.component);n.each(s,function(n,t){i.init(t,r)})})},init:function(t,e,i){var o,r,a=c[t];a&&(i=i||{},o=n.makeArray(a.require)||[],r=t,a.alias&&(r=a.alias,i=n.extend(!0,{},a.options||{},i)),require(o,function(){e&&e.length&&n.isFunction(e[r])&&e[r](i)}),s.log("init: ",t,e,i))},setConfig:function(t){if(!n.isPlainObject(t))throw new Error("Component setConfig failure. Map is in the wrong format.");n.extend(a,t)},register:function(t){if(!n.isPlainObject(t))throw new Error("Component register failure. Map is in the wrong format.");n.each(t,function(n,t){c[n]=t,t.options&&o.setDefaultOptions(n,t.options),t.events&&o.addDefaultEvents(n,t.events)}),s.log("register: ",t)},findByAttr:function(t,e,i){var o,r="";return e=e&&!n.isArray(e)?[e]:e,e?n.each(e,function(n,t){r+=n>0?", ":"",r+="["+a.attr+'="'+t+'"], ['+a.attr+"*='\""+t+"\"']"}):r="["+a.attr+"]",t=t||n(document.body),o=t.find(r),i="undefined"!=typeof i?i:a.includeContext,i&&(o=o.addBack(r)),o}}});