/* :asset_packager_compatibility, 'config/asset_packages.yml' @ 1475279512 */
/* public/javascripts/4gen.js @ 1475279512 */
init_4gen=function(){var t;"undefined"!=typeof jQuery&&(t=jQuery);var e,n=3,i=8,r="/images/4gen/trans_1x1.gif",o=30,s=315,a=1,c=2,u=3,l=12;window.console||(window.console={log:function(){}});var d=function(){function d(){}function h(t,e){t.prototype.addEvent=d.prototype.addEvent,t.prototype.removeEvent=d.prototype.removeEvent,t.prototype.fireEvent=d.prototype.fireEvent,t.prototype.initEventHelper=d.prototype.initEventHelper,t.prototype.possibleEvents=e}function p(t,e,n,i,r,o){this.id=t,this.shortstyle=e,this.family=n,this.fallback=i,this.weight=r,this.style=o}function f(t){this.fonts=[],this.docManager=t,this._cssRuleQueue=[],this._fontLoadQueue=[]}function _(t,e){this.pages=[],this.loaded=!1,this.fonts={},this.numFonts=0,this.fontLoader=e,this.groupNum=t||0}function m(t){for(var e in this._defaultParams)this._defaultParams.hasOwnProperty(e)&&(this[e]=t[e]||this._defaultParams[e]);for(var n=0;n<this._requiredParams.length;n++){var i=this._requiredParams[n];if(!this[i])throw"Missing required Page param: "+i}if(!this.contentUrl&&!this.innerPageElem)throw"Must initialize a page with either a contentUrl or innerPageElem element";if(this.containerElem.boundToPageObj===!0)throw"Container Elem is already bound to a page.  We shouldn't get here";this.containerElem.boundToPageObj=!0,this._targetWidth=null,this._innerPageVisible=!!this.innerPageElem,this._imagesTurnedOn=!1,this.boundingRect=null,this.isVisible=!1,this.displayDirty=!0,this.displayOn=null,this.loadHasStarted=!!this.innerPageElem}function g(){this.initEventHelper(),this.viewRect=null,this.enabled=!1;var t=this;this._scrollCallback=function(){t._eventHandler("scroll")},this._resizeCallback=function(){t._eventHandler("resize")}}function v(){}function b(e,n,i){"undefined"==typeof t&&"undefined"!=typeof scribd&&x.setJQuery(scribd.jQuery),t("html, body").animate({scrollTop:t(e).offset().top},{queue:!1,duration:n,easing:"linear",complete:i})}function y(){this._name="book",this.currentPageId=null;var t=this;this._fullscreenResizedCallback=function(e){t._fullscreenResized(e)}}function w(){this._name="slideshow",this.currentPageId=null;var t=this;this._fullscreenResizedCallback=function(e){t._fullscreenResized(e)}}function k(){this._name="scroll";var t=this;this._verticalPositionChangeCallback=function(){t.checkAndUpdateVisiblePages()},this._fullscreenResizedCallback=function(){t._fullscreenResized()}}function x(e,n,i){this.options=i||{},this.options.extrasWidth=this.options.extrasWidth||s,this.defaultViewMode=e||"scroll",this.mobile=n||!1,t&&(this.view_manager_deferred=t.Deferred()),this.initEventHelper(),this.pages={},this._pageWidths=null,this._fontLoader=new f(this),this.viewManagers={scroll:new k,slideshow:new w,book:new y},this.viewportManager=new g,this._currentFontAggregatorHostIdx=0,this.visiblePages=[],this.firstVisiblePage=null,this.lastVisiblePage=null,this.currentFontGroup=new _(0,this._fontLoader),this.isScrolling=!1,this._scrollingCount=0}function S(t,e,n){return Math.min(n,Math.max(e,t))}function C(t){return Math.floor(100*t)/100}var E={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",decode:function(t){var e,n,i,r,o,s,a,c="",u=0;for(t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");u<t.length;)r=this._keyStr.indexOf(t.charAt(u++)),o=this._keyStr.indexOf(t.charAt(u++)),s=this._keyStr.indexOf(t.charAt(u++)),a=this._keyStr.indexOf(t.charAt(u++)),e=r<<2|o>>4,n=(15&o)<<4|s>>2,i=(3&s)<<6|a,c+=String.fromCharCode(e),64!=s&&(c+=String.fromCharCode(n)),64!=a&&(c+=String.fromCharCode(i));return c=E._utf8_decode(c)},_utf8_decode:function(t){for(var e="",n=0,i=0,r=0;n<t.length;)i=t.charCodeAt(n),128>i?(e+=String.fromCharCode(i),n++):i>191&&224>i?(r=t.charCodeAt(n+1),e+=String.fromCharCode((31&i)<<6|63&r),n+=2):(r=t.charCodeAt(n+1),c3=t.charCodeAt(n+2),e+=String.fromCharCode((15&i)<<12|(63&r)<<6|63&c3),n+=3);return e}};d.prototype.initEventHelper=function(){this.eventListenerEnabled=!0,this.eventListeners={};for(var t=0;t<this.possibleEvents.length;t++)this.eventListeners[this.possibleEvents[t]]={}},d.prototype.addEvent=function(t,e){if(!this.eventListeners[t])throw t+" is not a valid type of event";this.eventListeners[t].next_uid||(this.eventListeners[t].next_uid=1),e._event_listener_uid||(e._event_listener_uid=this.eventListeners[t].next_uid,this.eventListeners[t].next_uid++),this.eventListeners[t][e._event_listener_uid]=e},d.prototype.removeEvent=function(t,e){delete this.eventListeners[t][e._event_listener_uid]},d.prototype.fireEvent=function(t){function e(t){t.apply(o,i)}if(this.eventListenerEnabled){var n=this.eventListeners[t],i=[];if(arguments.length>1){i[arguments.length-2]=null;for(var r=1;r<arguments.length;r++)i[r-1]=arguments[r]}var o=this;for(var s in n)"next_uid"!=s&&n.hasOwnProperty(s)&&e(n[s])}};var T="font_preload_bed",M=function(){return document.styleSheets[0]&&!document.styleSheets[0].insertRule},D=function(t){return t%1==0},N=function(t,e){if(M()){var n=t.innerHTML;t.href=e,t.innerHTML!=n&&(t.innerHTML=n)}else t.href=e},P=function(){var t=navigator.userAgent.toLowerCase();return t.search("android 2.2")>-1}(),O=function(){var t=navigator.userAgent.toLowerCase();return t.search("mobile")>-1&&t.search("safari")>-1&&!P}(),I=navigator.userAgent.indexOf("AppleWebKit/")>-1;e=function(){return M()?a:O?c:c}(),M()&&(i=5,n=2),P&&(i=1,n=1),p.prototype.eotCssRule=function(t){var e="src: url("+t+this.family+".eot); font-family: "+this.family+"; font-weight: "+this.weight+"; font-style: "+this.style;return"@font-face {"+e+"}"},p.prototype.ttfCssRule=function(t){var e="src: url("+t+this.family+".ttf) format('truetype'); font-family: "+this.family+"; font-weight: "+this.weight+"; font-style: "+this.style;return"@font-face {"+e+"}"},p.prototype.svgCssRule=function(t){var e="src: url("+t+"#"+this.family+") format('svg'); font-family: "+this.family+"; font-weight: "+this.weight+"; font-style: "+this.style;return"@font-face {"+e+"}"},p.prototype.createPreloadElem=function(){return"<span style='font-family: "+this.family+"'>scribd.</span> "},f.prototype._makeNewStyleBlock=function(){var t=document.createElement("style");window.createPopup||t.appendChild(document.createTextNode(""));var e=document.getElementsByTagName("head")[0];return e.appendChild(t),t},f.prototype._insertCssRule=function(t){this._cssRuleQueue.push(t)},f.prototype._flushCssRuleQueue=function(t){if(this._cssRuleQueue.length>0){var e=t&&document.getElementById(t)||this._makeNewStyleBlock(),n=this._cssRuleQueue.join("\n");M()?e.styleSheet.cssText=n:window.createPopup?e.innerHTML=n:e.appendChild(document.createTextNode(n)),this._cssRuleQueue=[]}},f.prototype.getFontAggregatorHostForFonts=function(t){for(var n=[],i=0;i<t.length;i++)n.push(t[i].shortstyle+t[i].id);n.sort();var r=this.docManager.nextFontAggregatorHost()+"/"+this.docManager.assetPrefix+"/"+n.join(",")+"/"+l+"/";switch(e){case a:break;case c:P||(r+="ttfs.css");break;case u:r+="fonts.svg"}return r},f.prototype._addTTFRules=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];this._insertCssRule(i.ttfCssRule(e))}},f.prototype._addSVGRules=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];this._insertCssRule(i.svgCssRule(e))}},f.prototype._addEOTRules=function(t,e){for(var n=0;n<t.length;n++){var i=t[n];this._insertCssRule(i.eotCssRule(e))}},f.prototype._nextPreloadId=function(){this._preloadId||(this._preloadId=0);var t="preload_bed"+this._preloadId;return this._preloadId+=1,t},f.prototype._addCSSWebkit=function(t,e){function n(){{var t=document.createElement("div");i._nextPreloadId()}t.innerHTML=s;var n=document.getElementById(T),o=window.setInterval(function(){r.contentDocument.styleSheets.length>0&&(window.clearInterval(o),r.contentDocument.body.getBoundingClientRect(),n.appendChild(t),window.setTimeout(function(){r.contentDocument.body.getBoundingClientRect(),i._addCSSLink(e)},500))},0)}var i=this,r=document.createElement("iframe"),o=this._nextPreloadId();r.id=o;for(var s="",a=0;a<t.length;a++){var c=t[a];s+=c.createPreloadElem()}this._makeNewStyleBlock();r.addEventListener("load",function(){n()},!1),r.style.display="none",document.body.appendChild(r),r.contentDocument.body.innerHTML=s;var u=r.contentDocument.createElement("link");u.href=e,u.rel="stylesheet",u.type="text/css",u.media="screen";var l=r.contentDocument.getElementsByTagName("head")[0];l.appendChild(u)},f.prototype._addCSSLink=function(t){var e=document.createElement("link");e.href=t,e.rel="stylesheet",e.type="text/css";var n=document.getElementsByTagName("head")[0];n.appendChild(e)},f.prototype.flushFontQueue=function(){if(0!==this._fontLoadQueue.length&&"rasterize"!=this.docManager.displayType){var t=this._fontLoadQueue;this._fontLoadQueue=[];var n=this.getFontAggregatorHostForFonts(t);switch(e){case a:this._addEOTRules(t,n);break;case c:P?this._addTTFRules(t,n):I?this._addCSSWebkit(t,n):this._addCSSLink(n);break;case u:this._addSVGRules(t,n)}this._flushCssRuleQueue()}},f.prototype.addFontToQueue=function(t){var e=this.fonts[t];e._loadQueued||(e._loadQueued=!0,this._fontLoadQueue.push(e))},f.prototype.addFont=function(t,e,n,i,r,o){var s=new p(t,e,n,i,r,o);this.fonts[t]=s},f.prototype.setNumFonts=function(t){for(var e=0;t>e;e++)this.fonts[e]=new p(e,"","ff"+e,"sans-serif","normal","normal")},f.prototype._initHidersCSS=function(){for(var t=[],e=0;e<this.fonts.length;e++)t.push("."+this.fonts[e].family);this._insertCssRule(t.join(", ")+" {display: none;}\n")},f.prototype._initFamilyCSS=function(){for(var t=0;t<this.fonts.length;t++){var e=this.fonts[t].family,n=this.fonts[t].fallback,i=this.fonts[t].weight,r=this.fonts[t].style,o="div."+e+" span";"undefined"!=typeof scribd&&"undefined"!=typeof scribd.embed_div_id&&(o="#"+scribd.embed_div_id+" "+o),this._insertCssRule(M()?o+" {font-family: "+e+" !important;\n}":o+" {font-family: "+e+", "+n+"; font-weight: "+i+"; font-style: "+r+";\n}")}},f.prototype.initStyles=function(){if("rasterize"!=this.docManager.displayType){switch(this._initFamilyCSS(),e){case a:break;case c:P||this._initHidersCSS();break;case u:}this._flushCssRuleQueue("preload_styler")}},f.prototype.setupTestElements=function(){if(e==c&&!I&&"rasterize"!=this.docManager.displayType){for(var t="",n=0;n<this.fonts.length;n++){var i=this.fonts[n];t+=i.createPreloadElem()}var r=document.getElementById(T);r.innerHTML=t,document.body.appendChild(r),this._insertCssRule("#"+T+" span {display: block; visibility: hidden}"),this._flushCssRuleQueue()}},_.prototype.addPage=function(t){for(var e=0;e<t.fonts.length;e++){var n=t.fonts[e];void 0===this.fonts[n]&&(this.fonts[n]=!0,this.numFonts+=1)}this.pages.push(t)},_.prototype.isFull=function(){var t=this.pages.length,n=this.groupNum,r=this.numFonts;return e==a?this.hasLoaded||r>50||r>=20&&(0===n&&t>=i+3||t>=15):e==u||P?this.hasLoaded||r>=5&&t>=i:this.hasLoaded||r>100||r>=20&&(0===n&&t>=i+3||t>=100)},_.prototype.load=function(t){function e(){for(var t in n.fonts)n.fonts.hasOwnProperty(t)&&n.fontLoader.addFontToQueue(t);n.fontLoader.flushFontQueue()}if(!this.hasLoaded){this.hasLoaded=!0;var n=this;t?window.setTimeout(function(){e()},t):e()}},_.prototype.newNextGroup=function(){return new _(this.groupNum+1,this.fontLoader)};var A=1,$=2,R=3,j=4,L=function(){return void 0!==document.documentElement.style.WebkitTransform?A:void 0!==document.documentElement.style.MozTransform?$:void 0!==document.documentElement.style.OTransform?j:R}();m.prototype._defaultParams={containerElem:null,innerPageElem:null,contentUrl:null,origWidth:null,origHeight:null,fonts:null,docManager:null,pageNum:null},m.prototype._requiredParams=["origWidth","origHeight","fonts","docManager","containerElem","pageNum"],m.prototype._updateBoundingRect=function(){var t,e,n,i;if(this.containerElem.getBoundingClientRect&&this.docManager.viewportManager.viewRect){var r=this.containerElem.getBoundingClientRect(),o=this.docManager.viewportManager.viewRect;e=r.left+o.left,t=r.top+o.top,o.offsetX&&(e-=o.offsetX),o.offsetY&&(t-=o.offsetY),n=r.right-r.left,i=r.bottom-r.top,this.boundingRect={left:e,top:t,bottom:t+i,right:e+n,width:n,height:i}}else t=this.containerElem.offsetTop,e=this.containerElem.offsetLeft,n=this.containerElem.offsetWidth,i=this.containerElem.offsetHeight,this.boundingRect={left:e,top:t,bottom:t+i,right:e+n,width:n,height:i}},m.prototype._setContainerContents=function(e){var n=/<noscript *><img[^<>]*\/><\/noscript *>/g,i=t(e.replace(n,""))[0];this.containerElem.appendChild(i);this.innerPageElem=i,this.turnOnLinks(),this.turnOnImages(),this.fixSVGFonts(),this.displayDirty=!0,this.displayOn?this.display():this.hide()},m.prototype.fixSVGFonts=function(){if(this._svgFontsFixed)throw"Already fixed the svg fonts";if(this.innerPageElem){if(O){var t=function(e){if(e.nodeType==document.TEXT_NODE){var n=e.textContent.search(/[  \n][^ \n ]/);n>=0&&t(e.splitText(n+1))}else for(var i=e.childNodes,r=0;r<i.length;r++)t(i[r])},e=function(t){for(var n=t.childNodes,i=0;i<n.length;i++){var r=n[i];if(r.nodeType==document.ELEMENT_NODE)e(r);else{var o=n[i+1];o&&"#text"==o.nodeName&&t.insertBefore(document.createElement("span"),o)}}};t(this.innerPageElem),e(this.innerPageElem)}this._svgFontsFixed=!0}},m.prototype.imagePageContent=function(t){return str="<img src='"+t+"'></img>"},m.prototype.load=function(){if(this.currentlyLoading=!0,this.loadHasStarted=!0,this.innerPageElem)throw"We already have loaded this page, but it looks like you called loadPage again";this.loadFonts();var e="page"+this.pageNum+"_callback";if(window[e])try{delete window[e]}catch(n){window[e]=void 0}if("rasterize"==this.docManager.displayType)return delete this.currentlyLoading,void this._setContainerContents(this.imagePageContent(this.contentUrl));var i=document.createElement("script"),r=this;window[e]=function(n){document.body.removeChild(i);var o=n[0];delete r.currentlyLoading,r._setContainerContents(o),"undefined"!=typeof t&&($container=t("#"+r.containerElem.id),skip_blur=Scribd.eligible_for_archive_blur_test&&(document.referrer.match(/google|bing|yahoo/i)||window.location.hash.match(/\bscribd\b/))&&"control"!=(Scribd.nway_test_choice_value("archive_blur")||"control"),!skip_blur&&$container.hasClass("blurred_page")&&r.docManager.doDynamicBlurring(r.containerElem.id)),r.docManager.fireEvent("pageLoaded",r.containerElem);try{delete window[e]}catch(s){window[e]=void 0}},i.src=this.contentUrl,i.type="text/javascript",i.charset="UTF-8",document.body.appendChild(i)},m.prototype.remove=function(){if(this.innerPageElem){var t=this.innerPageElem.parentNode;t.removeChild(this.innerPageElem),delete this.innerPageElem,delete this.currentLoading,delete this.loadHasStarted,this._linksTurnedOn=!1,this._imagesTurnedOn=!1,this._svgFontsFixed=!1}},m.prototype.display=function(t,e){if((!this.displayOn||this.displayDirty)&&(this.displayOn=!0,!this.currentlyLoading)){if(!this.innerPageElem)return this.loadHasStarted?void 0:t?void this.load():void 0;this.displayDirty=!1,e||(this._linksTurnedOn||this.turnOnLinks(),this._imagesTurnedOn||this.turnOnImages(),this._svgFontsFixed||this.fixSVGFonts()),this.loadFonts(),this._innerPageVisible||(this.containerElem.className=this.containerElem.className.replace(/placeholder|not_visible/g,""),this._innerPageVisible=!0,e||(this._fitContentsToWidth(),this.innerPageElem.style.display="block"))}},m.prototype.hide=function(){(this.displayOn||this.displayDirty)&&(this.displayOn=!1,this.innerPageElem&&(this.displayDirty=!1,this.containerElem.className=this.containerElem.className+" not_visible",this._innerPageVisible=!1,this.innerPageElem.style.display="none"))},m.prototype.setLoadFontGroup=function(t){t.addPage(this),this.loadFontGroup=t},m.prototype.loadFonts=function(){this.loadFontGroup.load()};var F=!!(document.all&&/msie 6./i.test(navigator.appVersion)&&window.ActiveXObject);return m.prototype._setZoomScale=function(t){var e=this.innerPageElem;switch(L){case A:e.style.WebkitTransform="scale("+t+")",e.style.WebkitTransformOrigin="top left";break;case $:e.style.MozTransform="scale("+t+")",e.style.MozTransformOrigin="top left";break;case j:e.style.OTransform="scale("+t+")",e.style.OTransformOrigin="top left";break;case R:if(e.originalZoom||(e.originalZoom="normal"==e.currentStyle.zoom?1:parseFloat(e.currentStyle.zoom)/100,F&&!this.docManager._isEmbed&&(e.originalZoom*=1.35)),e.style.zoom=e.originalZoom*t*100+"%",F){var n=this.innerPageElem;setTimeout(function(){n.style.marginLeft=""===n.style.marginLeft?0:""},500)}break;default:throw"Unknown scale method "+L}},m.prototype._fitContentsToWidth=function(){if(this._targetWidth&&this.innerPageElem&&this._innerPageVisible){var t=this._targetWidth/this.origWidth;this._setZoomScale(t),this._targetWidth=null}},m.prototype.setWidth=function(t){var e=Math.ceil(t/this.origWidth*this.origHeight);this.containerElem.style.width=t+"px",this.containerElem.style.height=e+"px",this._targetWidth=t,this._fitContentsToWidth()},m.prototype.setBounds=function(t,e){this.origWidth/this.origHeight>t/e?e=Math.ceil(t/this.origWidth*this.origHeight):t=Math.ceil(e/this.origHeight*this.origWidth),this.containerElem.style.width=t+"px",this.containerElem.style.height=e+"px",this._targetWidth=t,this._fitContentsToWidth()},m.prototype.turnOnImages=function(){if(!this.innerPageElem)throw"Can't turn on images for a page that's not loaded";if(this._imagesTurnedOn)throw"Images have already been turned on for this document";this._imagesTurnedOn=!0;for(var t=this.innerPageElem.getElementsByTagName("img"),e=0;e<t.length;e++){var n=t[e];if(n.className.toLowerCase().search("absimg")>-1&&!n.src){var i=this.docManager.subImageSrc(n.getAttribute("orig"));this.docManager.enablePNGHack?(n.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+i+"', sizingMethod='scale')",n.src=r):n.src=i,n.removeAttribute("orig"),n.style.display="block"}}},m.prototype.turnOnLinks=function(){if(!this.innerPageElem)throw"Can't turn on links for a page that's not loaded";if(this._linksTurnedOn)throw"Links have already been turned on for this document";this._linksTurnedOn=!0;for(var t=this.docManager,e=function(e){return function(){t.gotoPage(e.substring(4))}},n=this.innerPageElem.getElementsByTagName("a"),i=0;i<n.length;i++){var r=n[i];if(r.className.toLowerCase().search("ll")>-1&&!r.href){var o=r.getAttribute("orig");if(o){var s=E.decode(o).replace(/^j[\W]*a[\W]*v[\W]*a[\W]*s[\W]*c[\W]*r[\W]*i[\W]*p[\W]*t[\W]*:|^f[\W]*i[\W]*l[\W]*e[\W]*:/gi,"");s.search(/^page/)>-1?r.onclick=e(s):(s.search(/^mailto:/)>=0||s.search(/^(http|ftp)/)<0&&(s="http://"+s),r.target="_blank",N(r,s),r.rel="nofollow")}}}},h(g,["vertical","horizontal","either","resize"]),g.prototype._makeViewRect=function(){var t=this.container,e=document.documentElement,n=t.scrollTop||t.scrollY||t.pageYOffset||e.scrollTop,i=t.scrollLeft||t.scrollX||t.pageXOffset||e.scrollLeft,r=t.clientWidth||t.innerWidth||e.clientWidth,o=t.clientHeight||t.innerHeight||e.clientHeight,s=i+r,a=n+o,c={top:n,left:i,right:s,bottom:a,width:r,height:o};if(this.container!=window){var u=this.container.getBoundingClientRect&&this.container.getBoundingClientRect();u&&(c.offsetX=u.left,c.offsetY=u.top)}return c},g.prototype._updateViewRect=function(){var t=this.viewRect;this.viewRect=this._makeViewRect();var e=!t||t.left!=this.viewRect.left||t.width!=this.viewRect.width,n=!t||t.top!=this.viewRect.top||t.height!=this.viewRect.height;return{xChanged:e,yChanged:n}},g.prototype._eventHandler=function(t){var e=this._updateViewRect();"resize"!=t&&"both"!=t||!e.xChanged&&!e.yChanged||this.fireEvent("resize",this.viewRect),(e.xChanged||e.yChanged)&&this.fireEvent("either",this.viewRect),e.xChanged&&this.fireEvent("horizontal",this.viewRect),e.yChanged&&this.fireEvent("vertical",this.viewRect)},g.prototype.enable=function(){if(this.enabled)throw"ViewportManager has already been enabled";if(this.enabled=!0,this.container=x.scrollParent||window,this._eventHandler("both"),window.addEventListener){this.container.addEventListener("resize",this._resizeCallback,!1);var t=x.scrollParent?this.container:window.document;t.addEventListener("scroll",this._scrollCallback,!1)}else window.attachEvent&&(this.container.attachEvent("onresize",this._resizeCallback),this.container.attachEvent("onscroll",this._scrollCallback))},g.prototype.disable=function(){if(!this.enabled)throw"ViewportManager has already been disabled";this.enabled=!1,this.container.removeEventListener?(window.removeEventListener("resize",this._resizeCallback,!1),this.container.removeEventListener("scroll",this._scrollCallback,!1)):window.detatchEvent&&(window.detatchEvent("onresize",this._resizeCallback),this.container.detatchEvent("onscroll",this._scrollCallback))},v.prototype.name=function(){return this._name},v.prototype.register=function(t,e){if(this.registered)throw"This ViewManager is already registered";this.registered=!0,this.documentManager=t,this.viewportManager=e,this._currentPageWidth=defaultViewWidth,this._currentZoomMultiplier=1,this._updatePageWidths();var n=this.documentManager.firstVisiblePage;this._register(t,e),n&&this.documentManager.gotoPage(n.pageNum,{}),t.view_manager_deferred&&t.view_manager_deferred.resolve(t)},v.prototype._zoomedPageWidth=function(){return this._currentPageWidth*this._currentZoomMultiplier},v.prototype._updatePageWidths=function(){this.documentManager.setPageWidths(this._zoomedPageWidth())},v.prototype.isTopPageInView=function(){return!0},v.prototype._register=function(){},v.prototype.unregister=function(){if(!this.registered)throw"This ViewManager is already unregistered";this.isFullscreen&&this.exitFullscreen(),this._checkBodyWidth(),this._unregister(),this.registered=!1,delete this.documentManager,delete this.viewportManager},v.prototype._unregister=function(){},v.prototype._pagingStep=function(){return 1},v.prototype.gotoPage=function(t,e){if(!this.registered)throw"ViewManager must be registerd to call gotoPage";this._gotoPage(t,e)},v.prototype._gotoPage=function(){},v.prototype._fireHideExtras=function(){this.documentManager._fireHideExtras(),this._extrasHidden=!0},v.prototype._fireShowExtras=function(){this.documentManager._fireShowExtras(),this._extrasHidden=!1},v.prototype.enterFullscreen=function(){if(this.isFullscreen)throw"Fullscreen is already set";this._checkBodyWidth(),this.viewportManager.addEvent("resize",this._fullscreenResizedCallback),this._fireHideExtras(),this.resetZoom(),this._enterFullscreen(),this._fullscreenResized(this.viewportManager.viewRect),this._currentPageWidth=this.viewportManager.viewRect.width,this.isFullscreen=!0;var t=this.documentManager.firstVisiblePage;t&&this.documentManager.gotoPage(t.pageNum,{}),this.documentManager._fireEnteredFullscreen()},v.prototype.exitFullscreen=function(){if(!this.isFullscreen)throw"Fullscreen is not set";this.viewportManager.removeEvent("resize",this._fullscreenResizedCallback),this._fireShowExtras(),this.resetZoom(),this._exitFullscreen(),this.isFullscreen=!1;var t=this.documentManager.firstVisiblePage;t&&this.documentManager.gotoPage(t.pageNum,{}),this.documentManager._fireExitedFullscreen()},v.prototype._viewBarWidth=function(){return this._extrasHidden?0:this.documentManager.options.extrasWidth},v.prototype._enterFullscreen=function(){},v.prototype._exitFullscreen=function(){},v.prototype._fullscreenResized=function(){},v.prototype._scrollWithZoom=function(t,e){window.scrollTo(0,t.top*e)},v.prototype.zoom=function(t){var e=this.viewportManager.viewRect;e&&(this._currentZoomMultiplier*=t,this._checkBodyWidth(),this._updatePageWidths(),this.documentManager.setIsScrolling(!0),this._scrollWithZoom(e,t),this._zoomed(),this.documentManager.setIsScrolling(!1),this.documentManager._fireZoomed(t))},v.prototype._zoomed=function(){},v.prototype.resetZoom=function(){this._currentZoomMultiplier=1,this._checkBodyWidth(),this._updatePageWidths(),this._zoomed()},v.prototype._checkBodyWidth=function(){if(!x.scrollParent&&0!=x.updateBodyWidth){var t=document.documentElement.clientWidth,e=this._zoomedPageWidth()+this._viewBarWidth()+10;globalHeader=document.getElementById("global_header"),e>t?(document.body.style.width=e+"px",globalHeader&&(globalHeader.style.width=t+"px")):(document.body.style.width="100%",globalHeader&&(globalHeader.style.width="100%"))}},y.prototype=new v,y.prototype._register=function(){this._prepareDisplay()},y.prototype._unregister=function(){for(var e in this.documentManager.pages)if(this.documentManager.pages.hasOwnProperty(e)){var n=this.documentManager.pages[e];t(n.containerElem).removeClass("book_view"),n.containerElem.style.display=""}},y.prototype._prepareDisplay=function(){for(var e in this.documentManager.pages)if(this.documentManager.pages.hasOwnProperty(e)){var n=this.documentManager.pages[e];t(n.containerElem).addClass("book_view"),n.containerElem.style.display="none",n.hide()}this.documentManager.setPageMissingModulesVisible(!1),this.documentManager.gotoPage(this.documentManager.currentPageNum()||1)},y.prototype._zoomed=function(){this.documentManager.pages[this.currentPageId]},y.prototype._updatePageWidths=function(){this.documentManager.setPageWidths(this._zoomedPageWidth()/2)},y.prototype._pagingStep=function(){return 2},y.prototype._showPage=function(t){var e=this.documentManager.pages[t];e&&(e.isVisible=!0,e.display(!0),e.containerElem.style.display="")},y.prototype._hidePage=function(t){var e=this.documentManager.pages[t];e&&(e.isVisible=!1,e.containerElem.style.display="none",e.hide())},y.prototype._gotoPage=function(t){t=parseInt(t,10),t%2==1&&(t-=1);var e=null,n=null;"number"==typeof this.currentPageId&&(this._hidePage(this.currentPageId),this._hidePage(this.currentPageId+1)),e=this.documentManager.pages[t],n=this.documentManager.pages[t+1],(e||n)&&(this.currentPageId=t,this.isFullscreen&&this._setPageBounds(this.viewportManager.viewRect),this._showPage(t),this._showPage(t+1),this.documentManager.visiblePagesChanged())},y.prototype._setWidth=function(t){this._currentPageWidth=t,this.documentManager.setPageWidths(t)},y.prototype._fullscreenResized=function(t){this._setWidth(t.width-o)},y.prototype._enterFullscreen=function(){this._previousPageWidth=this._currentPageWidth||defaultViewWidth,b(this.documentManager.pages[this.currentPageId].containerElem,300)},y.prototype._exitFullscreen=function(){this._setWidth(defaultViewWidth),this._checkBodyWidth()},w.prototype=new v,w.prototype._register=function(){this._prepareDisplay();var t=document.getElementById("scroll_preventer");t&&(t.style.overflow="hidden",t.style.height="100%")},w.prototype._unregister=function(){var t=document.getElementById("scroll_preventer");t&&(t.style.overflow="visible",t.style.height="auto")},w.prototype._prepareDisplay=function(){for(var t in this.documentManager.pages)if(this.documentManager.pages.hasOwnProperty(t)){var e=this.documentManager.pages[t];e.containerElem.style.display="none",e.hide()}this.documentManager.setPageMissingModulesVisible(!1),this.documentManager.gotoPage(this.documentManager.currentPageNum()||1)},w.prototype._setPageBounds=function(t){var e=this.documentManager.pages[this.currentPageId];e&&e.setBounds(t.width,t.height)},w.prototype._gotoPage=function(t){if(this.documentManager.pages.hasOwnProperty(t)){var e;this.currentPageId&&(e=this.documentManager.pages[this.currentPageId],e&&(e.isVisible=!1,e.containerElem.style.display="none",e.hide())),this.currentPageId=t,e=this.documentManager.pages[t],this.isFullscreen&&this._setPageBounds(this.viewportManager.viewRect),e.isVisible=!0,e.display(!0),e.containerElem.style.display="",e._updateBoundingRect(),this.documentManager.visiblePagesChanged()}},w.prototype._setWidth=function(t){this._currentPageWidth=t,this.documentManager.setPageWidths(t)},w.prototype._fullscreenResized=function(t){this._setPageBounds(t)},w.prototype._enterFullscreen=function(){this._previousPageWidth=this._currentPageWidth||defaultViewWidth,b(this.documentManager.pages[this.currentPageId].containerElem,300)},w.prototype._exitFullscreen=function(){this._setWidth(defaultViewWidth),this._checkBodyWidth()},k.prototype=new v,k.prototype._updateInViewport=function(t){var e=this.viewportManager.viewRect,n=t.boundingRect,i=t.isVisible;return t.isVisible=e&&n?n.left<e.right&&n.right>e.left&&n.top<e.bottom&&n.bottom>e.top:!1,this.adjacentVisiblePages=2,i!=t.isVisible},k.prototype.checkAndUpdateVisiblePages=function(){var t=!1;for(var e in this.pages)if(this.pages.hasOwnProperty(e)){var n=this.pages[e],i=this._updateInViewport(n);t=t||i}t?this.documentManager.visiblePagesChanged():this.documentManager.scheduleLogPageView(),this._updateDisplayOnPages()},k.prototype._updateDisplayOnPages=function(){if(this.documentManager.firstVisiblePage&&this.documentManager.lastVisiblePage){var t=this.documentManager.firstVisiblePage.pageNum-this.adjacentVisiblePages,e=this.documentManager.lastVisiblePage.pageNum+this.adjacentVisiblePages;for(var n in this.pages)if(this.pages.hasOwnProperty(n)){var i=this.pages[n];i&&(i.pageNum>=t&&i.pageNum<=e?i.display():(i.hide(),this.documentManager.fireEvent("pageHide",i)))}}},k.prototype._zoomed=function(){this.checkAndUpdateVisiblePages()},k.prototype._register=function(t){this.pages=t.pages,this.viewportManager.addEvent("vertical",this._verticalPositionChangeCallback);for(var e in this.pages)if(this.pages.hasOwnProperty(e)){var n=this.documentManager.pages[e];n.containerElem.style.display=""}this.documentManager.setPageMissingModulesVisible(!0),this.documentManager._updatePageBoundingRects(),this.checkAndUpdateVisiblePages()},k.prototype.isTopPageInView=function(){var t=this.documentManager.firstVisiblePage;return t?this.documentManager._expectedFirstPageNum>t.pageNum?!0:t.boundingRect.top+5>=this.viewportManager.viewRect.top:!0},k.prototype._unregister=function(){this.viewportManager.removeEvent("vertical",this._verticalPositionChangeCallback),delete this.pages},k.prototype._gotoPage=function(t,e){if(e=e||{},this.pages.hasOwnProperty(t)){var n=this.documentManager.pages[t];this.documentManager.setIsScrolling(!0);var i=this.documentManager.viewportManager.container;return n._updateBoundingRect(),i==window?scrollTo(n.boundingRect.left,n.boundingRect.top-(e.offset||0)):i.scrollTop=n.boundingRect.top-(e.offset||0),this.documentManager.setIsScrolling(!1),this.documentManager.isScrolling||this.documentManager.visiblePagesChanged(),n.pageNum}},k.prototype._gotoNextPage=function(){this.documentManager.firstVisiblePage&&this.documentManager.gotoPage(this.documentManager.firstVisiblePage.pageNum+1,{direction:1})},k.prototype._gotoPreviousPage=function(){this.documentManager.firstVisiblePage&&this.documentManager.gotoPage(this.documentManager.firstVisiblePage.pageNum-1,{direction:-1})},k.prototype._setWidth=function(t){var e=this.pagePosition();this._currentPageWidth=t,this._updatePageWidths(),this._checkBodyWidth(),this.restorePosition(e)},k.prototype._fullscreenResized=function(){this._setWidth((window.innerWidth||document.documentElement.clientWidth)-o)},k.prototype._enterFullscreen=function(){this._previousPageWidth=this._currentWidth||defaultViewWidth},k.prototype._exitFullscreen=function(){this._setWidth(this._previousPageWidth)},k.prototype.pagePosition=function(){var e=t(this.viewportManager.container);if(e.is(window)){var n=this.documentManager.currentPageNum()||1,i=t("#outer_page_"+n),r=0;return i.length&&(r=(t(window).scrollTop()-i.offset().top)/i.height()),[n,r]}var o=this.documentManager.pages[this.documentManager.currentPageNum()||1],s=e.scrollTop(),a=e.scrollLeft(),c=(s-o.boundingRect.top)/o.boundingRect.height,u=(a-o.boundingRect.left)/o.boundingRect.width;return[o.pageNum,c,u]},k.prototype.restorePosition=function(e){if(!this._disableRestorePosition){var n=t(this.pages[e[0]].containerElem);if(this._gotoPage(e[0],{offset:-Math.floor(e[1]*n.height())}),null!=e[2]){var i=t(this.viewportManager.container);if(!t(i).is(window)){var r=e[2];r=Math.floor(r*n.width());var o=n.width()-i.width();i[0].scrollLeft=Math.min(o,r)}}}},k.prototype.zoom=function(t){var e=this.viewportManager.viewRect;if(e){var n=this.pagePosition();this._currentZoomMultiplier*=t,this._checkBodyWidth(),this._updatePageWidths(),this.restorePosition(n),this._zoomed(),this.documentManager._fireZoomed(t)}},h(x,["expectedFirstPageChanged","viewmodeChanged","enteredFullscreen","exitedFullscreen","hideExtras","showExtras","zoomed","pageHide","pageLoaded","allPagesAdded","pageView","visiblePagesChanged","viewmodeInitialized"]),x.prototype.disableRestorePosition=function(){this.viewManagers.scroll._disableRestorePosition=!0},x.prototype._fireZoomed=function(t){this.fireEvent("zoomed",t)},x.prototype.nextFontAggregatorHost=function(){return this._currentFontAggregatorHostIdx=(this._currentFontAggregatorHostIdx+1)%this.fontAggregatorHosts.length,this.fontAggregatorHosts[this._currentFontAggregatorHostIdx]},x.prototype._fireHideExtras=function(){this.fireEvent("hideExtras")},x.prototype._fireShowExtras=function(){this.fireEvent("showExtras")
},x.prototype.currentPageNum=function(){return this._expectedFirstPageNum},x.prototype.setupTestElements=function(){this._fontLoader.setupTestElements()},x.prototype.pageCount=function(){if(this.hasOwnProperty("_pageCount"))return this._pageCount;var t=0;for(var e in this.pages)this.pages.hasOwnProperty(e)&&t++;return this._pageCount=t,this._pageCount},x.prototype.setupPaidDocument=function(t,e){this.allowedPages=t,this.originalPageCount=e,this._allowedPagesHash=[],this._maximumAllowedPage=Math.max.apply(null,this.allowedPages),this._minimumAllowedPage=Math.min.apply(null,this.allowedPages),this._isPaidDocument=!0,this._pageMissingElements=[];for(var n=0;n<t.length;n++)this._allowedPagesHash[t[n]]=!0,(n>0&&t[n]>t[n-1]+1||0===n&&1!=t[n])&&this._pageMissingElements.push("page_missing_explanation_"+t[n].toString());this._maximumAllowedPage!=this.originalPageCount&&this._pageMissingElements.push("page_missing_explanation_"+(this.originalPageCount+1).toString())},x.prototype.minimumPageNumber=function(){return"book"==this.viewMode()?0:1},x.prototype.maximumPageNumber=function(){return this.allowedPages?this.originalPageCount:this.pageCount()},x.prototype.getClosestPageNumber=function(t,e){if(!this.allowedPages)return t;if(this._allowedPagesHash[t])return t;if(t>=this._maximumAllowedPage)return this._maximumAllowedPage;if(t<=this._minimumAllowedPage)return this._minimumAllowedPage;for(var n=1;n<=this.originalPageCount;n++){if(0>=e&&this._allowedPagesHash[t-n]===!0)return t-n;if(e>=0&&t+n<this.originalPageCount&&this._allowedPagesHash[t+n]===!0)return t+n}},x.prototype.setPageMissingModulesVisible=function(e){if("undefined"==typeof t&&"undefined"!=typeof scribd&&x.setJQuery(scribd.jQuery),this._isPaidDocument)for(var n=0;n<this._pageMissingElements.length;n++){var i=t(this._pageMissingElements[n]);i&&(e?i.show():i.hide())}},x.prototype.getNextAvailablePage=function(t){return getClosestPageNumber(t,1)},x.prototype.getPreviousAvailablePage=function(t){return getClosestPageNumber(t,-1)},x.prototype.flushFontQueue=function(){this._fontLoader.flushFontQueue()},x.prototype.visiblePagesChanged=function(){var t=[];for(var e in this.pages)if(this.pages.hasOwnProperty(e)){var n=this.pages[e];n.isVisible&&t.push(n)}if(t.length){t.sort(function(t,e){return t.pageNum<e.pageNum?-1:1}),this.fireEvent("visiblePagesChanged",t),this.visiblePages=t;var i=this.firstVisiblePage;this.firstVisiblePage=t.length>0?t[0]:null,this.lastVisiblePage=t.length>0?t[t.length-1]:null,this.isScrolling||(this._loadAdjacentFonts(),this._loadAdjacentPages()),(this.firstVisiblePage===i||this.firstVisiblePage&&i)&&this.firstVisiblePage.pageNum==i.pageNum||!this.isScrolling&&this.firstVisiblePage&&this._updateExpectedFirstPage(this.firstVisiblePage.pageNum),this.scheduleLogPageView()}},x.prototype.boundingRatioForPage=function(t){var e=this.viewportManager.viewRect,n=t.boundingRect,i=n.bottom-n.top,r=n.right-n.left;return{left:(e.left-n.left)/r,right:(e.right-n.right)/r+1,top:S((e.top-n.top)/i+t.pageNum,t.pageNum,t.pageNum+1),bottom:S((e.bottom-n.bottom)/i+t.pageNum+1,t.pageNum,t.pageNum+1)}},x.prototype.scheduleLogPageView=function(){this.logPageViewTimout&&window.clearTimeout(this.logPageViewTimout);var t=this;this.logPageViewTimout=window.setTimeout(function(){t.logPageView(),t.logPageViewTimout=null},1e3)},x.prototype.getVisibleBBox=function(){var t={};if(this.firstVisiblePage){var e=this.boundingRatioForPage(this.firstVisiblePage);t.left=e.left,t.right=e.right,t.top=e.top}if(this.lastVisiblePage){var n=this.boundingRatioForPage(this.lastVisiblePage);t.bottom=n.bottom}return t},x.prototype.logPageView=function(){var t=this.getVisibleBBox();for(var e in t)t.hasOwnProperty(e)&&(t[e]=C(t[e]));var n=window.$rat;if(n){var i;i="2"==window.RAT_API_VERSION?[[t.left,t.top],[t.right,t.bottom]]:"("+t.left+" "+t.top+") ("+t.right+" "+t.bottom+")",n("fourgen.viewchange",i)}return this.fireEvent("pageView"),t},x.prototype._updateExpectedFirstPage=function(t){this._expectedFirstPageNum=t,this.fireEvent("expectedFirstPageChanged",this._expectedFirstPageNum)},x.prototype._loadAdjacentFonts=function(){if(this.firstVisiblePage&&this.lastVisiblePage)for(var t=this.firstVisiblePage.pageNum-i,e=this.lastVisiblePage.pageNum+i,n=t;e>=n;n++){var r=this.pages[n];r&&r.loadFonts()}},x.prototype._loadAdjacentPages=function(){if(this.firstVisiblePage&&this.lastVisiblePage){for(var t=this.firstVisiblePage.pageNum-n,e=this.lastVisiblePage.pageNum+n,i=t;e>=i;i++){var r=this.pages[i];r&&!r.loadHasStarted&&(r.load(),this.mobile&&r.setWidth(this._pageWidths))}this.mobile&&this._removeUnusedPages()}},x.prototype._removeUnusedPages=function(){for(var t=this.firstVisiblePage.pageNum-n,e=this.lastVisiblePage.pageNum+n,i=this.pages,r=n+1;i[r];)(t>r||r>e)&&i[r].remove(),r++},x.prototype._updatePageBoundingRects=function(){for(var t in this.pages)this.pages.hasOwnProperty(t)&&this.pages[t]._updateBoundingRect()},x.prototype.removeInsteadOfBlurring=function(){return/iPhone|iPod|iPad|Android|BlackBerry/.test(navigator.userAgent)?!0:"undefined"==typeof Scribd||"undefined"==typeof t?!0:!1},x.prototype.addPage=function(t){if(!t.blur||!this.removeInsteadOfBlurring()){if(void 0===t.pageNum)throw"must have pageNum param";t.docManager=this;var e=new m(t);return this.pages[t.pageNum]=e,this._pageWidths&&e.setWidth(this._pageWidths),this.currentFontGroup.isFull()&&(this.currentFontGroup=this.currentFontGroup.newNextGroup()),e.setLoadFontGroup(this.currentFontGroup),e}t.containerElem.parentNode.removeChild(t.containerElem)},x.prototype.setIsScrolling=function(t){t?this._scrollingCount+=1:this._scrollingCount-=1,this._scrollingCount<0&&(this._scrollingCount=0),this.isScrolling=0===this._scrollingCount?!1:!0},x.prototype.setViewManager=function(t,e){if(this._currentViewManager)this._setViewManager(t),"function"==typeof e&&e();else{var n=this;this.addEvent("viewmodeInitialized",function(){n.setViewManager(t,e)})}},x.prototype._setViewManager=function(t,e){e||this._currentViewManager.unregister();var n=this._currentViewManager;this._currentViewManager=this.viewManagers[t],this._currentViewManager.register(this,this.viewportManager),this.fireEvent("viewmodeChanged",this.viewMode(),n?n.name():null)},x.prototype.setInitialViewManager=function(t){if(this._currentViewManager)throw"This should be called before any view manager exists";this._setViewManager(t,!0),this.fireEvent("viewmodeInitialized",this.viewMode(),null)},x.prototype.setDefaultWidth=function(t){this._currentViewManager._currentPageWidth=t,this._currentViewManager._currentZoomMultiplier=1,this._currentViewManager._updatePageWidths()},x.prototype.subImageSrc=function(t){var e,n=0;for(e=0;e<t.length;e++)n+=t.charCodeAt(e);var i=this._imageDomainSubstitutionList[n%this._imageDomainSubstitutionList.length];return t.replace(this._imageDomainSubstitutionFrom,i)},x.prototype.allPagesAdded=function(){if(this._allPagesAddedCalled)throw"can only call allPagesAdded once";this.viewportManager.enable(),this._updatePageBoundingRects(),this.setInitialViewManager(this.defaultViewMode),this.fireEvent("allPagesAdded")},x.prototype.setEmbeddedDoc=function(t){this._isEmbed="True"===t},x.prototype.setPageWidths=function(t){this._pageWidths=t;for(var e in this.pages)this.pages.hasOwnProperty(e)&&this.pages[e].setWidth(this._pageWidths);this._updatePageBoundingRects()},x.prototype.addFont=function(t,e,n,i,r,o){this._fontLoader.addFont(t,e,n,i,r,o)},x.prototype.setNumFonts=function(t){this._fontLoader.setNumFonts(t)},x.prototype.initStyles=function(){this._fontLoader.initStyles()},x.prototype.gotoPage=function(t,e){var n=!D(t),i=null;if(n&&(i=+(t%1).toFixed(2),t=Math.floor(t)),!(t<this.minimumPageNumber()||t>this.maximumPageNumber())){e||(e={}),n&&void 0==e.frac&&(e.frac=i);var r=e.direction||0,o=this.pages[t];void 0===o&&this._isPaidDocument&&(t=this.getClosestPageNumber(t,r),o=this.pages[t]),this.mobile&&this.pages[t]&&this.pages[t].setWidth(this._pageWidths),this._updateExpectedFirstPage(t),this._currentViewManager.gotoPage(this._expectedFirstPageNum,e)}},x.prototype.gotoPreviousPage=function(){var t=this._currentViewManager._pagingStep();this._currentViewManager.isTopPageInView()?this.gotoPage(this._expectedFirstPageNum-t,{direction:-1}):this.gotoPage(this._expectedFirstPageNum,{direction:-1})},x.prototype.gotoNextPage=function(){var t=this._currentViewManager._pagingStep();this.gotoPage(this._expectedFirstPageNum+t,{direction:1})},x.prototype.enterFullscreen=function(){this._currentViewManager.enterFullscreen()},x.prototype.exitFullscreen=function(){this._currentViewManager.exitFullscreen()},x.prototype.isFullscreen=function(){return this._currentViewManager.isFullscreen},x.prototype._fireEnteredFullscreen=function(){this.fireEvent("enteredFullscreen")},x.prototype._fireExitedFullscreen=function(){this.fireEvent("exitedFullscreen")},x.prototype.viewMode=function(){return this._currentViewManager?this._currentViewManager.name():null},x.prototype.zoom=function(t){this._currentViewManager.zoom(t)},x.prototype.resetZoom=function(){this._currentViewManager.resetZoom()},x.prototype.setImageDomainSubstitution=function(t,e){this._imageDomainSubstitutionFrom=t,this._imageDomainSubstitutionList=e},x.prototype.disableViewManagerResizeWidth=function(){v.prototype._checkBodyWidth=function(){}},x.prototype.disable=function(){this.disabled||(this.disabled=!0,this.viewportManager.disable())},x.prototype.doDynamicBlurring=function(e){var n,i,r;this.removeInsteadOfBlurring()||(n=t("#"+e),n.on("dragstart, selectstart, contextmenu",function(t){t.preventDefault()}),n.find("*").andSelf().attr("unselectable","on"),r=Modernizr&&Modernizr.textshadow&&t.browser&&(t.browser.webkit&&!t.browser.safari||t.browser.mozilla||t.browser.opera)&&!(t.browser.mozilla===!0&&parseFloat(t.browser.version)<4&&parseFloat(t.browser.version)>=3),t.browser||console.log("Hi there, it seems as though you've upgraded jQuery and browser detection is no longer working in 4gen.js"),t(document).ready(function(){i=t(t("#page_blur_promo_template").html()).removeAttr("id").appendTo("#"+e).css("zIndex",8).show(),not_shown_text=I18n.t("pdfs.show.page_page_is_not_shown",{page:e.split("_").pop()}),i.find(".gap").html(not_shown_text),r||i.find(".page-blur-promo-overlay").height("100%").width("100%").css("zIndex",7).show()}),r&&(n.find(".text_layer").css({color:"transparent","text-shadow":"0px 0px 70px black"}),n.find(".text_layer [style]").css({color:"transparent"}),n.find(".image_layer").imagesLoaded(function(){n.find(".image_layer img").each(function(){this.height>250&&this.width>250&&t(this).css({opacity:.04})})})))},x.setJQuery=function(e){t=e},x.ScrollViewManager=k,x.SlideViewManager=w,x.BookViewManager=y,x}();window.DocumentManager=d},void 0===window.DocumentManager&&init_4gen();


/* public/javascripts/modernizr.custom.12353.js @ 1475279512 */
window.Modernizr=function(t,e,n){function i(t){v.cssText=t}function r(t,e){return typeof t===e}function o(t,e){return!!~(""+t).indexOf(e)}function s(t,e){for(var i in t){var r=t[i];if(!o(r,"-")&&v[r]!==n)return"pfx"==e?r:!0}return!1}function a(t,e,i){for(var o in t){var s=e[t[o]];if(s!==n)return i===!1?t[o]:r(s,"function")?s.bind(i||e):s}return!1}function c(t,e,n){var i=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+w.join(i+" ")+i).split(" ");return r(e,"string")||r(e,"undefined")?s(o,e):(o=(t+" "+k.join(i+" ")+i).split(" "),a(o,e,n))}var u,l,d,h="2.8.2",p={},f=!0,_=e.documentElement,m="modernizr",g=e.createElement(m),v=g.style,b=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),y="Webkit Moz O ms",w=y.split(" "),k=y.toLowerCase().split(" "),x={},S=[],C=S.slice,E=function(t,n,i,r){var o,s,a,c,u=e.createElement("div"),l=e.body,d=l||e.createElement("body");if(parseInt(i,10))for(;i--;)a=e.createElement("div"),a.id=r?r[i]:m+(i+1),u.appendChild(a);return o=["&#173;",'<style id="s',m,'">',t,"</style>"].join(""),u.id=m,(l?u:d).innerHTML+=o,d.appendChild(u),l||(d.style.background="",d.style.overflow="hidden",c=_.style.overflow,_.style.overflow="hidden",_.appendChild(d)),s=n(u,t),l?u.parentNode.removeChild(u):(d.parentNode.removeChild(d),_.style.overflow=c),!!s},T={}.hasOwnProperty;d=r(T,"undefined")||r(T.call,"undefined")?function(t,e){return e in t&&r(t.constructor.prototype[e],"undefined")}:function(t,e){return T.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var n=C.call(arguments,1),i=function(){if(this instanceof i){var r=function(){};r.prototype=e.prototype;var o=new r,s=e.apply(o,n.concat(C.call(arguments)));return Object(s)===s?s:o}return e.apply(t,n.concat(C.call(arguments)))};return i}),x.textshadow=function(){return""===e.createElement("div").style.textShadow},x.csstransforms=function(){return!!c("transform")},x.csstransforms3d=function(){var t=!!c("perspective");return t&&"webkitPerspective"in _.style&&E("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(e){t=9===e.offsetLeft&&3===e.offsetHeight}),t};for(var M in x)d(x,M)&&(l=M.toLowerCase(),p[l]=x[M](),S.push((p[l]?"":"no-")+l));return p.addTest=function(t,e){if("object"==typeof t)for(var i in t)d(t,i)&&p.addTest(i,t[i]);else{if(t=t.toLowerCase(),p[t]!==n)return p;e="function"==typeof e?e():e,"undefined"!=typeof f&&f&&(_.className+=" "+(e?"":"no-")+t),p[t]=e}return p},i(""),g=u=null,function(t,e){function n(t,e){var n=t.createElement("p"),i=t.getElementsByTagName("head")[0]||t.documentElement;return n.innerHTML="x<style>"+e+"</style>",i.insertBefore(n.lastChild,i.firstChild)}function i(){var t=v.elements;return"string"==typeof t?t.split(" "):t}function r(t){var e=g[t[_]];return e||(e={},m++,t[_]=m,g[m]=e),e}function o(t,n,i){if(n||(n=e),l)return n.createElement(t);i||(i=r(n));var o;return o=i.cache[t]?i.cache[t].cloneNode():f.test(t)?(i.cache[t]=i.createElem(t)).cloneNode():i.createElem(t),!o.canHaveChildren||p.test(t)||o.tagUrn?o:i.frag.appendChild(o)}function s(t,n){if(t||(t=e),l)return t.createDocumentFragment();n=n||r(t);for(var o=n.frag.cloneNode(),s=0,a=i(),c=a.length;c>s;s++)o.createElement(a[s]);return o}function a(t,e){e.cache||(e.cache={},e.createElem=t.createElement,e.createFrag=t.createDocumentFragment,e.frag=e.createFrag()),t.createElement=function(n){return v.shivMethods?o(n,t,e):e.createElem(n)},t.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+i().join().replace(/[\w\-]+/g,function(t){return e.createElem(t),e.frag.createElement(t),'c("'+t+'")'})+");return n}")(v,e.frag)}function c(t){t||(t=e);var i=r(t);return v.shivCSS&&!u&&!i.hasCSS&&(i.hasCSS=!!n(t,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),l||a(t,i),t}var u,l,d="3.7.0",h=t.html5||{},p=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,f=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,_="_html5shiv",m=0,g={};!function(){try{var t=e.createElement("a");t.innerHTML="<xyz></xyz>",u="hidden"in t,l=1==t.childNodes.length||function(){e.createElement("a");var t=e.createDocumentFragment();return"undefined"==typeof t.cloneNode||"undefined"==typeof t.createDocumentFragment||"undefined"==typeof t.createElement}()}catch(n){u=!0,l=!0}}();var v={elements:h.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:d,shivCSS:h.shivCSS!==!1,supportsUnknownElements:l,shivMethods:h.shivMethods!==!1,type:"default",shivDocument:c,createElement:o,createDocumentFragment:s};t.html5=v,c(e)}(this,e),p._version=h,p._prefixes=b,p._domPrefixes=k,p._cssomPrefixes=w,p.testProp=function(t){return s([t])},p.testAllProps=c,p.testStyles=E,p.prefixed=function(t,e,n){return e?c(t,e,n):c(t,"pfx")},_.className=_.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+S.join(" "):""),p}(this,this.document),function(t,e,n){function i(t){return"[object Function]"==m.call(t)}function r(t){return"string"==typeof t}function o(){}function s(t){return!t||"loaded"==t||"complete"==t||"uninitialized"==t}function a(){var t=g.shift();v=1,t?t.t?f(function(){("c"==t.t?h.injectCss:h.injectJs)(t.s,0,t.a,t.x,t.e,1)},0):(t(),a()):v=0}function c(t,n,i,r,o,c,u){function l(e){if(!p&&s(d.readyState)&&(b.r=p=1,!v&&a(),d.onload=d.onreadystatechange=null,e)){"img"!=t&&f(function(){w.removeChild(d)},50);for(var i in E[n])E[n].hasOwnProperty(i)&&E[n][i].onload()}}var u=u||h.errorTimeout,d=e.createElement(t),p=0,m=0,b={t:i,s:n,e:o,a:c,x:u};1===E[n]&&(m=1,E[n]=[]),"object"==t?d.data=n:(d.src=n,d.type=t),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){l.call(this,m)},g.splice(r,0,b),"img"!=t&&(m||2===E[n]?(w.insertBefore(d,y?null:_),f(l,u)):E[n].push(d))}function u(t,e,n,i,o){return v=0,e=e||"j",r(t)?c("c"==e?x:k,t,e,this.i++,n,i,o):(g.splice(this.i++,0,t),1==g.length&&a()),this}function l(){var t=h;return t.loader={load:u,i:0},t}var d,h,p=e.documentElement,f=t.setTimeout,_=e.getElementsByTagName("script")[0],m={}.toString,g=[],v=0,b="MozAppearance"in p.style,y=b&&!!e.createRange().compareNode,w=y?p:_.parentNode,p=t.opera&&"[object Opera]"==m.call(t.opera),p=!!e.attachEvent&&!p,k=b?"object":p?"script":"img",x=p?"script":k,S=Array.isArray||function(t){return"[object Array]"==m.call(t)},C=[],E={},T={timeout:function(t,e){return e.length&&(t.timeout=e[0]),t}};h=function(t){function e(t){var e,n,i,t=t.split("!"),r=C.length,o=t.pop(),s=t.length,o={url:o,origUrl:o,prefixes:t};for(n=0;s>n;n++)i=t[n].split("="),(e=T[i.shift()])&&(o=e(o,i));for(n=0;r>n;n++)o=C[n](o);return o}function s(t,r,o,s,a){var c=e(t),u=c.autoCallback;c.url.split(".").pop().split("?").shift(),c.bypass||(r&&(r=i(r)?r:r[t]||r[s]||r[t.split("/").pop().split("?")[0]]),c.instead?c.instead(t,r,o,s,a):(E[c.url]?c.noexec=!0:E[c.url]=1,o.load(c.url,c.forceCSS||!c.forceJS&&"css"==c.url.split(".").pop().split("?").shift()?"c":n,c.noexec,c.attrs,c.timeout),(i(r)||i(u))&&o.load(function(){l(),r&&r(c.origUrl,a,s),u&&u(c.origUrl,a,s),E[c.url]=2})))}function a(t,e){function n(t,n){if(t){if(r(t))n||(d=function(){var t=[].slice.call(arguments);h.apply(this,t),p()}),s(t,d,e,0,u);else if(Object(t)===t)for(c in a=function(){var e,n=0;for(e in t)t.hasOwnProperty(e)&&n++;return n}(),t)t.hasOwnProperty(c)&&(!n&&!--a&&(i(d)?d=function(){var t=[].slice.call(arguments);h.apply(this,t),p()}:d[c]=function(t){return function(){var e=[].slice.call(arguments);t&&t.apply(this,e),p()}}(h[c])),s(t[c],d,e,c,u))}else!n&&p()}var a,c,u=!!t.test,l=t.load||t.both,d=t.callback||o,h=d,p=t.complete||o;n(u?t.yep:t.nope,!!l),l&&n(l)}var c,u,d=this.yepnope.loader;if(r(t))s(t,0,d,0);else if(S(t))for(c=0;c<t.length;c++)u=t[c],r(u)?s(u,0,d,0):S(u)?h(u):Object(u)===u&&a(u,d);else Object(t)===t&&a(t,d)},h.addPrefix=function(t,e){T[t]=e},h.addFilter=function(t){C.push(t)},h.errorTimeout=1e4,null==e.readyState&&e.addEventListener&&(e.readyState="loading",e.addEventListener("DOMContentLoaded",d=function(){e.removeEventListener("DOMContentLoaded",d,0),e.readyState="complete"},0)),t.yepnope=l(),t.yepnope.executeStack=a,t.yepnope.injectJs=function(t,n,i,r,c,u){var l,d,p=e.createElement("script"),r=r||h.errorTimeout;p.src=t;for(d in i)p.setAttribute(d,i[d]);n=u?a:n||o,p.onreadystatechange=p.onload=function(){!l&&s(p.readyState)&&(l=1,n(),p.onload=p.onreadystatechange=null)},f(function(){l||(l=1,n(1))},r),c?p.onload():_.parentNode.insertBefore(p,_)},t.yepnope.injectCss=function(t,n,i,r,s,c){var u,r=e.createElement("link"),n=c?a:n||o;r.href=t,r.rel="stylesheet",r.type="text/css";for(u in i)r.setAttribute(u,i[u]);s||(_.parentNode.insertBefore(r,_),f(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};


/* public/javascripts/imagesloaded.pkgd.js @ 1475279512 */
!function(t){"use strict";function e(){}function n(t,e){if(r)return e.indexOf(t);for(var n=e.length;n--;)if(e[n]===t)return n;return-1}var i=e.prototype,r=Array.prototype.indexOf?!0:!1;i._getEvents=function(){return this._events||(this._events={})},i.getListeners=function(t){var e,n,i=this._getEvents();if("object"==typeof t){e={};for(n in i)i.hasOwnProperty(n)&&t.test(n)&&(e[n]=i[n])}else e=i[t]||(i[t]=[]);return e},i.getListenersAsObject=function(t){var e,n=this.getListeners(t);return n instanceof Array&&(e={},e[t]=n),e||n},i.addListener=function(t,e){var i,r=this.getListenersAsObject(t);for(i in r)r.hasOwnProperty(i)&&-1===n(e,r[i])&&r[i].push(e);return this},i.on=i.addListener,i.defineEvent=function(t){return this.getListeners(t),this},i.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},i.removeListener=function(t,e){var i,r,o=this.getListenersAsObject(t);for(r in o)o.hasOwnProperty(r)&&(i=n(e,o[r]),-1!==i&&o[r].splice(i,1));return this},i.off=i.removeListener,i.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},i.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},i.manipulateListeners=function(t,e,n){var i,r,o=t?this.removeListener:this.addListener,s=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(i=n.length;i--;)o.call(this,e,n[i]);else for(i in e)e.hasOwnProperty(i)&&(r=e[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(t){var e,n=typeof t,i=this._getEvents();if("string"===n)delete i[t];else if("object"===n)for(e in i)i.hasOwnProperty(e)&&t.test(e)&&delete i[e];else delete this._events;return this},i.emitEvent=function(t,e){var n,i,r,o=this.getListenersAsObject(t);for(i in o)if(o.hasOwnProperty(i))for(n=o[i].length;n--;)r=e?o[i][n].apply(null,e):o[i][n](),r===!0&&this.removeListener(t,o[i][n]);return this},i.trigger=i.emitEvent,i.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},"function"==typeof define&&define.amd?define(function(){return e}):t.EventEmitter=e}(this),function(t){"use strict";var e=document.documentElement,n=function(){};e.addEventListener?n=function(t,e,n){t.addEventListener(e,n,!1)}:e.attachEvent&&(n=function(e,n,i){e[n+i]=i.handleEvent?function(){var e=t.event;e.target=e.target||e.srcElement,i.handleEvent.call(i,e)}:function(){var n=t.event;n.target=n.target||n.srcElement,i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var i=function(){};e.removeEventListener?i=function(t,e,n){t.removeEventListener(e,n,!1)}:e.detachEvent&&(i=function(t,e,n){t.detachEvent("on"+e,t[e+n]);try{delete t[e+n]}catch(i){t[e+n]=void 0}});var r={bind:n,unbind:i};"function"==typeof define&&define.amd?define(r):t.eventie=r}(this),function(t){"use strict";function e(t,e){for(var n in e)t[n]=e[n];return t}function n(t){return"[object Array]"===c.call(t)}function i(t){var e=[];if(n(t))e=t;else if("number"==typeof t.length)for(var i=0,r=t.length;r>i;i++)e.push(t[i]);else e.push(t);return e}function r(t,n){function r(t,n,s){if(!(this instanceof r))return new r(t,n);"string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=i(t),this.options=e({},this.options),"function"==typeof n?s=n:e(this.options,n),s&&this.on("always",s),this.getImages(),o&&(this.jqDeferred=new o.Deferred);var a=this;setTimeout(function(){a.check()})}function c(t){this.img=t}r.prototype=new t,r.prototype.options={},r.prototype.getImages=function(){this.images=[];for(var t=0,e=this.elements.length;e>t;t++){var n=this.elements[t];"IMG"===n.nodeName&&this.addImage(n);for(var i=n.querySelectorAll("img"),r=0,o=i.length;o>r;r++){var s=i[r];this.addImage(s)}}},r.prototype.addImage=function(t){var e=new c(t);this.images.push(e)},r.prototype.check=function(){function t(t,r){return e.options.debug&&a&&s.log("confirm",t,r),e.progress(t),n++,n===i&&e.complete(),!0}var e=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return void this.complete();for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",t),o.check()}},r.prototype.progress=function(t){this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emit("progress",this,t),this.jqDeferred&&this.jqDeferred.notify(this,t)},r.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";if(this.isComplete=!0,this.emit(t,this),this.emit("always",this),this.jqDeferred){var e=this.hasAnyBroken?"reject":"resolve";this.jqDeferred[e](this)}},o&&(o.fn.imagesLoaded=function(t,e){var n=new r(this,t,e);return n.jqDeferred.promise(o(this))});var u={};return c.prototype=new t,c.prototype.check=function(){var t=u[this.img.src];if(t)return void this.useCached(t);if(u[this.img.src]=this,this.img.complete&&void 0!==this.img.naturalWidth)return void this.confirm(0!==this.img.naturalWidth,"naturalWidth");var e=this.proxyImage=new Image;n.bind(e,"load",this),n.bind(e,"error",this),e.src=this.img.src},c.prototype.useCached=function(t){if(t.isConfirmed)this.confirm(t.isLoaded,"cached was confirmed");else{var e=this;t.on("confirm",function(t){return e.confirm(t.isLoaded,"cache emitted confirmed"),!0})}},c.prototype.confirm=function(t,e){this.isConfirmed=!0,this.isLoaded=t,this.emit("confirm",this,e)},c.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},c.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindProxyEvents()},c.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindProxyEvents()},c.prototype.unbindProxyEvents=function(){n.unbind(this.proxyImage,"load",this),n.unbind(this.proxyImage,"error",this)},r}var o=t.jQuery,s=t.console,a="undefined"!=typeof s,c=Object.prototype.toString;"function"==typeof define&&define.amd?define(["eventEmitter","eventie"],r):t.imagesLoaded=r(t.EventEmitter,t.eventie)}(window);


/* :asset_packager_compatibility, 'config/asset_packages.yml' @ 1475279453 */


/* :files, 'public/javascripts/shared', ... @ (none) */


/* :files, 'app/views', ... @ (none) */


/* :files, 'app/views', ... @ (none) */


/* :class_inlines, 'app/views', ... @ 1475279453 */
/* app/views/embeds/new/show.coffee @ 1475279453 */
(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};Scribd.EmbedsShow=function(){function e(e,n){this.opts=n,this.append_url_frag=t(this.append_url_frag,this),this.container=$(e),this.view_mode=this.opts.view_mode||"scroll",this.document=$.extend(this.opts.document,{total_pages:this.get_highest_page()}),this.setup_mobile(),this.render_toolbar(),this.setup_events(),this.setup_sizing(),this.setup_buy_manager(),this.is_mobile()||Scribd.hook_tooltips(this.container.parent()),this.send_events(),this.setup_scroll_tracking(),_.defer(function(t){return function(){return t.opts.start_page&&t.opts.start_page>1?docManager.gotoPage(t.opts.start_page):void 0}}(this))}return e.min_zoom=.6,e.max_zoom=2.5,e.prototype.setup_mobile=function(){return this.is_mobile()?(this.has_mobile_overlay=!0,this.container.addClass("show_mobile_overlay"),this.container.find("[data-mobile_doc_href]").attr("href",this.opts.document.mobile_url)):void 0},e.prototype.send_events=function(){return this.container.on("click",".mobile_overlay_btn",function(){return function(){return $(document.body).track_rats("embed:overlay_button:click")}}(this)),_.defer(function(t){return function(){return $(document.body).track_rats("embed:view",{rec_bar:t.opts.show_recommendations,width:$(window).width(),height:$(window).height(),doc_type:t.opts.document_type_for_tracking,view_mode:t.view_mode,mobile_overlay:t.container.find(".mobile_overlay").is(":visible")})}}(this))},e.prototype.setup_carousels=function(){var t,e,n,i,r;if(this.setup_carousels=function(){},e=this.container.find(".recommendation_rows"),e.length){for(r=e.find(".document_carousel"),n=0,i=r.length;i>n;n++)t=r[n],new Scribd.UI.Carousel($(t),{tracking_module:!1});return e.find(".doc_link").attr("target","_blank"),e.on("click",".doc_link",function(t){return function(e){var n,i;return i=$(e.currentTarget),$(document.body).track_rats("embed:rec_bar_content:click",{doc_id:i.closest(".document_cell").data("object_id"),loc:i.closest("[data-track_name]").data("track_name")}),e.currentTarget.href?(n=t.append_url_frag(e.currentTarget.href,"from_embed"),window.open(n,"_blank"),e.stopPropagation(),e.preventDefault()):void 0}}(this))}},e.prototype.append_url_frag=function(t,e){var n;return n=t.split("#"),n[1]=n[1]?n[1]+"&"+e:e,n.join("#")},e.prototype.setup_events=function(){return"undefined"!=typeof docManager&&null!==docManager&&docManager.addEvent("expectedFirstPageChanged",function(t){return function(e){return t.current_page=e,t.render()}}(this)),this.container.dispatch("click",{close_recs_btn:function(t){return function(){return t.recommendations_open=!t.recommendations_open,t.render()}}(this)}),Scribd.R.dispatch(this.container,{"toolbar:goto_page":function(t){return function(e,n,i){var r,o;return null==i&&(i=!1),r=n>t.current_page?1:-1,o=docManager.getClosestPageNumber(n,r),docManager.gotoPage(o,{direction:r})}}(this),"toolbar:next_page":function(){return function(){return docManager.gotoNextPage()}}(this),"toolbar:previous_page":function(){return function(){return docManager.gotoPreviousPage()}}(this),"toolbar:toggle_recommendations":function(t){return function(){return $(document.body).track_rats("embed:rec_bar:click",{action:t.recommendations_open?"hide":"show"}),t.recommendations_open=!t.recommendations_open,t.render()}}(this),"toolbar:zoom_in":function(t){return function(){return t.current_zoom>=t.constructor.max_zoom?void 0:("undefined"!=typeof docManager&&null!==docManager&&docManager.zoom(1.25),t.render())}}(this),"toolbar:zoom_out":function(t){return function(){return t.current_zoom<=t.constructor.min_zoom?void 0:("undefined"!=typeof docManager&&null!==docManager&&docManager.zoom(.8),t.render())}}(this)})},e.prototype.setup_scroll_tracking=function(){var t,e;return e=this.container.find(".document_scroller"),setTimeout(function(){return e.one("scroll",function(){return $(document.body).track_rats("embed:scroll")})},500),t=function(){var n,i;return i=e[0].scrollHeight,n=e.scrollTop()/(i-e.height()),n>.98?($(document.body).track_rats("embed:scroll_end"),e.off("scroll",t)):void 0},e.on("scroll",t)},e.prototype.setup_sizing=function(){var t,e,n,i,r,o;return i=this.container.find(".document_scroller"),e=60,r=30,n=1e3,o=$(window),t=function(t){return function(){var o,s;return"scroll"===t.view_mode?Math.min(n,i.width()-e):(o=docManager.pages[docManager.currentPageNum()],s=o.origWidth/o.origHeight,Math.min(n,i.width()-e,(i.height()-r)*s))}}(this),docManager.setViewManager(this.view_mode,function(e){return function(){return e.update_page_width=function(){var n;return docManager.setDefaultWidth(t()),n=e.narrow,e.narrow=o.width()<520,n!==e.narrow?e.render():void 0},e.update_page_width(),$(window).on("resize",_.debounce(function(){return e.update_page_width()},50))}}(this))},e.prototype.render=function(){return window.docManager?(this.current_zoom=docManager._currentViewManager._currentZoomMultiplier,this.render_toolbar(),this.container.toggleClass("recommendations_open",!!this.recommendations_open).toggleClass("view_mode_scroll","scroll"===this.view_mode).toggleClass("view_mode_slideshow","slideshow"===this.view_mode),this.recommendations_open?this.setup_carousels():void 0):void 0},e.prototype.render_toolbar=function(){var t;return this.toolbar_drop||(this.toolbar_drop=this.container.find(".toolbar_drop")),t=$.extend({},this.opts.toolbar,{view_mode:this.view_mode,document:this.document,recommendations_open:this.recommendations_open,show_recommendations:this.opts.show_recommendations,is_mobile:this.is_mobile(),hide_controls:this.has_mobile_overlay||this.narrow,current_zoom:this.current_zoom,current_page:this.current_page||1,on_first_page:1===this.current_page,on_last_page:this.current_page===this.get_highest_page()}),this.toolbar=ReactDOM.render(Scribd.R.Embeds.New.Toolbar(t),this.toolbar_drop[0])},e.prototype.get_highest_page=function(){var t,e,n;if(!window.docManager)return 0;if(t=null!=(n=Scribd.current_doc)?n.page_count:void 0,!t){t=0;for(e in docManager.pages)t=Math.max(t,e)}return this.get_highest_page=function(){return t},t},e.prototype.setup_buy_manager=function(){return Scribd.BuyDocManager.for_current_doc()},e.prototype.is_mobile=function(){return!!navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i)},e}()}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{embeds:{"new":{show:{view_on_scribd:"View on Scribd",back_to_document:"Back to document",join_scribd:"Join Scribd",discover_millions_of_books_audiobooks_and:"Discover millions of books, audiobooks, and documents",start_your_free_trial:"Start your free trial"}}}}});


/* app/views/embeds/new/_toolbar.coffee @ 1475279453 */
(function(){var t,e,n,i,r,o,s,a;o=React.DOM,i=o.div,e=o.a,s=o.span,r=o.input,n=Scribd.R.component_builder("Embeds.New.Toolbar",{css_class:"autogen_class_views_embeds_new_toolbar",track_category:"embeds:toolbar"}),a=React.PropTypes,t=React.createFactory(React.addons.CSSTransitionGroup),n({propTypes:{show_recommendations:a.bool,recommendations_open:a.bool,hide_controls:a.bool,is_mobile:a.bool,view_mode:a.oneOf(["slideshow","scroll"]).isRequired,document:a.shape({url:a.string.isRequired}).isRequired},getInitialState:function(){return{recommendations_dismissed:!1,share_open:!1}},widget_css_classes:function(t){return classNames(t,"view_mode_"+this.props.view_mode,{can_shrink_logo:this.props.current_user||this.props.buy_url})},componentDidMount:function(){var t,e,n,i;new Scribd.SharingButtons(this.container(),this.props.share_opts),i={"scribd:share:email":"embed:share_email:click","scribd:share:facebook":"embed:share_facebook:click","scribd:share:twitter":"embed:share_twitter:click","scribd:share:pinterest":"embed:share_pinterest:click"},e=function(t){return function(e,n){return t.container().on(e,function(){return $(document.body).track_rats(n)})}}(this);for(t in i)n=i[t],e(t,n);return $(document.body).on("click",function(t){return function(e){var n;if(t.isMounted()&&!t.props.hide_controls&&t.state.share_open&&(n=$(e.target).closest([t.refs.share_popup,t.refs.share_btn]),!n.length))return t.setState({share_open:!1})}}(this))},render:function(){return[t({transitionName:"popup_appear",transitionEnterTimeout:200,transitionLeaveTimeout:100,children:this.state.share_open&&this.props.hide_controls?this.render_share_overlay():void 0}),"slideshow"===this.props.view_mode?this.render_paddles():void 0,this.props.show_recommendations&&!this.state.recommendations_dismissed?i({className:"recommendations_bar",children:[e({href:"javascript:void(0)",children:[I18n.t("embeds.new.toolbar.show_me_more_about_this_topic")+" ",s({className:"icon icon-down_arrow"})],onClick:function(t){return function(){return t.trigger("toolbar:toggle_recommendations")}}(this)}),s({className:"icon icon-close close_btn",onClick:function(t){return function(){return $(document.body).track_rats("embed:rec_bar_dismiss:click"),t.setState({recommendations_dismissed:!0})}}(this)})]}):void 0,i({className:"toolbar_items",children:[e({"data-tooltip":I18n.t("embeds.new.toolbar.view_on_scribd_com"),href:this.props.is_mobile?this.props.document.mobile_url:this.props.document.url+"#from_embed",target:"_blank",className:"toolbar_scribd_logo",onClick:function(){return function(){return $(document.body).track_rats("embed:logo:click")}}(this)}),this.render_right_tools(),this.render_center_tools()]})]},render_right_tools:function(){return i({className:"right_tools",children:["slideshow"!==this.props.view_mode||this.props.hide_controls?void 0:this.render_zoomers(),this.props.buy_url?e({"data-tooltip":I18n.t("embeds.new.toolbar.buy"),className:"toolbar_btn buy_btn icon-cart",target:"_blank",href:this.props.document.url+"#from_embed",onClick:function(t){return function(){return $(document.body).track_rats("embed:purchase_cart:click"),t.trigger("toolbar:buy")}}(this)}):this.props.downloadable&&!this.props.is_mobile?e({"data-tooltip":I18n.t("embeds.new.toolbar.download"),className:"toolbar_btn icon-download",target:"_blank",href:this.props.document.url+"#download&from_embed",onClick:function(t){return function(){return $(document.body).track_rats("embed:download:click"),t.trigger("toolbar:download")}}(this)}):void 0,i({className:"share_wrapper",children:[i({"data-tooltip":I18n.t("embeds.new.toolbar.share"),ref:"share_btn",className:classNames("toolbar_btn","share_btn","icon-share",{active:this.state.share_open}),onClick:function(t){return function(){return $(document.body).track_rats("embed:share:click"),t.setState({share_open:!t.state.share_open})}}(this)}),t({transitionName:"popup_appear",transitionEnterTimeout:200,transitionLeaveTimeout:100,children:this.state.share_open&&!this.props.hide_controls?this.render_share_popup():void 0})]}),e({"data-tooltip":I18n.t("embeds.new.toolbar.fullscreen"),className:classNames("toolbar_btn","icon-ic_fullscreen"),target:"_blank",href:this.props.is_mobile?this.props.document.mobile_url:this.props.document.url+"#fullscreen&from_embed",onClick:function(t){return function(){return $(document.body).track_rats("embed:fullscreen:click"),t.trigger("toolbar:fullscreen")}}(this)})]})},render_center_tools:function(){var t;return t="scroll"===this.props.view_mode,i({className:"center_tools",children:[this.props.hide_controls?this.render_page_display():[t?void 0:this.render_left_arrow(),this.render_pager(),t?void 0:this.render_right_arrow(),t?this.render_zoomers():void 0]]})},render_page_display:function(){var t;return t=_.string.numberFormat,i({className:"page_display"},I18n.t("embeds.new.toolbar.props_current_page_of_numberformat_props_document_total_pages",{props_current_page:this.props.current_page,numberformat_props_document_total_pages:t(this.props.document.total_pages)}))},render_left_arrow:function(){return i({"data-tooltip":I18n.t("embeds.new.toolbar.previous_page"),className:classNames("toolbar_btn icon-slide_back",{disabled:this.props.on_first_page}),onClick:function(t){return function(){return t.props.on_first_page?void 0:($(document.body).track_rats("embed:previous_page:click",{location:"toolbar"}),t.trigger("toolbar:previous_page"))}}(this)})},render_right_arrow:function(){return i({"data-tooltip":I18n.t("embeds.new.toolbar.next_page"),className:classNames("toolbar_btn icon-slide_fwd",{disabled:this.props.on_last_page}),onClick:function(t){return function(){return t.props.on_last_page?void 0:($(document.body).track_rats("embed:next_page:click",{location:"toolbar"}),t.trigger("toolbar:next_page"))}}(this)})},render_zoomers:function(){var t,e;return e=this.props.current_zoom<=Scribd.EmbedsShow.min_zoom,t=this.props.current_zoom>=Scribd.EmbedsShow.max_zoom,[i({"data-tooltip":I18n.t("embeds.new.toolbar.zoom_in"),className:classNames("toolbar_btn zoom_btn icon-zoom-in-default",{disabled:t}),onClick:function(e){return function(){return t?void 0:($(document.body).track_rats("embed:zoom_in:click"),e.trigger("toolbar:zoom_in"))}}(this)}),i({"data-tooltip":I18n.t("embeds.new.toolbar.zoom_out"),className:classNames("toolbar_btn zoom_btn icon-zoom-out-default",{disabled:e}),onClick:function(t){return function(){return e?void 0:($(document.body).track_rats("embed:zoom_out:click"),t.trigger("toolbar:zoom_out"))}}(this)})]},render_pager:function(){var t;return t=_.string.numberFormat,i({className:"toolbar_pager",children:[r({type:"text",className:"page_input",value:null!=this.state.changing_to_page?this.state.changing_to_page:this.props.current_page,onFocus:function(){return function(){return $(document.body).track_rats("embed:page_num_box:click")}}(this),onBlur:function(t){return function(e){var n;if(null!=t.state.changing_to_page)return e.target.value.match(/\d/)&&(n=parseInt(e.target.value,10),n!==t.props.current_page&&t.trigger("toolbar:goto_page",n)),t.setState({changing_to_page:null})}}(this),onKeyDown:function(t){return function(e){if(t.state.changing_to_page)switch(e.keyCode){case 13:return t.trigger("toolbar:goto_page",parseInt(e.target.value,10)),t.setState({changing_to_page:null});case 27:return t.setState({changing_to_page:null})}}}(this),onChange:function(t){return function(e){return t.setState({changing_to_page:e.target.value})}}(this)}),s({className:"total_pages"},I18n.t("embeds.new.toolbar.of_numberformat_props_document_total_pages",{numberformat_props_document_total_pages:t(this.props.document.total_pages)}))]})},render_share_buttons:function(){return i({className:"share_buttons",children:[s({className:"icon icon-facebook2 share_facebook_btn"}),s({className:"icon icon-pinterest share_pinterest_btn"}),s({className:"icon icon-twitter share_twitter_btn"}),e({className:"icon icon-email",target:"_blank",href:this.props.share_opts.mailto_url})]})},render_share_overlay:function(){return i({className:"share_box",children:[i({className:"icon icon-close close_btn",onClick:function(t){return function(){return t.setState({share_open:!1})}}(this)}),i({className:"centered_content",children:[i({className:"share_label"},I18n.t("embeds.new.toolbar.share")),this.render_share_buttons()]})]})},render_share_popup:function(){return i({ref:"share_popup",className:"share_popup"},this.render_share_buttons())},render_paddles:function(){return this.props.hide_controls?void 0:[this.props.on_first_page?void 0:i({className:"pagination_paddle paddle_left",onClick:function(t){return function(){return $(document.body).track_rats("embed:previous_page:click",{location:"paddle"}),t.trigger("toolbar:previous_page")}}(this)},s({className:"icon icon-leftarrow"})),this.props.on_last_page?void 0:i({className:"pagination_paddle paddle_right",onClick:function(t){return function(){return $(document.body).track_rats("embed:next_page:click",{location:"paddle"}),t.trigger("toolbar:next_page")}}(this)},s({className:"icon icon-rightarrow"}))]}})}).call(this),(Scribd.translations=Scribd.translations||[]).push({en_US:{embeds:{"new":{toolbar:{show_me_more_about_this_topic:"Show me more about this topic",view_on_scribd_com:"View on Scribd.com",buy:"Buy",download:"Download",share:"Share",fullscreen:"Fullscreen",props_current_page_of_numberformat_props_document_total_pages:"%{props_current_page} of %{numberformat_props_document_total_pages}",previous_page:"Previous page",next_page:"Next page",zoom_in:"Zoom in",zoom_out:"Zoom out",of_numberformat_props_document_total_pages:"of %{numberformat_props_document_total_pages}"}}}}});


/* :class_inlines, 'spec_javascripts/js_spec', ... @ (none) */
