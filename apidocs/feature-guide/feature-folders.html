<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Variable folders &#8212; API Docs 0.4.1 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/crunch.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/crunch.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Endpoint Reference" href="../endpoint-reference/index.html" />
    <link rel="prev" title="Versioning Datasets" href="feature-versioning.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/logo.svg"></span>
          API Docs</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            

    <li><a href="http://status.crunch.io/">Status</a></li>


            
              
                
  <li>
    <a href="feature-versioning.html" title="Previous Chapter: Versioning Datasets"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Versioning Datasets</span>
    </a>
  </li>
  <li>
    <a href="../endpoint-reference/index.html" title="Next Chapter: Endpoint Reference"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Endpoint Reference &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form><ul class="sidebar-toc"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Feature Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="feature-authentication.html">Authentication</a></li>
<li class="toctree-l2"><a class="reference internal" href="feature-password-policy.html">Password policy</a></li>
<li class="toctree-l2"><a class="reference internal" href="feature-importing.html">Importing Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="feature-appending.html">Appending Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="feature-appending.html#combining-datasets">Combining datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="feature-extending.html">Merging and Joining Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="feature-deriving.html">Deriving Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="feature-arrays.html">Array Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="feature-analyzing.html">Multidimensional analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="feature-versioning.html">Versioning Datasets</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Variable folders</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#rationale">Rationale</a></li>
<li class="toctree-l3"><a class="reference internal" href="#benefits">Benefits</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-concepts">Basic concepts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#migrating-to-folders">Migrating to folders</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compatibility-with-variables-order">Compatibility with variablesâ€™ order</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../endpoint-reference/index.html">Endpoint Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../object-reference/object-reference.html">Object Reference</a></li>
</ul>
</ul><ul class="toc-footer">
  <li><a href="http://crunch.io/">Sign Up</a></li>
</ul>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="variable-folders">
<h1>Variable folders<a class="headerlink" href="#variable-folders" title="Permalink to this headline"> ðŸ”—</a></h1>
<p>Variable folders provide a new and more performant way to organize
large number of variables.</p>
<div class="section" id="rationale">
<h2>Rationale<a class="headerlink" href="#rationale" title="Permalink to this headline"> ðŸ”—</a></h2>
<p>Datasets with several thousands of variables need to be organized to make it
possible to make sense of their groups of variables.</p>
<p>Historically the variablesâ€™ order has provided a way to keep a parallel list
of the variable URLs using a <cite>shoji:order</cite> to indicate clients their grouping.</p>
<p>The problem arises when there are thousands of variables to include both in
the variablesâ€™ order and the variablesâ€™ catalog, which always have to include
the full list of all available variables. Making these two responses not only
slow to generate and download, but also to process such large JSON payloads.</p>
<p>To get around this problem, Folders were introduced as a new way to orgainze
and list variables under a single protocol without needing to keep a separate
catalog and order for the variables.</p>
</div>
<div class="section" id="benefits">
<h2>Benefits<a class="headerlink" href="#benefits" title="Permalink to this headline"> ðŸ”—</a></h2>
<p>With this new Folders catalogs, clients can start by fetching the root folder
which should contain the top level organization with a graspable number of
variables and subfolders to display. Similarly, subfolders will list only its
contents. This makes for much faster rountrips given that the majority of cases
only a handful of variables is needed and not to have always the full list
and their information in memory.</p>
<p>Manipulating and reorganizing variables is also easier since it is not necessary
for clients to wrangle with the full order data structure when moving variables
between groups/folders. Since now moving variables and creating groups are all
direct API calls that donâ€™t require clients to keep full track of the state
of the orders tree.</p>
</div>
<div class="section" id="basic-concepts">
<h2>Basic concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this headline"> ðŸ”—</a></h2>
<p>There are a number of system folders that exist with every dataset created.
These system folders cannot be renamed, moved or deleted.</p>
<ul class="simple">
<li><strong>Root folder</strong>: The root folder is the top level folder where all other subfolders will be created by dataset editors. All the variables and subfolders here will be public universal for all users with access to the dataset. It is only possible to place public varibles under this tree.</li>
<li><strong>Hidden variables folder</strong>: This folder is a parallel top level folder separate from the root folder, which allows dataset editors to hide variables out of the public Root folder. This tree structure is only accessible for dataset editors.</li>
<li><strong>Variables can only be in one folder</strong>: Variables can be in any of the top level system folders or in any subfolder of them at any given time, but they can never be in two folders at the same time.</li>
</ul>
</div>
<div class="section" id="migrating-to-folders">
<h2>Migrating to folders<a class="headerlink" href="#migrating-to-folders" title="Permalink to this headline"> ðŸ”—</a></h2>
<p>During the rolls out period, datasets will need to be activated to use folders
individually by changing its <cite>variable_folders</cite> setting to <cite>true</cite>.</p>
<div class="tabbable">
<ul class="nav nav-tabs simple">
<li class="disabled"><a class="disabled">Language-specific info:</a></li>
<li class="active"><a data-toggle="tab" href="#148957bdfeb8_HTTP">HTTP</a></li>
<li><a data-toggle="tab" href="#148957bdfeb8_JSON">JSON</a></li>
</ul>
<div class="tab-content section">
<div class="tab-pane active section" id="148957bdfeb8_HTTP">
<div class="code http highlight-default"><div class="highlight"><pre><span></span><span class="n">PATCH</span> <span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="nb">id</span><span class="o">/</span><span class="n">settings</span><span class="o">/</span>
</pre></div>
</div>
</div>
<div class="tab-pane section" id="148957bdfeb8_JSON">
<div class="code json highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;shoji:entity&quot;</span><span class="p">,</span>
    <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;variable_folders&quot;</span><span class="p">:</span> <span class="n">true</span><span class="s2">&quot;}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div><p>On activation, the current structure under the hierarchical order will be
converted to folders under the Root Folder replicating the existing
organization.</p>
<p>From then on, the existing /datasets/:id/variables/hier/ endpoint will now
reflect the structure that gets set as Folders, the latter now being the source
of truth.</p>
<p>Enabled datasets will expose a <cite>/folders/</cite> path where that follows the
folders documentation <a class="reference internal" href="../endpoint-reference/endpoint-folders.html#endpoint-folders"><span class="std std-ref">Variable Folders</span></a>.</p>
</div>
<div class="section" id="compatibility-with-variables-order">
<h2>Compatibility with variablesâ€™ order<a class="headerlink" href="#compatibility-with-variables-order" title="Permalink to this headline"> ðŸ”—</a></h2>
<p>The new folders feature holds a few differences from the previous hierarchical
order capabilities. Most notable are:</p>
<ul class="simple">
<li>Variables must always be under any folder, the Root folder by default</li>
<li>Variables must be under one folder only. The API allows moving between folders but there are no means to place a variable in two folders.</li>
<li>Subvariables are not allowed anywhere in the folder structure.</li>
<li>Hidden variables (variables with <cite>discarded</cite> attribute set to <cite>true</cite>) will always be under the Hidden variables folder. From now on the <cite>discarded</cite> attribute will be a reflection of whether or not a variable is present under the hidden folder.</li>
</ul>
<p>PATCH requests to the hierarchical order will enforce the above rules.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, Crunch.io.<br/>
      Last updated on May 08, 2018.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>