<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Users &#8212; API Docs 0.4.1 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/crunch.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/crunch.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Variables" href="endpoint-variable.html" />
    <link rel="prev" title="Teams" href="endpoint-team.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/logo.svg"></span>
          API Docs</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            

    <li><a href="http://status.crunch.io/">Status</a></li>


            
              
                
  <li>
    <a href="endpoint-team.html" title="Previous Chapter: Teams"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Teams</span>
    </a>
  </li>
  <li>
    <a href="endpoint-variable.html" title="Next Chapter: Variables"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Variables &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form><ul class="sidebar-toc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../feature-guide/index.html">Feature Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Endpoint Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="endpoint-public.html">Public</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-account.html">Accounts</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-batch.html">Batches</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-boxdata.html">Boxdata</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-comparison.html">Comparisons</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-dataset.html">Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-deck.html">Decks</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-deck.html#slides">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-deck.html#analysis">Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-filter.html">Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html">Variable Folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#root">Root</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#subfolder-endpoint">Subfolder endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#folder-payload">Folder payload</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#creating-folders">Creating folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#moving-folders-and-variables">Moving folders and variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#reordering-a-folder-s-contents">Reordering a folder’s contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#deleting-folders">Deleting folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#trash">Trash</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#hidden">Hidden</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-geodata.html">Geodata</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-join.html">Joins</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-multitable.html">Multitables</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-permission.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-progress.html">Progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-projects.html">Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-search.html">Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-source.html">Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-tabbook.html">Tab books</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-table.html">Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-team.html">Teams</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Users</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#catalog">Catalog</a></li>
<li class="toctree-l3"><a class="reference internal" href="#entity">Entity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#send-invitation-email">Send invitation email</a></li>
<li class="toctree-l4"><a class="reference internal" href="#change-password">Change password</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reset-user-s-password">Reset user’s password</a></li>
<li class="toctree-l4"><a class="reference internal" href="#change-user-s-email">Change user’s email</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#expropriate-a-user">Expropriate a user</a></li>
<li class="toctree-l5"><a class="reference internal" href="#user-visible-datasets">User Visible datasets</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-variable.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-version.html">Versions</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-xlsx.html">Xlsx</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../object-reference/object-reference.html">Object Reference</a></li>
</ul>
</ul><ul class="toc-footer">
  <li><a href="http://crunch.io/">Sign Up</a></li>
</ul>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="users">
<h1>Users<a class="headerlink" href="#users" title="Permalink to this headline"> 🔗</a></h1>
<div class="section" id="catalog">
<h2>Catalog<a class="headerlink" href="#catalog" title="Permalink to this headline"> 🔗</a></h2>
<p><code class="docutils literal"><span class="pre">/users/{?email,id}</span></code></p>
<p>A successful GET on this resource returns a Shoji Catalog whose “index”
URL’s refer to User objects. If the “email” or “id” parameters are
provided, the result is narrowed to Users matching those parameters.</p>
<p>This method only supports GET requests. To add users they need to be
added from each account users’ catalog. This endpoint ensures that the
new users belong to an account and get an invitation accordingly.</p>
</div>
<div class="section" id="entity">
<h2>Entity<a class="headerlink" href="#entity" title="Permalink to this headline"> 🔗</a></h2>
<p><code class="docutils literal"><span class="pre">/users/{id}/{?reason_url}</span></code></p>
<p>A Shoji Entity with the following body members:</p>
<ul class="simple">
<li>name</li>
<li>id</li>
<li>email</li>
<li>id_method (optional)</li>
<li>id_provider (optional, and only if id_method == ‘oauth’)</li>
</ul>
<p>The id_method member can be one of {‘oauth’, ‘pwhash’}. If not present,
‘pwhash’ is assumed.</p>
<p>The authenticated user can only access another user’s entity endpoint IF
any of the following are true:</p>
<ul class="simple">
<li>Both belong to the same account</li>
<li>They are both members of a common team</li>
<li>Authenticated user is account admin and viewed user is collaborator
on such account</li>
</ul>
<p>A user themselves or with “alter_users” account permission can PUT new
attributes via a JSON-like request body. A 200 indicates success.</p>
<div class="section" id="send-invitation-email">
<h3>Send invitation email<a class="headerlink" href="#send-invitation-email" title="Permalink to this headline"> 🔗</a></h3>
<p><code class="docutils literal"><span class="pre">/users/{id}/invite/</span></code></p>
<p>A POST to this resource sends an invitation from the current user to the
identified User. A 204 indicates success. The current user must have
“can_alter_users” account permission or 403 is returned instead.</p>
<p>If a “url_base” parameter is included in the request body, it will be
used to form links inside the invitation.</p>
</div>
<div class="section" id="change-password">
<h3>Change password<a class="headerlink" href="#change-password" title="Permalink to this headline"> 🔗</a></h3>
<p><code class="docutils literal"><span class="pre">/users/{id}/password/</span></code></p>
<p>A POST on this resource must consist of a JSON object with the members
“old_pw” and “new_pw”. A 204 indicates success, a 400 indicates
failure.</p>
<aside class="notice"><div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Please</span> <span class="n">refer</span> <span class="n">to</span> <span class="n">the</span> <span class="p">[</span><span class="n">password</span> <span class="n">policy</span><span class="p">](</span><span class="c1">#Password-policy) for information on</span>
<span class="n">what</span> <span class="n">the</span> <span class="n">requirements</span> <span class="n">are</span> <span class="k">for</span> <span class="n">a</span> <span class="n">password</span><span class="o">.</span>
</pre></div>
</div>
</aside></div>
<div class="section" id="reset-user-s-password">
<h3>Reset user’s password<a class="headerlink" href="#reset-user-s-password" title="Permalink to this headline"> 🔗</a></h3>
<p><code class="docutils literal"><span class="pre">/users/{id}/password_reset/</span></code></p>
<p>A GET on this resource always returns 204. A POST will send a reset
password notification to the identified user. A 204 indicates success.</p>
<p>If a “url_base” parameter is included in the request body, it will be
used to form links inside the notification.</p>
</div>
<div class="section" id="change-user-s-email">
<h3>Change user’s email<a class="headerlink" href="#change-user-s-email" title="Permalink to this headline"> 🔗</a></h3>
<p><code class="docutils literal"><span class="pre">/users/{id}/change_email/</span></code></p>
<p>A POST on this resource must consist of a JSON object with the members
“pw” and “email”. A 204 indicates potential success to change the users
email address to the newly provided email. The user should check their
email and verify they own the email address in question.</p>
<p>If the password does not match the users current password they will
receive an error message (400 Bad Request). If the user is an oauth
account, then the email address may not be changed (409 Conflict).</p>
<p>If the user ID does not match the current signed in user, an 403
Forbidden will be sent back.</p>
<div class="section" id="expropriate-a-user">
<h4>Expropriate a user<a class="headerlink" href="#expropriate-a-user" title="Permalink to this headline"> 🔗</a></h4>
<p>An account admin can expropriate a user from the same account. This will
change ownership of all of the affected user’s teams, projects and
datasets to a new owner.</p>
<p>The new owner must also be part of the same account and should have
<code class="docutils literal"><span class="pre">create_datasets</span></code> permissions set to <code class="docutils literal"><span class="pre">true</span></code>.</p>
<p><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/users/{id}/expropriate/</span></code></p>
<div class="tabbable">
<ul class="nav nav-tabs simple">
<li class="disabled"><a class="disabled">Language-specific info:</a></li>
<li class="active"><a data-toggle="tab" href="#14e481a16c50_JSON">JSON</a></li>
</ul>
<div class="tab-content section">
<div class="tab-pane active section" id="14e481a16c50_JSON">
<div class="code json highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;shoji:entity&quot;</span><span class="p">,</span>
  <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="s2">&quot;owner&quot;</span><span class="p">:</span> <span class="s2">&quot;http://app.crunch.io/api/users/123abc/&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div><p>The new owner provided can be a user URL or a user email. ##### User
Datasets</p>
<p><code class="docutils literal"><span class="pre">/account/users/{id}/datasets/</span></code></p>
<p>This URL is only accessible and available to account admins.</p>
<p>This Shoji catalog lists all the datasets that are owned by this user.</p>
</div>
<div class="section" id="user-visible-datasets">
<h4>User Visible datasets<a class="headerlink" href="#user-visible-datasets" title="Permalink to this headline"> 🔗</a></h4>
<p><code class="docutils literal"><span class="pre">/users/{id}/visible_datasets/</span></code></p>
<p>This endpoint is only available and accessible to account admins.</p>
<p>Returns a Shoji catalog listing all the datasets (archived or not) that
a any user has access to, either via direct share, via team access or
project membership.</p>
<div class="tabbable">
<ul class="nav nav-tabs simple">
<li class="disabled"><a class="disabled">Language-specific info:</a></li>
<li class="active"><a data-toggle="tab" href="#14e4815d4208_JSON">JSON</a></li>
</ul>
<div class="tab-content section">
<div class="tab-pane active section" id="14e4815d4208_JSON">
<div class="code json highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;https://app.crunch.io/api/datasets/wsx345/&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;survey data&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_access_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2017-02-25&quot;</span><span class="p">,</span>
        <span class="s2">&quot;access_type&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;teams&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;https://app.crunch.io/api/teams/abx/&quot;</span><span class="p">],</span>
            <span class="s2">&quot;project&quot;</span><span class="p">:</span> <span class="s2">&quot;https://app.crunch.io/api/projects/qwe/&quot;</span><span class="p">,</span>
            <span class="s2">&quot;direct&quot;</span><span class="p">:</span> <span class="n">true</span>
        <span class="p">},</span>
        <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;edit&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
          <span class="s2">&quot;view&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
          <span class="s2">&quot;change_permissions&quot;</span><span class="p">:</span> <span class="n">true</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;https://app.crunch.io/api/datasets/a2c4b2/&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;responses dataset&quot;</span><span class="p">,</span>
        <span class="s2">&quot;last_access_time&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-11-09&quot;</span><span class="p">,</span>
        <span class="s2">&quot;access_type&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;teams&quot;</span><span class="p">:</span> <span class="p">[],</span>
            <span class="s2">&quot;project&quot;</span><span class="p">:</span> <span class="n">null</span><span class="p">,</span>
            <span class="s2">&quot;direct&quot;</span><span class="p">:</span> <span class="n">true</span>
        <span class="p">},</span>
        <span class="s2">&quot;permissions&quot;</span><span class="p">:</span> <span class="p">{</span>
          <span class="s2">&quot;edit&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
          <span class="s2">&quot;view&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
          <span class="s2">&quot;change_permissions&quot;</span><span class="p">:</span> <span class="n">false</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div><p>The tuples contain information of the type of access the user has to
each dataset via the <code class="docutils literal"><span class="pre">access_type</span></code> attribute. It includes:</p>
<ul class="simple">
<li>The list of teams that provide access to this dataset</li>
<li>The project that provides access to this dataset or null</li>
<li>If the user has a direct share to this dataset</li>
</ul>
<p>The <code class="docutils literal"><span class="pre">permissions</span></code> attribute indicates the final coalesced permissions
this user enjoys on the given dataset.</p>
</div>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, Crunch.io.<br/>
      Last updated on Apr 30, 2018.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>