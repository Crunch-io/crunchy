<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Variable Folders &#8212; API Docs 0.4.1 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/crunch.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/crunch.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Geodata" href="endpoint-geodata.html" />
    <link rel="prev" title="Filters" href="endpoint-filter.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/logo.svg"></span>
          API Docs</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            

    <li><a href="http://status.crunch.io/">Status</a></li>


            
              
                
  <li>
    <a href="endpoint-filter.html" title="Previous Chapter: Filters"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Filters</span>
    </a>
  </li>
  <li>
    <a href="endpoint-geodata.html" title="Next Chapter: Geodata"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Geodata &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form><ul class="sidebar-toc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../feature-guide/index.html">Feature Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Endpoint Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="endpoint-public.html">Public</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-account.html">Accounts</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-batch.html">Batches</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-boxdata.html">Boxdata</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-comparison.html">Comparisons</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-dataset.html">Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-deck.html">Decks</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-deck.html#slides">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-deck.html#analysis">Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-filter.html">Filters</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Variable Folders</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#basic-concepts">Basic concepts</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#root">Root</a></li>
<li class="toctree-l2"><a class="reference internal" href="#subfolder-endpoint">Subfolder endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="#folder-payload">Folder payload</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-folders">Creating folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="#moving-folders-and-variables">Moving folders and variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reordering-a-folder-s-contents">Reordering a folder‚Äôs contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="#deleting-folders">Deleting folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="#trash">Trash</a></li>
<li class="toctree-l2"><a class="reference internal" href="#hidden">Hidden</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-geodata.html">Geodata</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-join.html">Joins</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-multitable.html">Multitables</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-permission.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-progress.html">Progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-projects.html">Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-search.html">Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-source.html">Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-tabbook.html">Tab books</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-table.html">Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-team.html">Teams</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-user.html">Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-variable.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-version.html">Versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../object-reference/object-reference.html">Object Reference</a></li>
</ul>
</ul><ul class="toc-footer">
  <li><a href="http://crunch.io/">Sign Up</a></li>
</ul>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="variable-folders">
<span id="endpoint-folders"></span><h1>Variable Folders<a class="headerlink" href="#variable-folders" title="Permalink to this headline"> üîó</a></h1>
<p>In order to organize a large number of variables in a dataset, Crunch
provides a hierarchical structure to group variables called ‚ÄúFolders‚Äù.</p>
<p>Much like the variable hierarchical order, folders allow you to have
nested folders containing dataset variables. Unlike the hierarchical
order, a variable can only exist in one folder at the time.</p>
<div class="section" id="basic-concepts">
<h2>Basic concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this headline"> üîó</a></h2>
<p>There are a number of system folders that exist with every dataset created.
These system folders cannot be renamed, moved or deleted.</p>
<ul class="simple">
<li><strong>Root folder</strong>: The root folder is the top level folder where all other subfolders will be created by dataset editors. All the variables and subfolders here will be publicly accessible for all users with access to the dataset. It is only possible to place public variables under this tree.</li>
<li><strong>Hidden variables folder</strong>: This folder is a parallel top level folder separate from the root folder, which allows dataset editors to hide variables out of the public Root folder. This tree structure is only accessible for dataset editors.</li>
<li><strong>Variables can only be in one folder</strong>: Variables can be in any of the top level system folders or in any subfolder of them at any given time, but they can never be in two folders at the same time.</li>
</ul>
</div>
</div>
<div class="section" id="root">
<h1>Root<a class="headerlink" href="#root" title="Permalink to this headline"> üîó</a></h1>
<p><code class="docutils literal"><span class="pre">/datasets/{id}/folders/</span></code></p>
<p>Returns a Shoji catalog containing the root folder of the hierarchy.</p>
<p>When a dataset is created without an order specified, there will not
yet be any folders associated with it, so the root folder will only
contain a flat list of all existing dataset variables.</p>
<p>As variables get grouped into folders, the root folder will continue
showing any ungrouped variables in addition to the top-level folders.</p>
</div>
<div class="section" id="subfolder-endpoint">
<h1>Subfolder endpoint<a class="headerlink" href="#subfolder-endpoint" title="Permalink to this headline"> üîó</a></h1>
<p><code class="docutils literal"><span class="pre">/datasets/{id}/folders/{folder_id}/</span></code></p>
<p>All subfolder URLs follow straight from the root folder URL regardless
of their nested location in the variable folders tree.</p>
</div>
<div class="section" id="folder-payload">
<h1>Folder payload<a class="headerlink" href="#folder-payload" title="Permalink to this headline"> üîó</a></h1>
<p>All folders types return a similar Shoji catalog with the following members:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="9%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Member</th>
<th class="head">Type</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>size</td>
<td>int</td>
<td>Indicates the number of total variables stored under this
folder and its subfolders.</td>
</tr>
<tr class="row-odd"><td>body</td>
<td>object</td>
<td>Contains a <cite>name</cite> attribute, which is the folder‚Äôs name.
The root folder has an empty string as name.</td>
</tr>
<tr class="row-even"><td>index</td>
<td>object</td>
<td>Behaves like a standard Shoji catalog containing the children
of the folder keyed by URL. This catalog will contain a mixed
set of folder and variables URLs. Clients should differentiate
each of the objects by looking at the tuple‚Äôs <cite>type</cite> attribute.
Folders will have type ‚Äúfolder‚Äù while variables will contain
their variables type.</td>
</tr>
<tr class="row-odd"><td>graph</td>
<td>list</td>
<td>A flat list containing the list of URLs of variables and
subfolders on the given folder.</td>
</tr>
</tbody>
</table>
<p>JSON example:</p>
<div class="tabbable">
<ul class="nav nav-tabs simple">
<li class="disabled"><a class="disabled">Language-specific info:</a></li>
<li class="active"><a data-toggle="tab" href="#14f5e370f160_JSON">JSON</a></li>
</ul>
<div class="tab-content section">
<div class="tab-pane active section" id="14f5e370f160_JSON">
<div class="code json highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;shoji:catalog&quot;</span><span class="p">,</span>
    <span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;https://app.crunch.io/api/datasets/5ee0a0/folders/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;size&quot;</span><span class="p">:</span> <span class="mi">10000</span><span class="p">,</span>
    <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Folder name&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;https://app.crunch.io/datasets/abcdef/variables/123/&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Birth Year&quot;</span><span class="p">,</span>
            <span class="s2">&quot;derived&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;discarded&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;alias&quot;</span><span class="p">:</span> <span class="s2">&quot;birthyear&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;numeric&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">,</span>
            <span class="s2">&quot;notes&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;In what year were you born?&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;https://app.crunch.io/datasets/abcdef/folders/qwe/&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;folder&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Subfolder name&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;https://app.crunch.io/datasets/abcdef/variables/456/&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;subvariables_catalog&quot;</span><span class="p">:</span> <span class="s2">&quot;../variables/456/subvariables/&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;An Array&quot;</span><span class="p">,</span>
            <span class="s2">&quot;derived&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">,</span>
            <span class="s2">&quot;discarded&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;alias&quot;</span><span class="p">:</span> <span class="s2">&quot;arrayvar&quot;</span><span class="p">,</span>
            <span class="s2">&quot;subvariables&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;../../variables/456/subvariables/439dcf/&quot;</span><span class="p">,</span>
                <span class="s2">&quot;../../variables/456/subvariables/1c99ea/&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;notes&quot;</span><span class="p">:</span> <span class="s2">&quot;All variable types can have notes&quot;</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;categorical_array&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;456&quot;</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;&quot;</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="s2">&quot;graph&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="s2">&quot;../variables/456/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;../variables/123/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;../folders/qwe/&quot;</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div></div>
<div class="section" id="creating-folders">
<h1>Creating folders<a class="headerlink" href="#creating-folders" title="Permalink to this headline"> üîó</a></h1>
<p>To create a subfolder, clients must POST to the target folder (which will be the
parent of the new subfolder).</p>
<p>The payload must contain a <cite>body</cite> member which indicates only the name of
the subfolder. Note that subfolder names must be unique between them and
variables included.</p>
<p>Additionally an <cite>index</cite> member can be included that must contain URLs of the
variables that will be children of the new folder. The tuples associated with
each variable should be an empty object.</p>
<p>In case the variables mentioned belong in other folders, they will be moved
into this newly created one.</p>
<p>Additionally an optional <cite>graph</cite> member is allowed always that an <cite>index</cite>
member is included. The graph should contain all the items that the index
contains.</p>
<div class="tabbable">
<ul class="nav nav-tabs simple">
<li class="disabled"><a class="disabled">Language-specific info:</a></li>
<li class="active"><a data-toggle="tab" href="#14f5e30a7278_JSON">JSON</a></li>
</ul>
<div class="tab-content section">
<div class="tab-pane active section" id="14f5e30a7278_JSON">
<div class="code json highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
   <span class="s2">&quot;entity&quot;</span><span class="p">:</span> <span class="s2">&quot;shoji:catalog&quot;</span><span class="p">,</span>
   <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;New subfolder name&quot;</span>
   <span class="p">},</span>
   <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="p">{</span>
      <span class="s2">&quot;http://app.crunch.io/api/datasets/abc/variables/123/&quot;</span><span class="p">:</span> <span class="p">{},</span>
      <span class="s2">&quot;http://app.crunch.io/api/datasets/abc/variables/456/&quot;</span><span class="p">:</span> <span class="p">{}</span>
   <span class="p">},</span>
   <span class="s2">&quot;graph&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;http://app.crunch.io/api/datasets/abc/variables/123/&quot;</span><span class="p">,</span>
      <span class="s2">&quot;http://app.crunch.io/api/datasets/abc/variables/456/&quot;</span>
   <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div></div>
<div class="section" id="moving-folders-and-variables">
<h1>Moving folders and variables<a class="headerlink" href="#moving-folders-and-variables" title="Permalink to this headline"> üîó</a></h1>
<p>In order to move folders or variables from one location to another, their URL
must be included in the <cite>index</cite> catalog sent via a PATCH request to the
destination folder.</p>
<p>The new elements will be moved out of their existing parents into the new folder
location.</p>
<p>Inside a folder, subfolders and variables must be unique by name. Trying to
move a folder or a variable that conflicts with the existing children of it,
will return a 409 response from the server.</p>
</div>
<div class="section" id="reordering-a-folder-s-contents">
<h1>Reordering a folder‚Äôs contents<a class="headerlink" href="#reordering-a-folder-s-contents" title="Permalink to this headline"> üîó</a></h1>
<p>To reorder the elements inside a folder, it‚Äôs necessary to make a PATCH request
to the folder‚Äôs endpoint containing the list with the elements from the index
in the desired order.</p>
<p>The list must be a flat list and all the elements must be URLs that currently
exist in the catalog‚Äôs index. New elements cannot be included just by adding
them on the <cite>graph</cite>.</p>
</div>
<div class="section" id="deleting-folders">
<h1>Deleting folders<a class="headerlink" href="#deleting-folders" title="Permalink to this headline"> üîó</a></h1>
<p>Subfolders can be deleted by performing a DELETE request on their endpoints.
It will effectively move the folder to the trash folder.</p>
<p>When deleting a folder, all the children will also be moved to the trash
folder including the variables that were part of it.</p>
<p>Moving a folder to the trash does <strong>not</strong> delete variables nor their data,
but only makes them unavailable from the folder hierarchy.</p>
<p>Deleting a folder that is already in the trash <strong>does</strong> hard-delete that
folder, including all variables &amp; related data contained in that folder.</p>
</div>
<div class="section" id="trash">
<h1>Trash<a class="headerlink" href="#trash" title="Permalink to this headline"> üîó</a></h1>
<p><code class="docutils literal"><span class="pre">/datasets/{id}/folders/trash/</span></code></p>
<p>The trash folder is a special-purpose folder that lives outside the
regular variable folders tree.</p>
<p>You can use the trash folder to ‚Äúsoft-delete‚Äù variables and folders.</p>
<p>Subfolders and variables inside the trash folder are only visible to
dataset editors.</p>
<p>Performing a DELETE request to the trash endpoint will empty all items
from the trash, hard-deleting the folders, variables, and related data.</p>
<p>Items in the trash folder may also be automatically hard-deleted after
24-48 hours.</p>
</div>
<div class="section" id="hidden">
<h1>Hidden<a class="headerlink" href="#hidden" title="Permalink to this headline"> üîó</a></h1>
<p><code class="docutils literal"><span class="pre">/datasets/{id}/folders/hidden/</span></code></p>
<p>The hidden folder is a special-purpose folder that lives outside the
regular variable folders tree.</p>
<p>Variables and subfolders that should only be visible to dataset editors
should be placed in the hidden folder.</p>
<p>Hidden folder membership will eventually replace the deprecated
<code class="docutils literal"><span class="pre">discarded</span></code> attribute on a variable.</p>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, Crunch.io.<br/>
      Last updated on May 29, 2018.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>