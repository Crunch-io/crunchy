<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Multitables &#8212; API Docs 0.4.1 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/crunch.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/crunch.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Permissions" href="endpoint-permission.html" />
    <link rel="prev" title="Joins" href="endpoint-join.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/logo.svg"></span>
          API Docs</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            

    <li><a href="http://status.crunch.io/">Status</a></li>


            
              
                
  <li>
    <a href="endpoint-join.html" title="Previous Chapter: Joins"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Joins</span>
    </a>
  </li>
  <li>
    <a href="endpoint-permission.html" title="Next Chapter: Permissions"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Permissions &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form><ul class="sidebar-toc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../feature-guide/index.html">Feature Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Endpoint Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="endpoint-public.html">Public</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-account.html">Accounts</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-batch.html">Batches</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-boxdata.html">Boxdata</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-comparison.html">Comparisons</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-dataset.html">Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-deck.html">Decks</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-deck.html#slides">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-deck.html#analysis">Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-filter.html">Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html">Variable Folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#root">Root</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#subfolder-endpoint">Subfolder endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#folder-payload">Folder payload</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#creating-folders">Creating folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#moving-folders-and-variables">Moving folders and variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#reordering-a-folder-s-contents">Reordering a folder’s contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#deleting-folders">Deleting folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#trash">Trash</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#hidden">Hidden</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-geodata.html">Geodata</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-join.html">Joins</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Multitables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#catalog">Catalog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#get">GET</a></li>
<li class="toctree-l4"><a class="reference internal" href="#post">POST</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#copying-multitables-between-datasets">Copying Multitables between datasets</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="#patch">PATCH</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#entity">Entity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">GET</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">PATCH</a></li>
<li class="toctree-l4"><a class="reference internal" href="#views">Views</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-permission.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-progress.html">Progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-projects.html">Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-search.html">Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-source.html">Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-tabbook.html">Tab books</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-table.html">Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-team.html">Teams</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-user.html">Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-variable.html">Variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-version.html">Versions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../object-reference/object-reference.html">Object Reference</a></li>
</ul>
</ul><ul class="toc-footer">
  <li><a href="http://crunch.io/">Sign Up</a></li>
</ul>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="multitables">
<h1>Multitables<a class="headerlink" href="#multitables" title="Permalink to this headline"> 🔗</a></h1>
<div class="section" id="catalog">
<h2>Catalog<a class="headerlink" href="#catalog" title="Permalink to this headline"> 🔗</a></h2>
<p><code class="docutils literal"><span class="pre">/datasets/{dataset_id}/multitables/</span></code></p>
<div class="section" id="get">
<span id="multitables-catalog-get"></span><h3>GET<a class="headerlink" href="#get" title="Permalink to this headline"> 🔗</a></h3>
<div class="tabbable">
<ul class="nav nav-tabs simple">
<li class="disabled"><a class="disabled">Language-specific info:</a></li>
<li class="active"><a data-toggle="tab" href="#14b37fd612b0_JSON">JSON</a></li>
</ul>
<div class="tab-content section">
<div class="tab-pane active section" id="14b37fd612b0_JSON">
<div class="code json highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;shoji:catalog&quot;</span><span class="p">,</span>
    <span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/datasets/123/multitables/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;specification&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/specifications/multitables/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;List of multitable definitions for this dataset&quot;</span><span class="p">,</span>
    <span class="s2">&quot;index&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;/api/datasets/123/multitables/7ab1e/&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;is_public&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
            <span class="s2">&quot;owner_id&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/users/b055/&quot;</span><span class="p">,</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Basic Demographics&quot;</span><span class="p">,</span>
            <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;7ab1e&quot;</span><span class="p">,</span>
            <span class="s2">&quot;team&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/teams/56789/&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div><p>GET on this resource returns a Shoji Catalog with the list of
Multitables that the current user can use on this Dataset.</p>
<p>This index contains two kinds of multitables: those that belong to the
dataset, denoted by the <code class="docutils literal"><span class="pre">is_public</span></code> tuple attribute; and those that
belong to the current user. Personal multitables are those created by
the authenticated user, and they cannot be accessed by other users.
Dataset multitables are available to all users who are authorized to
view the dataset.</p>
</div>
<div class="section" id="post">
<h3>POST<a class="headerlink" href="#post" title="Permalink to this headline"> 🔗</a></h3>
<p>POST a Shoji Entity to this catalog to create a new multitable
definition. Entities must include a <code class="docutils literal"><span class="pre">name</span></code> and <code class="docutils literal"><span class="pre">template</span></code>; the
<a class="reference internal" href="../feature-guide/feature-analyzing.html#template-query"><span class="std std-ref">template</span></a> must contain a series of objects with a
<code class="docutils literal"><span class="pre">query</span></code> and optionally <code class="docutils literal"><span class="pre">transform</span></code> (see <a class="reference internal" href="../feature-guide/feature-analyzing.html#transforming-analyses-for-presentation"><span class="std std-ref">Transforming analyses for
presentation</span></a>). If omitted,
<code class="docutils literal"><span class="pre">is_public</span></code> defaults to <code class="docutils literal"><span class="pre">false</span></code>. In similar fashion, <code class="docutils literal"><span class="pre">team</span></code> will
default to <code class="docutils literal"><span class="pre">null</span></code> unless a specific team URL is provided.</p>
<p>A successful POST yields a 201 response that will contain a Location
header with the URL of the newly created multitable.</p>
<p>All users with access to the dataset can create personal multitable
definitions; however, only the current dataset editor can create public
multitables (<code class="docutils literal"><span class="pre">is_public:</span> <span class="pre">true</span></code>) which everyone with access to the
dataset can see. Attempting to create a public multitable when not the
current dataset editor results in a 403 response.</p>
<div class="section" id="copying-multitables-between-datasets">
<h4>Copying Multitables between datasets<a class="headerlink" href="#copying-multitables-between-datasets" title="Permalink to this headline"> 🔗</a></h4>
<p>It is possible to copy over a multitables between datasets as long as
the permissions allow it.</p>
<p>Multitable copying requires that all the variables present in the
<code class="docutils literal"><span class="pre">template</span></code> of the origin multitable exist on the target dataset and
that they all have the same type. Copied multitables will be private by
default.</p>
<p>POST a shoji entity to the catalog with indicating the URL of the
multitable to copy:</p>
<div class="tabbable">
<ul class="nav nav-tabs simple">
<li class="disabled"><a class="disabled">Language-specific info:</a></li>
<li class="active"><a data-toggle="tab" href="#14b37fd57240_JSON">JSON</a></li>
</ul>
<div class="tab-content section">
<div class="tab-pane active section" id="14b37fd57240_JSON">
<div class="code json highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;shoji:entity&quot;</span><span class="p">,</span>
    <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Name of my copy&quot;</span><span class="p">,</span>
        <span class="s2">&quot;multitable&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/datasets/123/multitables/7ab1e/&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div><p>As shown in the example, it is possible to assign a new name to the
copy. By default all copies will be private unless specified in the
body.</p>
</div>
</div>
<div class="section" id="patch">
<h3>PATCH<a class="headerlink" href="#patch" title="Permalink to this headline"> 🔗</a></h3>
<p>There are no elements of the catalog that can be changed via PATCH.</p>
</div>
</div>
<div class="section" id="entity">
<h2>Entity<a class="headerlink" href="#entity" title="Permalink to this headline"> 🔗</a></h2>
<p><code class="docutils literal"><span class="pre">/datasets/{dataset_id}/multitables/{multitable_id}/</span></code></p>
<div class="section" id="id1">
<h3>GET<a class="headerlink" href="#id1" title="Permalink to this headline"> 🔗</a></h3>
<div class="tabbable">
<ul class="nav nav-tabs simple">
<li class="disabled"><a class="disabled">Language-specific info:</a></li>
<li class="active"><a data-toggle="tab" href="#14b37f96f710_JSON">JSON</a></li>
</ul>
<div class="tab-content section">
<div class="tab-pane active section" id="14b37f96f710_JSON">
<div class="code json highlight-default"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;element&quot;</span><span class="p">:</span> <span class="s2">&quot;shoji:entity&quot;</span><span class="p">,</span>
    <span class="s2">&quot;self&quot;</span><span class="p">:</span> <span class="s2">&quot;datasets/123/multitables/7ab1e/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;views&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;tabbook&quot;</span><span class="p">:</span> <span class="s2">&quot;/datasets/123/multitables/7ab1e/tabbook/&quot;</span>
    <span class="p">},</span>
    <span class="s2">&quot;specification&quot;</span><span class="p">:</span> <span class="s2">&quot;https://app.crunch.io/api/specifications/multitables/&quot;</span><span class="p">,</span>
    <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Detail information for one multitable definition&quot;</span><span class="p">,</span>
    <span class="s2">&quot;body&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Basic Demographics&quot;</span><span class="p">,</span>
        <span class="s2">&quot;user&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/users/b055/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;template&quot;</span><span class="p">:</span> <span class="p">[{</span>
            <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="s2">&quot;/datasets/123/variables/abc/&quot;</span>
            <span class="p">}]</span>
        <span class="p">},</span> <span class="p">{</span>
            <span class="s2">&quot;query&quot;</span><span class="p">:</span> <span class="p">[{</span>
                <span class="s2">&quot;variable&quot;</span><span class="p">:</span> <span class="s2">&quot;/datasets/123/variables/def/&quot;</span>
            <span class="p">}]</span>
        <span class="p">}],</span>
        <span class="s2">&quot;is_public&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">,</span>
        <span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;7ab1e&quot;</span><span class="p">,</span>
        <span class="s2">&quot;team&quot;</span><span class="p">:</span> <span class="s2">&quot;/api/teams/56789/&quot;</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
</div><p>GET on this resource returns a Shoji entity containing the requested
multitable definition.</p>
</div>
<div class="section" id="id2">
<h3>PATCH<a class="headerlink" href="#id2" title="Permalink to this headline"> 🔗</a></h3>
<p>PATCH the entity to edit its <code class="docutils literal"><span class="pre">name</span></code>, <code class="docutils literal"><span class="pre">template</span></code>, <code class="docutils literal"><span class="pre">team</span></code> or
<code class="docutils literal"><span class="pre">is_public</span></code> attributes. Successful PATCH requests return 204 status.
As with the POSTing new entities to the catalog, only the dataset’s
current editor can alter <code class="docutils literal"><span class="pre">is_public</span></code>.</p>
<p>The <code class="docutils literal"><span class="pre">template</span></code> attribute must contain a valid multitable definition.</p>
</div>
<div class="section" id="views">
<h3>Views<a class="headerlink" href="#views" title="Permalink to this headline"> 🔗</a></h3>
<p>Multitable entities have a “tabbook” view. See the <a class="reference internal" href="endpoint-tabbook.html"><span class="doc">tabbook endpoint
reference</span></a>.</p>
</div>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, Crunch.io.<br/>
      Last updated on May 08, 2018.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>