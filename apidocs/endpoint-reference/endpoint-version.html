<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Versions &#8212; API Docs 0.4.1 documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/crunch.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.4.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/crunch.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Object Reference" href="../object-reference/object-reference.html" />
    <link rel="prev" title="Variables" href="endpoint-variable.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default ">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html"><span><img src="../_static/logo.svg"></span>
          API Docs</a>
        <span class="navbar-text navbar-version pull-left"><b>0.4.1</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            

    <li><a href="http://status.crunch.io/">Status</a></li>


            
              
                
  <li>
    <a href="endpoint-variable.html" title="Previous Chapter: Variables"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Variables</span>
    </a>
  </li>
  <li>
    <a href="../object-reference/object-reference.html" title="Next Chapter: Object Reference"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Object Reference &raquo;</span>
    </a>
  </li>
              
            
            
            
            
              <li class="hidden-sm"></li>
            
          </ul>

          

        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary">
<form action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form><ul class="sidebar-toc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../feature-guide/index.html">Feature Guide</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Endpoint Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="endpoint-public.html">Public</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-account.html">Accounts</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-batch.html">Batches</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-boxdata.html">Boxdata</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-comparison.html">Comparisons</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-dataset.html">Datasets</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-deck.html">Decks</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-deck.html#slides">Slides</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-deck.html#analysis">Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-filter.html">Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html">Variable Folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#root">Root</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#subfolder-endpoint">Subfolder endpoint</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#folder-payload">Folder payload</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#creating-folders">Creating folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#moving-folders-and-variables">Moving folders and variables</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#reordering-a-folder-s-contents">Reordering a folderâ€™s contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#deleting-folders">Deleting folders</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#trash">Trash</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-folders.html#hidden">Hidden</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-geodata.html">Geodata</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-join.html">Joins</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-multitable.html">Multitables</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-permission.html">Permissions</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-progress.html">Progress</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-projects.html">Projects</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-search.html">Search</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-source.html">Sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-tabbook.html">Tab books</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-table.html">Table</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-team.html">Teams</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-user.html">Users</a></li>
<li class="toctree-l2"><a class="reference internal" href="endpoint-variable.html">Variables</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Versions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#catalog">Catalog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#get">GET</a></li>
<li class="toctree-l4"><a class="reference internal" href="#post">POST</a></li>
<li class="toctree-l4"><a class="reference internal" href="#patch">PATCH</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#entity">Entity</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id1">GET</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id2">PATCH</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#reverting">Reverting</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../object-reference/object-reference.html">Object Reference</a></li>
</ul>
</ul><ul class="toc-footer">
  <li><a href="http://crunch.io/">Sign Up</a></li>
</ul>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="versions">
<h1>Versions<a class="headerlink" href="#versions" title="Permalink to this headline"> ğŸ”—</a></h1>
<p>Datasets have a collection of versions, points in time to which you can
roll back.</p>
<div class="section" id="catalog">
<h2>Catalog<a class="headerlink" href="#catalog" title="Permalink to this headline"> ğŸ”—</a></h2>
<div class="section" id="get">
<h3>GET<a class="headerlink" href="#get" title="Permalink to this headline"> ğŸ”—</a></h3>
<p><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/datasets/{dataset_id}/savepoints/?limit,offset</span></code></p>
<p>When authenticated, GET returns 200 status with a (paginated) Shoji
Catalog of versions to which the dataset can be reverted. Catalog tuples
contain the following attributes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="11%" />
<col width="9%" />
<col width="58%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>user_display_name</td>
<td>string</td>
<td>â€œâ€</td>
<td>The name of the user who saved this version</td>
</tr>
<tr class="row-odd"><td>description</td>
<td>string</td>
<td>&#160;</td>
<td>An informative note about the version, as in
a commit message</td>
</tr>
<tr class="row-even"><td>version</td>
<td>string</td>
<td>&#160;</td>
<td>An internal identifier for the saved version</td>
</tr>
<tr class="row-odd"><td>creation_time</td>
<td>datetime</td>
<td>&#160;</td>
<td>Timestamp for when the version was created</td>
</tr>
<tr class="row-even"><td>last_update</td>
<td>datetime</td>
<td>&#160;</td>
<td>Timestamp for when the version was last
updated</td>
</tr>
<tr class="row-odd"><td>revert</td>
<td>url</td>
<td>&#160;</td>
<td>URL to POST to in order to roll back to this
version; see below</td>
</tr>
</tbody>
</table>
<p>Query parameters:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="11%" />
<col width="11%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>limit</td>
<td>integer</td>
<td>1000</td>
<td>How many versions to include in the catalog response</td>
</tr>
<tr class="row-odd"><td>offset</td>
<td>integer</td>
<td>0</td>
<td>How many versions to skip before returning <code class="docutils literal"><span class="pre">limit</span></code> versions</td>
</tr>
</tbody>
</table>
<p>For pagination purposes, catalog tuples are sorted from most to least
recent. However, since JSON objects are unordered, you cannot rely on
the order of the tuples within the payload you receive.</p>
</div>
<div class="section" id="post">
<h3>POST<a class="headerlink" href="#post" title="Permalink to this headline"> ğŸ”—</a></h3>
<p><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/datasets/{dataset_id}/savepoints/</span></code></p>
<p>To create a new version, POST a JSON object to the versions catalog.
Object attributes may contain:</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="8%" />
<col width="11%" />
<col width="67%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Required</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>description</td>
<td>string</td>
<td>No</td>
<td>An informative note about the version, as in a
commit message</td>
</tr>
</tbody>
</table>
<p>A successful POST will return 201 status with the URL of the newly
created version entity in the Location header. If the current user is
not an editor of the dataset, POSTing will return a 403 status.</p>
</div>
<div class="section" id="patch">
<h3>PATCH<a class="headerlink" href="#patch" title="Permalink to this headline"> ğŸ”—</a></h3>
<p>No version attributes may be modified by PATCHing the catalog. PATCH
will return a 405 status.</p>
</div>
</div>
<div class="section" id="entity">
<h2>Entity<a class="headerlink" href="#entity" title="Permalink to this headline"> ğŸ”—</a></h2>
<div class="section" id="id1">
<h3>GET<a class="headerlink" href="#id1" title="Permalink to this headline"> ğŸ”—</a></h3>
<p><code class="docutils literal"><span class="pre">GET</span> <span class="pre">/datasets/{dataset_id}/savepoints/{version_id}/</span></code></p>
<p>Version entities expose a subset of attributes found in the catalog
tuples:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="8%" />
<col width="9%" />
<col width="61%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Type</th>
<th class="head">Default</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>user_display_name</td>
<td>string</td>
<td>â€œâ€</td>
<td>The name of the user who saved this version</td>
</tr>
<tr class="row-odd"><td>description</td>
<td>string</td>
<td>&#160;</td>
<td>An informative note about the version, as in a
commit message</td>
</tr>
<tr class="row-even"><td>version</td>
<td>string</td>
<td>&#160;</td>
<td>An internal identifier for the saved version</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id2">
<h3>PATCH<a class="headerlink" href="#id2" title="Permalink to this headline"> ğŸ”—</a></h3>
<p><code class="docutils literal"><span class="pre">PATCH</span> <span class="pre">/datasets/{dataset_id}/savepoints/{version_id}/</span></code></p>
<p>The versionâ€™s â€œdescriptionâ€ may be modified by PATCHing its entity. A
successful request returns 204 status. If the current user is not an
editor of the dataset, PATCHing will return a 403 status.</p>
</div>
</div>
<div class="section" id="reverting">
<h2>Reverting<a class="headerlink" href="#reverting" title="Permalink to this headline"> ğŸ”—</a></h2>
<p><code class="docutils literal"><span class="pre">POST</span> <span class="pre">/datasets/{dataset_id}/savepoints/{version_id}/revert/</span></code></p>
<p>To roll back to a saved version, POST an empty body to the versionâ€™s
â€œrevertâ€ URL, found both inside the catalog tuple and in the â€œviewsâ€
attribute of the entity. A successful request will return 204 status.</p>
<p>Reverting a dataset will not change its current ownership.</p>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2017, Crunch.io.<br/>
      Last updated on May 29, 2018.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.<br/>
    </p>
  </div>
</footer>
  </body>
</html>