<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crunch Deck Cookbook • Crunch</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Crunch Deck Cookbook">
<meta property="og:description" content="The crunch package makes it easy to save analyses in a scalable way. This cookbook shows you how to set the components of a slide so that you have exactly the analysis you want.">
<meta property="og:image" content="http://crunch.io/r/crunch/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-50332119-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-50332119-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Crunch</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.28.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/crunch.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    <li class="dropdown-header">Getting started</li>
    <li>
      <a href="../articles/variables.html">Crunch Variables</a>
    </li>
    <li>
      <a href="../articles/array-variables.html">Array Variables</a>
    </li>
    <li>
      <a href="../articles/variable-order.html">Variable Folders and Organization</a>
    </li>
    <li>
      <a href="../articles/projects.html">Organizing Datasets in Projects</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Exploring and analyzing</li>
    <li>
      <a href="../articles/derive.html">Adding Variables</a>
    </li>
    <li>
      <a href="../articles/analyze.html">Analyzing Crunch Data</a>
    </li>
    <li>
      <a href="../articles/filters.html">Filtering Data</a>
    </li>
    <li>
      <a href="../articles/subtotals.html">Subtotals and Headings</a>
    </li>
    <li>
      <a href="../articles/export.html">Exporting Data</a>
    </li>
    <li>
      <a href="../articles/fork-and-merge.html">Fork and Merge a Dataset</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Going deeper</li>
    <li>
      <a href="../articles/crunch-internals.html">Crunch Internals</a>
    </li>
    <li>
      <a href="../articles/abstract-categories.html">Abstract Categories</a>
    </li>
    <li class="divider">
    <li class="dropdown-header">Cookbooks</li>
    <li>
      <a href="../articles/deck-cookbook.html">Crunch Deck Cookbook</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Crunch-io/rcrunch/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="deck-cookbook_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Crunch Deck Cookbook</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Crunch-io/rcrunch/blob/master/vignettes/deck-cookbook.Rmd"><code>vignettes/deck-cookbook.Rmd</code></a></small>
      <div class="hidden name"><code>deck-cookbook.Rmd</code></div>

    </div>

    
    
<p>Decks are a way to save a set of analyses so that you or your team can refer back to them later, export to Excel or PowerPoint, or create a Crunch Dashboard. Each <em>deck</em> is made up of a set of <em>slides</em>, and each <em>slide</em> contains an <em>analysis</em> and optionally a <em>title</em> and <em>subtitle</em>.</p>
<p>While a good slide generally appears simple to the viewer, a lot depends on getting the analysis exactly right, and so creating them does require setting the analysis’s attributes just right. The attributes of a slide’s analysis are:</p>
<ul>
<li>
<strong>a query</strong>: A set of variables and what calculation to perform (such as a count or mean)</li>
<li>
<strong>the query environment</strong>: Modifiers to the data that the query is performed on, like a filter or weight to use.</li>
<li>
<strong>dimension transformations</strong>: A dimension is a set of items that the calculation is enumerated along (a table based on a categorical array could have the categories in the “rows” dimension and the subvariables in the “columns” dimension). Dimension transformations are modifications to how those dimensions are displayed, such as reordering, renaming or assigning colors.</li>
<li>
<strong>display settings and visual specifications</strong>: There’s a whole other collection of settings such as the type of visualization, number of decimals, and advanced options for how the slide is exported to Excel.</li>
</ul>
<p>The recipes in this cookbook all start from the pets example dataset (available from <code><a href="../reference/newExampleDataset.html">newExampleDataset()</a></code>).</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/message.html">suppressPackageStartupMessages</a></span><span class="op">(</span><span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="http://purrr.tidyverse.org">purrr</a></span><span class="op">)</span>
    <span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://crunch.io/r/crunch/">crunch</a></span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span>

<span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span><span class="st">"crunch.show.progress"</span> <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>

<span class="fu"><a href="../reference/login.html">login</a></span><span class="op">(</span><span class="op">)</span>
<span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newExampleDataset.html">newExampleDataset</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<div id="basic-deck-and-slide-manipulation" class="section level2">
<h2 class="hasAnchor">
<a href="#basic-deck-and-slide-manipulation" class="anchor"></a>Basic deck and slide manipulation</h2>
<div id="creating-a-slide-on-a-new-deck" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-slide-on-a-new-deck" class="anchor"></a>Creating a slide on a new deck</h3>
<div id="problem" class="section level4">
<h4 class="hasAnchor">
<a href="#problem" class="anchor"></a>Problem</h4>
<p>You want to create a new deck and add slides to it.</p>
</div>
<div id="solution" class="section level4">
<h4 class="hasAnchor">
<a href="#solution" class="anchor"></a>Solution</h4>
<p>A deck is created on a dataset with the command <code><a href="../reference/newDeck.html">newDeck()</a></code>. It takes the dataset, a title for the deck, and can take <code>is_public=TRUE</code> if the deck should be made public to other users of the dataset (it defaults to <code>FALSE</code>).</p>
<p>After the deck is created, the <code><a href="../reference/newSlide.html">newSlide()</a></code> function adds a slide.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">deck</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newDeck.html">newDeck</a></span><span class="op">(</span><span class="va">ds</span>, <span class="st">"Q3 Pets Deck"</span>, is_public <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">private_deck</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newDeck.html">newDeck</a></span><span class="op">(</span><span class="va">ds</span>, <span class="st">"Private Deck"</span><span class="op">)</span>

<span class="co"># If no `vizType` is specified, defaults to a table</span>
<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span><span class="va">deck</span>, <span class="op">~</span><span class="va">q1</span>, title <span class="op">=</span> <span class="st">"Table of Favorite Pet"</span><span class="op">)</span>

<span class="co"># Example of setting a vizType and filter</span>
<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="fu"><a href="../reference/crunch-uni.html">mean</a></span><span class="op">(</span><span class="va">ndogs</span><span class="op">)</span> <span class="op">~</span> <span class="va">country</span>, 
    title <span class="op">=</span> <span class="st">"Dot Plot of Mean Dogs by Country"</span>,
    display_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>vizType <span class="op">=</span> <span class="st">"dotplot"</span><span class="op">)</span>,
    filter <span class="op">=</span> <span class="va">ds</span><span class="op">$</span><span class="va">q1</span> <span class="op">==</span> <span class="st">"Dog"</span>
<span class="op">)</span>

<span class="va">deck</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/refresh.html">refresh</a></span><span class="op">(</span><span class="va">deck</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="creating-a-slide-on-an-existing-deck" class="section level3">
<h3 class="hasAnchor">
<a href="#creating-a-slide-on-an-existing-deck" class="anchor"></a>Creating a slide on an existing deck</h3>
<div id="problem-1" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-1" class="anchor"></a>Problem</h4>
<p>You want to add a slide to a deck that has already been made.</p>
</div>
<div id="solution-1" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-1" class="anchor"></a>Solution</h4>
<p>The <code><a href="../reference/decks.html">decks()</a></code> function access the decks catalog for a dataset. You can select one name or position and then add to it.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/refresh.html">refresh</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span>
<span class="fu"><a href="../reference/decks.html">decks</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span>

<span class="va">private_deck</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/decks.html">decks</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span><span class="op">[[</span><span class="st">"Private Deck"</span><span class="op">]</span><span class="op">]</span>

<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">private_deck</span>, 
    <span class="op">~</span><span class="va">q1</span>, 
    title <span class="op">=</span> <span class="st">"Bar Plot of Favorite Pet"</span>, 
    display_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>vizType <span class="op">=</span> <span class="st">"groupedBarPlot"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
<div id="editing-an-existing-slide" class="section level3">
<h3 class="hasAnchor">
<a href="#editing-an-existing-slide" class="anchor"></a>Editing an existing slide</h3>
<div id="problem-2" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-2" class="anchor"></a>Problem</h4>
<p>You want to edit a slide that’s already been created.</p>
</div>
<div id="solution-2" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-2" class="anchor"></a>Solution</h4>
<p>Slides can be accessed from the deck’s slide catalog, available from the <code><a href="../reference/slides.html">slides()</a></code> command. You can retrieve them by their title or position.</p>
<p>The helper functions <code>title&lt;-</code>, <code>subtitle&lt;-</code>, <code>query&lt;-</code>, <code>weight&lt;-</code>, <code>filter&lt;-</code>, <code>transforms&lt;-</code>, <code>displaySettings&lt;-</code> and <code>vizSpecs&lt;-</code> help set options on a slide.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># Move title to subtitle and change the title</span>
<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/slides.html">slides</a></span><span class="op">(</span><span class="va">deck</span><span class="op">)</span><span class="op">[[</span><span class="st">"Table of Favorite Pet"</span><span class="op">]</span><span class="op">]</span>
<span class="fu"><a href="../reference/titles.html">subtitle</a></span><span class="op">(</span><span class="va">slide</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/titles.html">title</a></span><span class="op">(</span><span class="va">slide</span><span class="op">)</span>
<span class="fu"><a href="../reference/titles.html">title</a></span><span class="op">(</span><span class="va">slide</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="st">"Cats are the most popular"</span>


<span class="co"># Rename a category</span>
<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/slides.html">slides</a></span><span class="op">(</span><span class="va">deck</span><span class="op">)</span><span class="op">[[</span><span class="fl">2</span><span class="op">]</span><span class="op">]</span>
<span class="fu"><a href="../reference/Transforms-class.html">transforms</a></span><span class="op">(</span><span class="va">slide</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
    rows_dimension <span class="op">=</span> <span class="fu"><a href="../reference/makeDimTransform.html">makeDimTransform</a></span><span class="op">(</span>rename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"AUS"</span> <span class="op">=</span> <span class="st">"Australia"</span><span class="op">)</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
<div id="deleting-slides-on-a-deck" class="section level3">
<h3 class="hasAnchor">
<a href="#deleting-slides-on-a-deck" class="anchor"></a>Deleting slides on a deck</h3>
<div id="problem-3" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-3" class="anchor"></a>Problem</h4>
<p>You want to delete a slide from a deck.</p>
</div>
<div id="solution-3" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-3" class="anchor"></a>Solution</h4>
<p>Access a slide from the slide catalog and then use the <code><a href="../reference/delete.html">delete()</a></code> command to delete it (it will ask before deleting unless you use command <code><a href="../reference/consent.html">with_consent()</a></code>).</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/slides.html">slides</a></span><span class="op">(</span><span class="va">deck</span><span class="op">)</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>

<span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># Not actually run for example</span>
    <span class="fu"><a href="../reference/delete.html">delete</a></span><span class="op">(</span><span class="va">slide</span><span class="op">)</span>
<span class="op">}</span></code></pre></div>
</div>
</div>
<div id="making-a-deck-public-or-private" class="section level3">
<h3 class="hasAnchor">
<a href="#making-a-deck-public-or-private" class="anchor"></a>Making a deck public (or private)</h3>
<div id="problem-4" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-4" class="anchor"></a>Problem</h4>
<p>You want to change a deck from being private to public (or vice-versa).</p>
</div>
<div id="solution-4" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-4" class="anchor"></a>Solution</h4>
<p>The <code>is.public&lt;-</code> function can set the deck’s status.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/is-public.html">is.public</a></span><span class="op">(</span><span class="va">private_deck</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="cn">TRUE</span> <span class="co"># now public</span></code></pre></div>
</div>
</div>
</div>
<div id="query-types" class="section level2">
<h2 class="hasAnchor">
<a href="#query-types" class="anchor"></a>Query types</h2>
<p>Queries define the variables and summary measures used for the slide’s analysis. They use the formula notation used by the crunch function <code><a href="../reference/crtabs.html">crtabs()</a></code> which is based on base R’s <code><a href="https://rdrr.io/r/stats/xtabs.html">xtabs()</a></code>.</p>
<div id="univariate-frequencies" class="section level3">
<h3 class="hasAnchor">
<a href="#univariate-frequencies" class="anchor"></a>Univariate frequencies</h3>
<div id="problem-5" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-5" class="anchor"></a>Problem</h4>
<p>You want to get the frequencies of a single categorical or multiple response variable.</p>
</div>
<div id="solution-5" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-5" class="anchor"></a>Solution</h4>
<p>The query for a univariate count query puts the variable on the right hand side of a formula (for example <code>~var</code>).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="va">q1</span>, 
    title <span class="op">=</span> <span class="st">"Univariate frequency: Favorite Pet"</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
<div id="bivariate-frequencies-crosstabs" class="section level3">
<h3 class="hasAnchor">
<a href="#bivariate-frequencies-crosstabs" class="anchor"></a>Bivariate frequencies (crosstabs)</h3>
<div id="problem-6" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-6" class="anchor"></a>Problem</h4>
<p>You want to get a crosstab (or a frequency from two variables’ joint distribution)</p>
</div>
<div id="solution-6" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-6" class="anchor"></a>Solution</h4>
<p>The query for a multivariate frequency uses the <code><a href="https://rdrr.io/r/base/Arithmetic.html">+</a></code> to separate the variables on the right hand side of the formula (for example <code>~var1 + var2</code>).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="va">q1</span> <span class="op">+</span> <span class="va">country</span>, 
    title <span class="op">=</span> <span class="st">"Bivariate frequency: Favorite Pet by country"</span>
<span class="op">)</span>

<span class="co"># A third dimension is possible, which will usually result in a tabbed result:</span>
<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="va">q1</span> <span class="op">+</span> <span class="va">country</span> <span class="op">+</span> <span class="va">wave</span>, 
    title <span class="op">=</span> <span class="st">"Trivariate frequency: Favorite Pet by country by wave"</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
<div id="frequencies-from-a-categorical-array" class="section level3">
<h3 class="hasAnchor">
<a href="#frequencies-from-a-categorical-array" class="anchor"></a>Frequencies from a Categorical Array</h3>
<div id="problem-7" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-7" class="anchor"></a>Problem</h4>
<p>You want to get the frequencies from a categorical array variable</p>
</div>
<div id="solution-7" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-7" class="anchor"></a>Solution</h4>
<p>A categorical array contributes two dimensions to the analysis, a “categories” dimension and a “subvariables” dimension. If your query just specifies the variable, by default the categories dimension is used first and the categories second, but you can specify the order by using <code><a href="../reference/var-categories.html">categories()</a></code> and <code>subvaribles()</code> functions in your query.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="va">allpets</span>, 
    title <span class="op">=</span> <span class="st">"Categorical array: default order"</span>
<span class="op">)</span>

<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="fu"><a href="../reference/var-categories.html">categories</a></span><span class="op">(</span><span class="va">allpets</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="../reference/Subvariables-class.html">subvariables</a></span><span class="op">(</span><span class="va">allpets</span><span class="op">)</span>, 
    title <span class="op">=</span> <span class="st">"Categorical array: categories on rows dimension"</span>
<span class="op">)</span></code></pre></div>
<p>The “categories” dimension cannot be the first dimension (used in the “tabs” of the analysis in a Crunch Dashboard) of a slide analysis that has 3 dimensions. Instead, to get the “tabs” dimension have the categorical array variable, choose one category to select, and create a Multiple Response variable out of it.</p>
<p>When trying to make a slide with a categorical array (<code>ca</code>) and another variables(<code>cat</code>), the following table shows the 6 queries that are valid and which dimension the web app will display on each of the “rows”, “columns” and “tabs” dimensions. Here we have chosen to select the category with name = <code>"category"</code> when using <code>selectCategories</code>, but any valid category id or name could be used instead.</p>
<table class="table">
<colgroup>
<col width="45%">
<col width="18%">
<col width="18%">
<col width="18%">
</colgroup>
<thead><tr class="header">
<th>query</th>
<th>rows</th>
<th>columns</th>
<th>tabs</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><code>~cat + categories(ca) + subvariables(ca)</code></td>
<td>CA categories</td>
<td>CA subvariables</td>
<td>other variable</td>
</tr>
<tr class="even">
<td><code>~cat + subvariables(ca) + categories(ca)</code></td>
<td>CA subvariables</td>
<td>CA categories</td>
<td>other variable</td>
</tr>
<tr class="odd">
<td><code>~subvariables(ca) + categories(ca) + cat</code></td>
<td>CA categories</td>
<td>other variable</td>
<td>CA subvariables</td>
</tr>
<tr class="even">
<td><code>~subvariables(ca) + cat + categories(ca)</code></td>
<td>other variable</td>
<td>CA categories</td>
<td>CA subvariables</td>
</tr>
<tr class="odd">
<td><code>~cat + selectCategories(ca, "category")</code></td>
<td>other variable</td>
<td>CA subvariables</td>
<td>CA categories</td>
</tr>
<tr class="even">
<td><code>~selectCategories(ca, "category") + cat</code></td>
<td>CA subvariables</td>
<td>other variable</td>
<td>CA categories</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="mean-of-a-numeric-variable" class="section level3">
<h3 class="hasAnchor">
<a href="#mean-of-a-numeric-variable" class="anchor"></a>Mean of a Numeric variable</h3>
<div id="problem-8" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-8" class="anchor"></a>Problem</h4>
<p>You want to get the mean from a Numeric (Numeric Array) variable</p>
</div>
<div id="solution-8" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-8" class="anchor"></a>Solution</h4>
<p>A numeric summary measure like a mean goes on the left hand side of the formula in a query. The right hand side cannot be empty, but to get the mean of the whole dataset put <code>1</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="fu"><a href="../reference/crunch-uni.html">mean</a></span><span class="op">(</span><span class="va">ndogs</span><span class="op">)</span> <span class="op">~</span> <span class="fl">1</span>,
    title <span class="op">=</span> <span class="st">"Mean Number of Dogs"</span>
<span class="op">)</span>

<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="fu"><a href="../reference/crunch-uni.html">mean</a></span><span class="op">(</span><span class="va">ndogs</span><span class="op">)</span> <span class="op">~</span> <span class="va">country</span>,
    title <span class="op">=</span> <span class="st">"Mean Number of Dogs by Country"</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
<div id="scorecard-of-aligned-multiple-response-variables" class="section level3">
<h3 class="hasAnchor">
<a href="#scorecard-of-aligned-multiple-response-variables" class="anchor"></a>Scorecard of aligned Multiple Response variables</h3>
<div id="problem-9" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-9" class="anchor"></a>Problem</h4>
<p>You want to make comparisons of frequencies of a set of Multiple Response variables with the same items (response)</p>
</div>
<div id="solution-9" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-9" class="anchor"></a>Solution</h4>
<p>A scorecard is a rectangular grid of different Multiple Response variables with their items aligned. The query for a scorecard can be created using the <code>scorecard()</code> function.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># There's only one MR available on this dataset, so we repeat the same one twice to illustrate</span>
<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="fu">scorecard</span><span class="op">(</span><span class="va">allpets</span>, <span class="va">allpets</span><span class="op">)</span>, 
    title <span class="op">=</span> <span class="st">"Scorecard"</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
</div>
<div id="dimension-transforms" class="section level2">
<h2 class="hasAnchor">
<a href="#dimension-transforms" class="anchor"></a>Dimension transforms</h2>
<p>Query results have “dimensions”, which are enumerated sets that the calculation’s results are formed in, such as the categories of a categorical variables or the items in a multiple response variables. Their behavior in the slide can be customized using dimension transforms.</p>
<p>A query result generally has up to three dimensions. The first is the “rows_dimension”, second is the “columns” dimension and third is the “tabs_dimension”. When using the <code>transform</code> argument of <code><a href="../reference/newSlide.html">newSlide()</a></code> or setting the <code>transforms&lt;-</code> of a slide directly, you form a named list with these dimensions as the names. The helper function <code><a href="../reference/makeDimTransform.html">makeDimTransform()</a></code> can also help create the dimension changes.</p>
<div id="using-a-datasets-palette" class="section level3">
<h3 class="hasAnchor">
<a href="#using-a-datasets-palette" class="anchor"></a>Using a dataset’s palette</h3>
<div id="problem-10" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-10" class="anchor"></a>Problem</h4>
<p>You want to make the colors of a dashboard tile use a pre-defined palette.</p>
</div>
<div id="solution-10" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-10" class="anchor"></a>Solution</h4>
<p>Each Crunch Dataset has a set of color palettes associated with it’s account and folder. You can access the palettes using the <code><a href="../reference/palettes.html">palettes()</a></code> or <code><a href="../reference/palettes.html">defaultPalette()</a></code> functions. Then using the <code><a href="../reference/makeDimTransform.html">makeDimTransform()</a></code> function you can use this palette. The colors are used in the order they appear and if more colors are needed than provided by the palette, the default colors are used.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="va">q1</span>, 
    title <span class="op">=</span> <span class="st">"Favorite pet using default palette"</span>,
    display_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>vizType <span class="op">=</span> <span class="st">"groupedBarPlot"</span><span class="op">)</span>,
    transform <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        rows_dimension <span class="op">=</span> <span class="fu"><a href="../reference/makeDimTransform.html">makeDimTransform</a></span><span class="op">(</span>colors <span class="op">=</span> <span class="fu"><a href="../reference/palettes.html">defaultPalette</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>
<span class="op">)</span>

<span class="va">graph_pal</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/palettes.html">palettes</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span><span class="op">[[</span><span class="st">"purple palette"</span><span class="op">]</span><span class="op">]</span>
<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="fu"><a href="../reference/var-categories.html">categories</a></span><span class="op">(</span><span class="va">petloc</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="../reference/Subvariables-class.html">subvariables</a></span><span class="op">(</span><span class="va">petloc</span><span class="op">)</span>, 
    title <span class="op">=</span> <span class="st">"Pets by location using another palette"</span>,
    display_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>vizType <span class="op">=</span> <span class="st">"horizontalBarPlot"</span><span class="op">)</span>,
    transform <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        rows_dimension <span class="op">=</span> <span class="fu"><a href="../reference/makeDimTransform.html">makeDimTransform</a></span><span class="op">(</span>colors <span class="op">=</span> <span class="va">graph_pal</span><span class="op">)</span>
    <span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
<div id="using-a-set-of-colors-from-r" class="section level3">
<h3 class="hasAnchor">
<a href="#using-a-set-of-colors-from-r" class="anchor"></a>Using a set of colors from R</h3>
<div id="problem-11" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-11" class="anchor"></a>Problem</h4>
<p>You want to make the colors of a dashboard tile use a set of colors you specify in the script</p>
</div>
<div id="solution-11" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-11" class="anchor"></a>Solution</h4>
<p>If you want to specify the colors manually, you can also use a character vector of RGB hex codes.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="va">q1</span>, 
    title <span class="op">=</span> <span class="st">"Favorite pet using colors from R"</span>,
    display_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>vizType <span class="op">=</span> <span class="st">"groupedBarPlot"</span><span class="op">)</span>,
    transform <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        rows_dimension <span class="op">=</span> <span class="fu"><a href="../reference/makeDimTransform.html">makeDimTransform</a></span><span class="op">(</span>colors <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"#af8dc3"</span>, <span class="st">"#f7f7f7"</span>, <span class="st">"#7fbf7b"</span><span class="op">)</span><span class="op">)</span>
    <span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
<div id="hiding-a-dimension-item" class="section level3">
<h3 class="hasAnchor">
<a href="#hiding-a-dimension-item" class="anchor"></a>Hiding a dimension item</h3>
<div id="problem-12" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-12" class="anchor"></a>Problem</h4>
<p>You want to hide a dimension item (a category or subvariable) from the slide.</p>
</div>
<div id="solution-12" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-12" class="anchor"></a>Solution</h4>
<p>The <code>hide</code> argument of <code><a href="../reference/makeDimTransform.html">makeDimTransform()</a></code> takes a category name or id, if the dimension is made from categories, or a subvariable name or alias if the dimension is made from subvariables (as in a Multiple Response variable or a subvariables dimension of a Categorical Array or Numeric Array).</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="va">q1</span>, 
    title <span class="op">=</span> <span class="st">"Favorite pet excluding birds"</span>,
    display_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>vizType <span class="op">=</span> <span class="st">"groupedBarPlot"</span><span class="op">)</span>,
    transform <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        rows_dimension <span class="op">=</span> <span class="fu"><a href="../reference/makeDimTransform.html">makeDimTransform</a></span><span class="op">(</span>hide <span class="op">=</span> <span class="st">"Bird"</span><span class="op">)</span>
    <span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
</div>
<div id="display-settings-and-visual-specifications" class="section level2">
<h2 class="hasAnchor">
<a href="#display-settings-and-visual-specifications" class="anchor"></a>Display settings and visual specifications</h2>
<div id="choosing-a-graph-type" class="section level3">
<h3 class="hasAnchor">
<a href="#choosing-a-graph-type" class="anchor"></a>Choosing a graph type</h3>
<div id="problem-13" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-13" class="anchor"></a>Problem</h4>
<p>You want to create a slide with a display type other than table.</p>
</div>
<div id="solution-13" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-13" class="anchor"></a>Solution</h4>
<p>The default display of a tile is the table, but the <code>vizType</code> display setting chooses between other options. The most commonly used <code>vizType</code>s are: - <code>table</code> (always available) - <code>groupedBarPlot</code>, <code>stackedBarPlot</code>, <code>horizontalBarPlot</code>, <code>horizontalStackedBarPlot</code> (available for queries based on a count in any number of dimensions) - <code>timeplot</code> (available when the second dimension has a time component) - <code>dotplot</code> (available for displays of means) - <code>donut</code> (available only for 1 dimensional count queries)</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="va">q1</span> <span class="op">+</span> <span class="va">country</span>, 
    title <span class="op">=</span> <span class="st">"Favorite pet by country horizontal bar plot"</span>,
    display_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>vizType <span class="op">=</span> <span class="st">"horizontalBarPlot"</span><span class="op">)</span>
<span class="op">)</span>


<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="va">q1</span> <span class="op">+</span> <span class="va">wave</span>, 
    title <span class="op">=</span> <span class="st">"Favorite pet over time timeplot"</span>,
    display_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>vizType <span class="op">=</span> <span class="st">"timeplot"</span><span class="op">)</span>
<span class="op">)</span></code></pre></div>
</div>
</div>
<div id="using-a-slide-as-a-template" class="section level3">
<h3 class="hasAnchor">
<a href="#using-a-slide-as-a-template" class="anchor"></a>Using a slide as a template</h3>
<div id="problem-14" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-14" class="anchor"></a>Problem</h4>
<p>You want to use the settings from an existing slide to create a new one (or modify an existing one).</p>
</div>
<div id="solution-14" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-14" class="anchor"></a>Solution</h4>
<p>The functions <code><a href="../reference/filter.html">displaySettings()</a></code> and <code><a href="../reference/filter.html">vizSpecs()</a></code> give access to the settings on an existing slide. This slide can be a slide you’ve created from R or from the web app, so that you can use the visual editor to perfect the look for one slide and then use it for a whole set of slides. You can either set the attributes directly, or use <code><a href="https://rdrr.io/r/base/dput.html">dput()</a></code> to print out the object in a way that you can copy and paste into your code.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">template_deck</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newDeck.html">newDeck</a></span><span class="op">(</span><span class="va">ds</span>, <span class="st">"Templates"</span>, is_public <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">template_deck</span>, 
    <span class="op">~</span><span class="va">q1</span>, 
    title <span class="op">=</span> <span class="st">"Donut with value labels"</span>,
    display_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>vizType <span class="op">=</span> <span class="st">"donut"</span>, showValueLabels <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,
    viz_specs <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
        default <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
            format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>
                decimal_places <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>percentages <span class="op">=</span> <span class="fl">0L</span>, other <span class="op">=</span> <span class="fl">2L</span><span class="op">)</span>,
                show_empty <span class="op">=</span> <span class="cn">FALSE</span>
            <span class="op">)</span>
        <span class="op">)</span>
    <span class="op">)</span>
<span class="op">)</span>

<span class="co"># Setting the slide `display_setting` and `viz_specs` directly:</span>
<span class="va">slide</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
    <span class="va">deck</span>, 
    <span class="op">~</span><span class="va">country</span>,
    title <span class="op">=</span> <span class="st">"Country donut with value labels"</span>,
    display_settings <span class="op">=</span> <span class="fu"><a href="../reference/filter.html">displaySettings</a></span><span class="op">(</span><span class="va">template_deck</span><span class="op">[[</span><span class="st">"Donut with value labels"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,
    viz_specs <span class="op">=</span> <span class="fu"><a href="../reference/filter.html">vizSpecs</a></span><span class="op">(</span><span class="va">template_deck</span><span class="op">[[</span><span class="st">"Donut with value labels"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>
<span class="op">)</span>

<span class="co"># How to print out the structure in a format that can be copy and pasted into your code</span>
<span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/dput.html">dput</a></span><span class="op">(</span><span class="fu"><a href="../reference/filter.html">displaySettings</a></span><span class="op">(</span><span class="va">template_deck</span><span class="op">[[</span><span class="st">"Donut with value labels"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
<div id="bulk-creation-of-slides" class="section level2">
<h2 class="hasAnchor">
<a href="#bulk-creation-of-slides" class="anchor"></a>Bulk creation of slides</h2>
<p>Sometimes you want to make many slides with related formatting to create a document that gives a good high level overview of a dataset. The [<code><a href="../reference/tabBook.html">tabBook()</a></code>] function is designed to create a basic “top line” report of simple crosstabs from a multitable, and is probably the first thing you should check if you’re thinking of making bulk analyses. However, <code><a href="../reference/tabBook.html">tabBook()</a></code> does not allow for all of the customization possible in a slide.</p>
<p>The trickiest part of bulk creating slides from R is iterating over the variables. The general behind all of these cookbook recipes is to get a list of variable aliases, iterate over them using them to get other variable metadata. The trickiest part is to create a query formula from a string, but the <code><a href="https://rdrr.io/r/stats/formula.html">as.formula()</a></code> function helps with this. This cookbook uses base R functions <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code> and <code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code>, but the “tidyverse” functions <code><a href="https://purrr.tidyverse.org/reference/map.html">purrr::walk()</a></code> and <code><a href="https://glue.tidyverse.org/reference/glue.html">glue::glue()</a></code> are well-suited to this task.</p>
<div id="basic-top-line-for-entire-dataset" class="section level3">
<h3 class="hasAnchor">
<a href="#basic-top-line-for-entire-dataset" class="anchor"></a>Basic top line for entire dataset</h3>
<div id="problem-15" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-15" class="anchor"></a>Problem</h4>
<p>You want to create a simple report for every variable in a dataset.</p>
</div>
<div id="solution-15" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-15" class="anchor"></a>Solution</h4>
<p>Use the <code><a href="../reference/variables.html">variables()</a></code> function to get the variables from a dataset, and the <code><a href="../reference/aliases.html">aliases()</a></code> function to get their aliases. Then use <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code> to iterate over the variable aliases and construct the slide using <code><a href="https://rdrr.io/r/base/paste.html">paste0()</a></code> and <code><a href="https://rdrr.io/r/stats/formula.html">as.formula()</a></code>.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">deck</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newDeck.html">newDeck</a></span><span class="op">(</span><span class="va">ds</span>, <span class="st">"Full Dataset Topline Deck"</span>, is_public <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">var_aliases</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aliases.html">aliases</a></span><span class="op">(</span><span class="fu"><a href="../reference/variables.html">variables</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span><span class="op">)</span>

<span class="va">slides</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">var_aliases</span>, <span class="kw">function</span><span class="op">(</span><span class="va">alias</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">slide_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"~"</span>, <span class="va">alias</span><span class="op">)</span><span class="op">)</span>
    <span class="va">slide_title</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Topline - "</span>, <span class="fu"><a href="../reference/describe-entity.html">name</a></span><span class="op">(</span><span class="va">ds</span><span class="op">[[</span><span class="va">alias</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
    
    <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span><span class="va">deck</span>, <span class="va">slide_query</span>, title <span class="op">=</span> <span class="va">slide_title</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="slides-for-variables-within-a-particular-folder" class="section level3">
<h3 class="hasAnchor">
<a href="#slides-for-variables-within-a-particular-folder" class="anchor"></a>Slides for variables within a particular folder</h3>
<div id="problem-16" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-16" class="anchor"></a>Problem</h4>
<p>You want to create a simple report for every variable in a particular folder.</p>
</div>
<div id="solution-16" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-16" class="anchor"></a>Solution</h4>
<p>The <code><a href="../reference/variables.html">variables()</a></code> function can also work on a folder, so we can make a deck from variables in a folder in a similar way to making one for a whole dataset.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">deck</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newDeck.html">newDeck</a></span><span class="op">(</span><span class="va">ds</span>, <span class="st">"Folder Topline Deck"</span>, is_public <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">folder</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/cd.html">cd</a></span><span class="op">(</span><span class="va">ds</span>, <span class="st">"Key Pet Indicators"</span><span class="op">)</span>
<span class="va">var_aliases</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aliases.html">aliases</a></span><span class="op">(</span><span class="fu"><a href="../reference/variables.html">variables</a></span><span class="op">(</span><span class="va">folder</span><span class="op">)</span><span class="op">)</span>

<span class="va">slides</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">var_aliases</span>, <span class="kw">function</span><span class="op">(</span><span class="va">alias</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">slide_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"~"</span>, <span class="va">alias</span><span class="op">)</span><span class="op">)</span>
    <span class="va">slide_title</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Topline - "</span>, <span class="fu"><a href="../reference/describe-entity.html">name</a></span><span class="op">(</span><span class="va">ds</span><span class="op">[[</span><span class="va">alias</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
    
    <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span><span class="va">deck</span>, <span class="va">slide_query</span>, title <span class="op">=</span> <span class="va">slide_title</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
<div id="problem-17" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-17" class="anchor"></a>Problem</h4>
<p>You want to create crosstabs for many variables across a set of variables.</p>
</div>
<div id="solution-17" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-17" class="anchor"></a>Solution</h4>
<p>You can use <code><a href="https://rdrr.io/r/base/lapply.html">lapply()</a></code> to iterate over both the row and column variables of the crosstab.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">deck</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newDeck.html">newDeck</a></span><span class="op">(</span><span class="va">ds</span>, <span class="st">"Crosstabs Deck"</span>, is_public <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">demo_vars</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/aliases.html">aliases</a></span><span class="op">(</span><span class="fu"><a href="../reference/variables.html">variables</a></span><span class="op">(</span><span class="fu"><a href="../reference/cd.html">cd</a></span><span class="op">(</span><span class="va">ds</span>, <span class="st">"Dimensions"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="va">var_aliases</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sets.html">setdiff</a></span><span class="op">(</span><span class="fu"><a href="../reference/aliases.html">aliases</a></span><span class="op">(</span><span class="fu"><a href="../reference/variables.html">variables</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span><span class="op">)</span>, <span class="va">demo_vars</span><span class="op">)</span> <span class="co"># don't cross demo vars with themselves</span>

<span class="va">slides</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">var_aliases</span>, <span class="kw">function</span><span class="op">(</span><span class="va">alias</span><span class="op">)</span> <span class="op">{</span>
    <span class="co"># Add a slide before crosstabs of the univariate frequency</span>
    <span class="va">all_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"~"</span>, <span class="va">alias</span><span class="op">)</span><span class="op">)</span>
    <span class="va">all_title</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Frequency - "</span>, <span class="fu"><a href="../reference/describe-entity.html">name</a></span><span class="op">(</span><span class="va">ds</span><span class="op">[[</span><span class="va">alias</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
    
    <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span><span class="va">deck</span>, <span class="va">all_query</span>, title <span class="op">=</span> <span class="va">all_title</span><span class="op">)</span>
    
    <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">demo_vars</span>, <span class="kw">function</span><span class="op">(</span><span class="va">demo_alias</span><span class="op">)</span> <span class="op">{</span>
        <span class="va">crosstab_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"~"</span>, <span class="va">demo_alias</span>, <span class="st">" + "</span>, <span class="va">alias</span><span class="op">)</span><span class="op">)</span>
        <span class="va">crosstab_title</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"Crosstab - "</span>, <span class="fu"><a href="../reference/describe-entity.html">name</a></span><span class="op">(</span><span class="va">ds</span><span class="op">[[</span><span class="va">alias</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, <span class="st">" by "</span>, <span class="fu"><a href="../reference/describe-entity.html">name</a></span><span class="op">(</span><span class="va">ds</span><span class="op">[[</span><span class="va">demo_alias</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
        
        <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span><span class="va">deck</span>, <span class="va">crosstab_query</span>, title <span class="op">=</span> <span class="va">crosstab_title</span><span class="op">)</span>
    <span class="op">}</span><span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
</div>
<div id="slides-based-on-variable-type" class="section level3">
<h3 class="hasAnchor">
<a href="#slides-based-on-variable-type" class="anchor"></a>Slides based on variable type</h3>
<div id="problem-18" class="section level4">
<h4 class="hasAnchor">
<a href="#problem-18" class="anchor"></a>Problem</h4>
<p>You want to create a report with slides that vary based on the variable’s type.</p>
</div>
<div id="solution-18" class="section level4">
<h4 class="hasAnchor">
<a href="#solution-18" class="anchor"></a>Solution</h4>
<p>You can create functions that create slides for a particular variable type and then choose which function to use based on the variable’s type while iterating.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">cat_slide</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">alias</span>, <span class="va">ds</span>, <span class="va">deck</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">slide_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"~"</span>, <span class="va">alias</span><span class="op">)</span><span class="op">)</span>
    <span class="va">slide_title</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="../reference/describe-entity.html">name</a></span><span class="op">(</span><span class="va">ds</span><span class="op">[[</span><span class="va">alias</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
    <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
        <span class="va">deck</span>, 
        <span class="va">slide_query</span>,
        title <span class="op">=</span> <span class="va">slide_title</span>,
        display_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>vizType <span class="op">=</span> <span class="st">"donut"</span><span class="op">)</span>
    <span class="op">)</span>
<span class="op">}</span>

<span class="va">mr_slide</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">alias</span>, <span class="va">ds</span>, <span class="va">deck</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">slide_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"~"</span>, <span class="va">alias</span><span class="op">)</span><span class="op">)</span>
    <span class="va">slide_title</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="../reference/describe-entity.html">name</a></span><span class="op">(</span><span class="va">ds</span><span class="op">[[</span><span class="va">alias</span><span class="op">]</span><span class="op">]</span><span class="op">)</span><span class="op">)</span>
    <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
        <span class="va">deck</span>, 
        <span class="va">slide_query</span>,
        title <span class="op">=</span> <span class="va">slide_title</span>,
        display_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>vizType <span class="op">=</span> <span class="st">"groupedBarPlot"</span><span class="op">)</span>
    <span class="op">)</span>
<span class="op">}</span>

<span class="va">numeric_slide</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">alias</span>, <span class="va">ds</span>, <span class="va">deck</span><span class="op">)</span> <span class="op">{</span>
    <span class="va">slide_query</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/formula.html">as.formula</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"mean("</span>, <span class="va">alias</span>, <span class="st">") ~ wave"</span><span class="op">)</span><span class="op">)</span>
    <span class="va">slide_title</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu"><a href="../reference/describe-entity.html">name</a></span><span class="op">(</span><span class="va">ds</span><span class="op">[[</span><span class="va">alias</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>, <span class="st">" over time"</span><span class="op">)</span>
    <span class="fu"><a href="../reference/newSlide.html">newSlide</a></span><span class="op">(</span>
        <span class="va">deck</span>, 
        <span class="va">slide_query</span>,
        title <span class="op">=</span> <span class="va">slide_title</span>,
        display_settings <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>vizType <span class="op">=</span> <span class="st">"timeplot"</span><span class="op">)</span>
    <span class="op">)</span>
<span class="op">}</span>

<span class="va">deck</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/newDeck.html">newDeck</a></span><span class="op">(</span><span class="va">ds</span>, <span class="st">"Slides Customized by Variable Type"</span>, is_public <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="va">var_aliases</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"q1"</span>, <span class="st">"allpets"</span>, <span class="st">"ndogs"</span><span class="op">)</span>
<span class="va">slides</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html">lapply</a></span><span class="op">(</span><span class="va">var_aliases</span>, <span class="kw">function</span><span class="op">(</span><span class="va">alias</span><span class="op">)</span> <span class="op">{</span>
    <span class="kw"><a href="https://rdrr.io/r/base/switch.html">switch</a></span><span class="op">(</span>
        <span class="fu"><a href="../reference/type.html">type</a></span><span class="op">(</span><span class="va">ds</span><span class="op">[[</span><span class="va">alias</span><span class="op">]</span><span class="op">]</span><span class="op">)</span>,
        <span class="st">"categorical"</span> <span class="op">=</span> <span class="fu">cat_slide</span><span class="op">(</span><span class="va">alias</span>, <span class="va">ds</span>, <span class="va">deck</span><span class="op">)</span>,
        <span class="st">"multiple_response"</span> <span class="op">=</span> <span class="fu">mr_slide</span><span class="op">(</span><span class="va">alias</span>, <span class="va">ds</span>, <span class="va">deck</span><span class="op">)</span>,
        <span class="st">"numeric"</span> <span class="op">=</span> <span class="fu">numeric_slide</span><span class="op">(</span><span class="va">alias</span>, <span class="va">ds</span>, <span class="va">deck</span><span class="op">)</span>,
    <span class="op">)</span>
<span class="op">}</span><span class="op">)</span></code></pre></div>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by Greg Freedman Ellis, Jonathan Keane, Mike Malecki, Neal Richardson, Gordon Shotwell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '9fbcb3ae4d05600402e31f66b9b9501e',
    indexName: 'crunch',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
