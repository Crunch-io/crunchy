<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Array Variables • Crunch</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><!-- docsearch --><script src="../docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Array Variables">
<meta property="og:description" content="Crunch supports several types of 'array' variables, which group together multiple columns of data in ways common in survey research.">
<meta property="og:image" content="http://crunch.io/r/crunch/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-50332119-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-50332119-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Crunch</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.30.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/crunch.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    </li>
<li class="dropdown-header">Getting started</li>
    <li>
      <a href="../articles/variables.html">Crunch Variables</a>
    </li>
    <li>
      <a href="../articles/array-variables.html">Array Variables</a>
    </li>
    <li>
      <a href="../articles/variable-order.html">Variable Folders and Organization</a>
    </li>
    <li>
      <a href="../articles/projects.html">Organizing Datasets in Projects</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Exploring and analyzing</li>
    <li>
      <a href="../articles/derive.html">Adding Variables</a>
    </li>
    <li>
      <a href="../articles/analyze.html">Analyzing Crunch Data</a>
    </li>
    <li>
      <a href="../articles/filters.html">Filtering Data</a>
    </li>
    <li>
      <a href="../articles/subtotals.html">Subtotals and Headings</a>
    </li>
    <li>
      <a href="../articles/export.html">Exporting Data</a>
    </li>
    <li>
      <a href="../articles/fork-and-merge.html">Fork and Merge a Dataset</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Going deeper</li>
    <li>
      <a href="../articles/crunch-internals.html">Crunch Internals</a>
    </li>
    <li>
      <a href="../articles/abstract-categories.html">Abstract Categories</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Cookbooks</li>
    <li>
      <a href="../articles/deck-cookbook.html">Crunch Deck Cookbook</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Crunch-io/rcrunch/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="array-variables_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Array Variables</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/Crunch-io/rcrunch/blob/HEAD/vignettes/array-variables.Rmd" class="external-link"><code>vignettes/array-variables.Rmd</code></a></small>
      <div class="hidden name"><code>array-variables.Rmd</code></div>

    </div>

    
    
<p><a href="variables.html">Previous: variables</a></p>
<p>Crunch supports more types of variables than many of the data formats from which you can create datasets. Plain-text .csv files, for example, can’t express that some columns are actually indicator matrices of multiple selections (Multiple Response Variables). Most SPSS .sav files do not indicate Categorical Arrays (otherwise known as “grids”) as being part of a group—they are simply several categorical variables. The same is true for an R <code>data.frame</code>.</p>
<p>You can use <code>crunch</code> to “bind” categorical variables into Multiple Response and Categorical Array variables.</p>
<div class="section level2">
<h2 id="creating-an-array">Creating an array<a class="anchor" aria-label="anchor" href="#creating-an-array"></a>
</h2>
<p>One of the reasons to use R with Crunch is to leverage the power of scripting for tasks that would be repetitive in a GUI. Many crunch functions operating on Crunch datasets have an optional <code>pattern</code> argument that lets you use regular expressions for these “bulk” operations.</p>
<p>In our sample <em>Economist</em> dataset, we have set of variables prefixed with “imiss”:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^imiss_"</span>, <span class="fu"><a href="../reference/describe-catalog.html">names</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span>, value<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##  [1] "imiss_b" "imiss_c" "imiss_d" "imiss_f" "imiss_g" "imiss_h" "imiss_j"</span>
<span class="co">##  [8] "imiss_m" "imiss_p" "imiss_q" "imiss_r" "imiss_s" "imiss_t"</span></code></pre>
<p>These correspond to a survey grid question about how important respondents view a set of issues. Examining one of them, we see</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ds</span><span class="op">$</span><span class="va">imiss_b</span></code></pre></div>
<pre><code><span class="co">## imiss_b (categorical)</span>
<span class="co">## </span>
<span class="co">##                    Count</span>
<span class="co">## Very Important       196</span>
<span class="co">## Somewhat Important    44</span>
<span class="co">## Not very Important     8</span>
<span class="co">## Unimportant            1</span></code></pre>
<p>All of these “imiss” categorical variables have the same structure. We can combine them into a categorical array variable with <code>makeArray</code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ds</span><span class="op">$</span><span class="va">imiss</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/deriveArray.html">makeArray</a></span><span class="op">(</span><span class="va">ds</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^imiss_"</span>, <span class="fu"><a href="../reference/describe-catalog.html">names</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>, name<span class="op">=</span><span class="st">"Issue importance"</span><span class="op">)</span>
<span class="va">ds</span><span class="op">$</span><span class="va">imiss</span></code></pre></div>
<pre><code><span class="co">## Issue importance (categorical_array)</span>
<span class="co">## Subvariables:</span>
<span class="co">##   $`imiss_b`</span>
<span class="co">##   $`imiss_c`</span>
<span class="co">##   $`imiss_d`</span>
<span class="co">##   $`imiss_f`</span>
<span class="co">##   $`imiss_g`</span>
<span class="co">##   $`imiss_h`</span>
<span class="co">##   $`imiss_j`</span>
<span class="co">##   $`imiss_m`</span>
<span class="co">##   $`imiss_p`</span>
<span class="co">##   $`imiss_q`</span>
<span class="co">##   $`imiss_r`</span>
<span class="co">##   $`imiss_s`</span>
<span class="co">##   $`imiss_t`</span></code></pre>
<p>The set of “important issue” variables have gone from thirteen separate categorical variable cards to just one, where the subvariables are shown as rows, and the common categories across all of them are shown as columns.</p>
<p>In our example dataset, the categorical variables <code>imiss_*</code> are now not visible in the dataset directly, but we can access them as “subvariables” of the array we just created.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/Subvariables.html">subvariables</a></span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">imiss</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Subvariables:</span>
<span class="co">##   $`imiss_b`</span>
<span class="co">##   $`imiss_c`</span>
<span class="co">##   $`imiss_d`</span>
<span class="co">##   $`imiss_f`</span>
<span class="co">##   $`imiss_g`</span>
<span class="co">##   $`imiss_h`</span>
<span class="co">##   $`imiss_j`</span>
<span class="co">##   $`imiss_m`</span>
<span class="co">##   $`imiss_p`</span>
<span class="co">##   $`imiss_q`</span>
<span class="co">##   $`imiss_r`</span>
<span class="co">##   $`imiss_s`</span>
<span class="co">##   $`imiss_t`</span></code></pre>
<p>We can also step into the subvariables and access the underlying categorical variables:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ds</span><span class="op">$</span><span class="va">imiss</span><span class="op">$</span><span class="va">imiss_b</span></code></pre></div>
<pre><code><span class="co">## imiss_b (categorical)</span>
<span class="co">## </span>
<span class="co">##                    Count</span>
<span class="co">## Very Important       196</span>
<span class="co">## Somewhat Important    44</span>
<span class="co">## Not very Important     8</span>
<span class="co">## Unimportant            1</span></code></pre>
</div>
<div class="section level2">
<h2 id="manipulating-subvariables">Manipulating subvariables<a class="anchor" aria-label="anchor" href="#manipulating-subvariables"></a>
</h2>
<p>The names <code>imiss_b</code> through <code>imiss_t</code> are unsatisfying from a human-readability perspective: you can’t tell which political issues correspond to the variables. Unfortunately, we didn’t have additional metadata on these survey questions in the <code>data.frame</code> we imported initially. However, we can rectify this.</p>
<p>Subvariables have methods similar to those for <a href="variables.html">categories</a>. They have a names attribute that we can get:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/describe-catalog.html">names</a></span><span class="op">(</span><span class="fu"><a href="../reference/Subvariables.html">subvariables</a></span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">imiss</span><span class="op">)</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##  [1] "imiss_b" "imiss_c" "imiss_d" "imiss_f" "imiss_g" "imiss_h" "imiss_j"</span>
<span class="co">##  [8] "imiss_m" "imiss_p" "imiss_q" "imiss_r" "imiss_s" "imiss_t"</span></code></pre>
<p>We can set it, too:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/describe-catalog.html">names</a></span><span class="op">(</span><span class="fu"><a href="../reference/Subvariables.html">subvariables</a></span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">imiss</span><span class="op">)</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"The economy"</span>, <span class="st">"Immigration"</span>,
    <span class="st">"The environment"</span>, <span class="st">"Terrorism"</span>, <span class="st">"Gay rights"</span>, <span class="st">"Education"</span>,
    <span class="st">"Health care"</span>, <span class="st">"Social security"</span>, <span class="st">"The budget deficit"</span>,
    <span class="st">"The war in Afghanistan"</span>, <span class="st">"Taxes"</span>, <span class="st">"Medicare"</span>, <span class="st">"Abortion"</span><span class="op">)</span>
<span class="fu"><a href="../reference/Subvariables.html">subvariables</a></span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">imiss</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Subvariables:</span>
<span class="co">##   $`The economy`</span>
<span class="co">##   $`Immigration`</span>
<span class="co">##   $`The environment`</span>
<span class="co">##   $`Terrorism`</span>
<span class="co">##   $`Gay rights`</span>
<span class="co">##   $`Education`</span>
<span class="co">##   $`Health care`</span>
<span class="co">##   $`Social security`</span>
<span class="co">##   $`The budget deficit`</span>
<span class="co">##   $`The war in Afghanistan`</span>
<span class="co">##   $`Taxes`</span>
<span class="co">##   $`Medicare`</span>
<span class="co">##   $`Abortion`</span></code></pre>
<p>Another useful thing we can do with array subvariables is reorder them. Let’s alphabetize the subvariables:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">sorting</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/order.html" class="external-link">order</a></span><span class="op">(</span><span class="fu"><a href="../reference/describe-catalog.html">names</a></span><span class="op">(</span><span class="fu"><a href="../reference/Subvariables.html">subvariables</a></span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">imiss</span><span class="op">)</span><span class="op">)</span><span class="op">)</span>
<span class="fu"><a href="../reference/Subvariables.html">subvariables</a></span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">imiss</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/Subvariables.html">subvariables</a></span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">imiss</span><span class="op">)</span><span class="op">[</span><span class="va">sorting</span><span class="op">]</span>
<span class="fu"><a href="../reference/Subvariables.html">subvariables</a></span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">imiss</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## Subvariables:</span>
<span class="co">##   $`Abortion`</span>
<span class="co">##   $`Education`</span>
<span class="co">##   $`Gay rights`</span>
<span class="co">##   $`Health care`</span>
<span class="co">##   $`Immigration`</span>
<span class="co">##   $`Medicare`</span>
<span class="co">##   $`Social security`</span>
<span class="co">##   $`Taxes`</span>
<span class="co">##   $`Terrorism`</span>
<span class="co">##   $`The budget deficit`</span>
<span class="co">##   $`The economy`</span>
<span class="co">##   $`The environment`</span>
<span class="co">##   $`The war in Afghanistan`</span></code></pre>
</div>
<div class="section level2">
<h2 id="creating-multiple-response-variables">Creating multiple response variables<a class="anchor" aria-label="anchor" href="#creating-multiple-response-variables"></a>
</h2>
<p>Just as we created a categorical array, we can create a multiple response variable. Like categorical arrays, multiple responses contain a set of subvariables, categorical variables with a common list of categories. However, the subvariables in a multiple response are treated as dichotomous indicators. We specify one or more categories that indicate “selected” versus “not selected”. Hence, when a multiple response appears in the web app, it looks like a single categorical variable, each subvariable shown like a category. Unlike a categorical variable, though, the multiple responses are not mutually exclusive, so tabulations with them may not sum to 100 percent.</p>
<p>In the <em>Economist</em> dataset, we have another set of parallel categorical variables, “boap”, which indicate approval of President Obama on a range of issues.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ds</span><span class="op">$</span><span class="va">boap_4</span></code></pre></div>
<pre><code><span class="co">## boap_4 (categorical)</span>
<span class="co">## </span>
<span class="co">##                     Count</span>
<span class="co">## Somewhat approve       68</span>
<span class="co">## Strongly disapprove    67</span>
<span class="co">## No opinion             46</span>
<span class="co">## Somewhat disapprove    43</span>
<span class="co">## Strongly approve       26</span></code></pre>
<p>In the questionnaire that collected this data, “boap” appeared as a grid question, just as “imiss” did. But, for illustration purposes—and to show how you can convert between categorical array and multiple response—let’s treat this as multiple response.</p>
<p>The function <code>makeMR</code> works like <code>makeArray</code> but with an additional argument, “selections”, in which you specify the category name(s) that identify which category or categories should be the dichotomous indicator.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ds</span><span class="op">$</span><span class="va">boap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/deriveArray.html">makeMR</a></span><span class="op">(</span><span class="va">ds</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"^boap_[0-9]+"</span>, <span class="fu"><a href="../reference/describe-catalog.html">names</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span><span class="op">)</span><span class="op">]</span>,
    name<span class="op">=</span><span class="st">"Approval of Obama on issues"</span>,
    selections<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Strongly approve"</span>, <span class="st">"Somewhat approve"</span><span class="op">)</span><span class="op">)</span>
<span class="va">ds</span><span class="op">$</span><span class="va">boap</span></code></pre></div>
<pre><code><span class="co">## Approval of Obama on issues (multiple_response)</span>
<span class="co">## Subvariables:</span>
<span class="co">##   $`boap_2`</span>
<span class="co">##   $`boap_3`</span>
<span class="co">##   $`boap_4`</span>
<span class="co">##   $`boap_5`</span>
<span class="co">##   $`boap_6`</span>
<span class="co">##   $`boap_7`</span>
<span class="co">##   $`boap_8`</span>
<span class="co">##   $`boap_9`</span>
<span class="co">##   $`boap_10`</span>
<span class="co">##   $`boap_11`</span>
<span class="co">##   $`boap_12`</span>
<span class="co">##   $`boap_13`</span>
<span class="co">##   $`boap_14`</span></code></pre>
</div>
<div class="section level2">
<h2 id="undichotomize">(un)dichotomize<a class="anchor" aria-label="anchor" href="#undichotomize"></a>
</h2>
<p>Multiple response variables can be thought of as categorical arrays that have extra metadata indicating which categories are “selected”. This metadata can be manipulated, and we can thus transform categorical arrays into multiple response and vice versa.</p>
<p>The function <code>undichotomize</code> removes the dichotomization metadata:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ds</span><span class="op">$</span><span class="va">boap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dichotomize.html">undichotomize</a></span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">boap</span><span class="op">)</span>
<span class="va">ds</span><span class="op">$</span><span class="va">boap</span></code></pre></div>
<pre><code><span class="co">## Approval of Obama on issues (categorical_array)</span>
<span class="co">## Subvariables:</span>
<span class="co">##   $`boap_2`</span>
<span class="co">##   $`boap_3`</span>
<span class="co">##   $`boap_4`</span>
<span class="co">##   $`boap_5`</span>
<span class="co">##   $`boap_6`</span>
<span class="co">##   $`boap_7`</span>
<span class="co">##   $`boap_8`</span>
<span class="co">##   $`boap_9`</span>
<span class="co">##   $`boap_10`</span>
<span class="co">##   $`boap_11`</span>
<span class="co">##   $`boap_12`</span>
<span class="co">##   $`boap_13`</span>
<span class="co">##   $`boap_14`</span></code></pre>
<p>We can add that information with <code>dichotomize</code>. Taking our categorical array “boap,” let’s make it into a multiple response, but this time, let’s only include the “Strongly approve” category:</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">ds</span><span class="op">$</span><span class="va">boap</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dichotomize.html">dichotomize</a></span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">boap</span>, <span class="st">"Strongly approve"</span><span class="op">)</span>
<span class="va">ds</span><span class="op">$</span><span class="va">boap</span></code></pre></div>
<pre><code><span class="co">## Approval of Obama on issues (multiple_response)</span>
<span class="co">## Subvariables:</span>
<span class="co">##   $`boap_2`</span>
<span class="co">##   $`boap_3`</span>
<span class="co">##   $`boap_4`</span>
<span class="co">##   $`boap_5`</span>
<span class="co">##   $`boap_6`</span>
<span class="co">##   $`boap_7`</span>
<span class="co">##   $`boap_8`</span>
<span class="co">##   $`boap_9`</span>
<span class="co">##   $`boap_10`</span>
<span class="co">##   $`boap_11`</span>
<span class="co">##   $`boap_12`</span>
<span class="co">##   $`boap_13`</span>
<span class="co">##   $`boap_14`</span></code></pre>
</div>
<div class="section level2">
<h2 id="splitting-arrays-back-into-categoricals">Splitting arrays back into categoricals<a class="anchor" aria-label="anchor" href="#splitting-arrays-back-into-categoricals"></a>
</h2>
<p>As noted above, when we make an array, its subvariables no longer appear in the dataset outside of the array.</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"boap"</span>, <span class="fu"><a href="../reference/describe-catalog.html">names</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span>, value<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">## [1] "boap"</span></code></pre>
<p>We can access the subvariables and do things with them directly via the <code>subvariables</code> method, but the case may arise in which we want to undo our binding of these subvariables into the array. The function <code>unbind</code> deletes the array variable and restores the subvariables as top-level variables.</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/unbind.html">unbind</a></span><span class="op">(</span><span class="va">ds</span><span class="op">$</span><span class="va">boap</span><span class="op">)</span>
<span class="va">ds</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/refresh.html">refresh</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span></code></pre></div>
<p>Note the use of <code>refresh</code>. Most functions that modify objects on the server refresh their local copies in our R session automatically; however, because <code>unbind</code> doesn’t assign back into <code>ds</code>, the local dataset object doesn’t get updated with the change, so we need to refresh it manually.</p>
<p>Now, if we check the names of <code>ds</code>, we see our full set of <code>boap_*</code> former subvariables:</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grep</a></span><span class="op">(</span><span class="st">"boap"</span>, <span class="fu"><a href="../reference/describe-catalog.html">names</a></span><span class="op">(</span><span class="va">ds</span><span class="op">)</span>, value<span class="op">=</span><span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<pre><code><span class="co">##  [1] "boap_2"  "boap_3"  "boap_4"  "boap_5"  "boap_6"  "boap_7"  "boap_8" </span>
<span class="co">##  [8] "boap_9"  "boap_10" "boap_11" "boap_12" "boap_13" "boap_14"</span></code></pre>
<p><a href="variable-order.html">Next: variable organization</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Greg Freedman Ellis, Jonathan Keane, Mike Malecki, Neal Richardson, Gordon Shotwell.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '9fbcb3ae4d05600402e31f66b9b9501e',
    indexName: 'crunch',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
