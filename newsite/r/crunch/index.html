<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Crunch.io Data Tools • Crunch</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><!-- docsearch --><script src="docsearch.js"></script><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous">
<link href="docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script><link href="extra.css" rel="stylesheet">
<meta property="og:title" content="Crunch.io Data Tools">
<meta property="og:description" content="The Crunch.io service &lt;https://crunch.io/&gt; provides a cloud-based
    data store and analytic engine, as well as an intuitive web interface.
    Using this package, analysts can interact with and manipulate Crunch
    datasets from within R. Importantly, this allows technical researchers to
    collaborate naturally with team members, managers, and clients who prefer a
    point-and-click interface.">
<meta property="og:image" content="http://crunch.io/r/crunch/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=UA-50332119-2"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-50332119-2');
</script>
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">Crunch</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.29.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="articles/crunch.html">Get started</a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="divider">
    </li>
<li class="dropdown-header">Getting started</li>
    <li>
      <a href="articles/variables.html">Crunch Variables</a>
    </li>
    <li>
      <a href="articles/array-variables.html">Array Variables</a>
    </li>
    <li>
      <a href="articles/variable-order.html">Variable Folders and Organization</a>
    </li>
    <li>
      <a href="articles/projects.html">Organizing Datasets in Projects</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Exploring and analyzing</li>
    <li>
      <a href="articles/derive.html">Adding Variables</a>
    </li>
    <li>
      <a href="articles/analyze.html">Analyzing Crunch Data</a>
    </li>
    <li>
      <a href="articles/filters.html">Filtering Data</a>
    </li>
    <li>
      <a href="articles/subtotals.html">Subtotals and Headings</a>
    </li>
    <li>
      <a href="articles/export.html">Exporting Data</a>
    </li>
    <li>
      <a href="articles/fork-and-merge.html">Fork and Merge a Dataset</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Going deeper</li>
    <li>
      <a href="articles/crunch-internals.html">Crunch Internals</a>
    </li>
    <li>
      <a href="articles/abstract-categories.html">Abstract Categories</a>
    </li>
    <li class="divider">
    </li>
<li class="dropdown-header">Cookbooks</li>
    <li>
      <a href="articles/deck-cookbook.html">Crunch Deck Cookbook</a>
    </li>
  </ul>
</li>
<li>
  <a href="news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/Crunch-io/rcrunch/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
<form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
</div>
      </form>
      
    </div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="crunch">crunch<a class="anchor" aria-label="anchor" href="#crunch"></a>
</h1></div>
<!-- badges: start -->

<p><a href="http://crunch-io.github.io/rcrunch/" class="external-link">Cloud Collaboration with Crunch</a></p>
<p><a href="https://crunch.io/" class="external-link">Crunch.io</a> provides a cloud-based data store and analytic engine. It has a <a href="https://app.crunch.io/" class="external-link">web client</a> for interactive data exploration and visualization. The <strong>crunch</strong> package for R allows analysts to interact with and manipulate Crunch datasets from within R. Importantly, this allows technical researchers to collaborate naturally with team members, managers, and clients who prefer a point-and-click interface: because all connect to the same dataset in the cloud, there is no need to email files back and forth continually to share results.</p>
<p><a href="mailto:rcrunch+subscribe@crunch.io">Subscribe to the mailing list</a> to receive notification of releases and to ask general support questions.</p>
<div class="section level2">
<h2 id="installing">Installing<a class="anchor" aria-label="anchor" href="#installing"></a>
</h2>
<p><code>crunch</code> can be installed from CRAN with</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="kw">install.packages</span>(<span class="st">"crunch"</span>)</span></code></pre></div>
<p>The pre-release version of the package can be pulled from GitHub using the <a href="https://github.com/r-lib/remotes" class="external-link"><code>remotes</code></a> package (part of <code>devtools</code>):</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co"># install.packages("remotes")</span>
<span class="fu">remotes</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"Crunch-io/rcrunch"</span><span class="op">)</span></code></pre></div>
</div>
<div class="section level2">
<h2 id="getting-started">Getting started<a class="anchor" aria-label="anchor" href="#getting-started"></a>
</h2>
<p>The crunch R package needs to know what URL to use for the API and what your token is for authentication. For more details on how to get an API token, see the <a href="https://help.crunch.io/hc/en-us/articles/4415963337869-API-Keys" class="external-link">help center article</a>.</p>
<p>The <code>usethis</code> package can help you set environment environment variables, the following code will open a text editor:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="op">$</span><span class="st"> </span>R</span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="op">&gt;</span><span class="st"> </span><span class="cf">if</span> (<span class="op">!</span><span class="kw">require</span>(<span class="st">"usethis"</span>)) <span class="kw">install.packages</span>(<span class="st">"usethis"</span>)</span>
<span id="cb3-3"><a href="#cb3-3"></a><span class="op">&gt;</span><span class="st"> </span>usethis<span class="op">::</span><span class="kw">edit_r_environ</span>()</span></code></pre></div>
<p>And then you can add environment variables by adding the following (filling in the correct values for for <code>https://my-awesome-brand.crunch.io/api/</code> and <code>secret-key-goes-here</code>, with one set of quotation marks around the url and key).</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>R_CRUNCH_API=<span class="st">"https://my-awesome-brand.crunch.io/api/"</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>R_CRUNCH_API_KEY=<span class="st">"secret-key-goes-here"</span></span></code></pre></div>
<p>Restart your R session, or run command <code>readRenviron("~/.Renviron")</code>, and then you will be authenticated automatically.</p>
<p>Check out <code><a href="reference/listDatasets.html">listDatasets()</a></code> to see the names of your existing datasets, which you can load like <code>ds &lt;- loadDataset("The name of my dataset")</code>. New Crunch datasets can be made from a <code>data.frame</code>, a .csv or .sav file, or a URL to a file with <code><a href="reference/newDataset.html">newDataset()</a></code>. See the help for these functions or <a href="https://crunch.io/r/crunch/articles/crunch.html" class="external-link"><code>vignette("crunch")</code></a> for more information.</p>
</div>
<div class="section level2">
<h2 id="for-developers">For developers<a class="anchor" aria-label="anchor" href="#for-developers"></a>
</h2>
<p><code>crunch</code> requires R version 3.0 or greater. Rstudio has instructions for a variety of platforms both <a href="https://docs.rstudio.com/resources/install-r" class="external-link">installing from binaries (recommended)</a> or <a href="https://docs.rstudio.com/resources/install-r-source/" class="external-link">from source</a> if necessary.</p>
<div class="section level3">
<h3 id="mocks">Mocks<a class="anchor" aria-label="anchor" href="#mocks"></a>
</h3>
<p>The tests for the rcrunch package relies on mocks that are compressed into a tarball so that the package stays within the CRAN 5MB size limit. To avoid git merge conflicts this file is not checked in so it must be created before you can run tests. It is created for you if you run <code>make test</code>, or you can create it explicitly by running <code>make compress-fixtures</code> or <code>Rscript dev-misc/compress-fixtures.R</code>.</p>
</div>
<div class="section level3">
<h3 id="contributing">Contributing<a class="anchor" aria-label="anchor" href="#contributing"></a>
</h3>
<p>See the <a href="CONTRIBUTING.html">contribution guidelines</a>.</p>
</div>
<div class="section level3">
<h3 id="installing-from-a-local-checkout">Installing from a local checkout<a class="anchor" aria-label="anchor" href="#installing-from-a-local-checkout"></a>
</h3>
<div class="sourceCode" id="cb5"><pre class="sourceCode R"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="co"># make deps</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="co"># make test</span></span></code></pre></div>
<p>This installs dependencies and then runs the tests, which installs <code>crunch</code> from your local checkout in the process. If the dependencies fail to install, check the error message. You may need to install <code>libcurl</code> on your system before installing the R packages.</p>
</div>
<div class="section level3">
<h3 id="running-tests">Running tests<a class="anchor" aria-label="anchor" href="#running-tests"></a>
</h3>
<p>You can run tests in an interactive session, or from the command line, <code>$ make test</code> is all you need. Requires the <a href="https://github.com/nealrichardson/httptest" class="external-link"><code>httptest</code></a> package for R. You can also specify a specific test file or files to run by adding a “file=” argument, like <code>$ make test file=auth</code>. <code>test_package</code> will do a regular-expression pattern match within the file names. See its documentation in the <a href="https://testthat.r-lib.org/" class="external-link"><code>testthat</code></a> package.</p>
<p>Testing has two options: unit tests only, and tests that communicate with an API server. This is governed by an environment variable, <code>INTEGRATION</code>, which is false by default, meaning that API integration tests are not run. To modify this and test against the Crunch API, you can run <code>$ make test INTEGRATION=TRUE</code>.</p>
<p>To run integration tests, you will need to specify an API key and API server to communicate with. You can do this by setting the environment variables <code>R_TEST_API</code> and <code>CRUNCH_TEST_API_KEY</code>.</p>
<p>If you are a Crunch developer serving a version of the API/backend with Vagrant or Docker, you will have best results if your R_TEST_API/CRUNCH_TEST_API_KEY (1) is <code>local.crunch.io</code>, thanks to a mapping of localhost to that in your hosts file. In order to avoid self-signed certificate errors use the environment variable <code>R_TEST_VERIFY_SSL=FALSE</code>. You might point at “<a href="https://local.crunch.io:28443/api/" class="external-link uri">https://local.crunch.io:28443/api/</a>”, for example. Some tests that cannot run successfully in the local environment will be skipped when run against a local.crunch.io URL.</p>
<p>Example of local usage:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1"></a>$ <span class="va">R_TEST_VERIFY_SSL=</span>TRUE <span class="va">CRUNCH_TEST_API_KEY=</span>t0pSecretK3y! <span class="va">R_TEST_API=</span>https://local.crunch.io:28443/api/ <span class="fu">make</span> test INTEGRATION=TRUE file=variable-summary</span></code></pre></div>
</div>
<div class="section level3">
<h3 id="updating-documentation">Updating documentation<a class="anchor" aria-label="anchor" href="#updating-documentation"></a>
</h3>
<p>Run <code>$ make doc</code>. Requires the <code>roxygen2</code> package.</p>
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2 data-toc-skip>Links</h2>
<ul class="list-unstyled">
<li><a href="https://cloud.r-project.org/package=crunch" class="external-link">View on CRAN</a></li>
<li><a href="https://github.com/Crunch-io/rcrunch/" class="external-link">Browse source code</a></li>
<li><a href="https://github.com/Crunch-io/rcrunch/issues" class="external-link">Report a bug</a></li>
</ul>
</div>

<div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>LGPL (&gt;= 3)</small></li>
</ul>
</div>

<div class="community">
<h2 data-toc-skip>Community</h2>
<ul class="list-unstyled">
<li><a href="CONTRIBUTING.html">Contributing guide</a></li>
</ul>
</div>

<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing crunch</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Greg Freedman Ellis <br><small class="roles"> Author, maintainer </small>  </li>
<li>Jonathan Keane <br><small class="roles"> Author </small>  </li>
<li>Mike Malecki <br><small class="roles"> Author </small>  </li>
<li>Neal Richardson <br><small class="roles"> Author </small>  </li>
<li>Gordon Shotwell <br><small class="roles"> Author </small>  </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://github.com/Crunch-io/rcrunch/actions" class="external-link"><img src="https://github.com/Crunch-io/rcrunch/workflows/R-CMD-check/badge.svg" alt="R build status"></a></li>
<li><a href="https://cran.r-project.org/package=crunch" class="external-link"><img src="https://www.r-pkg.org/badges/version-last-release/crunch" alt="cran"></a></li>
<li><a href="https://codecov.io/gh/Crunch-io/rcrunch" class="external-link"><img src="https://codecov.io/gh/Crunch-io/rcrunch/branch/master/graph/badge.svg" alt="codecov"></a></li>
</ul>
</div>

  </div>
</div>


      <footer><div class="copyright">
  <p></p>
<p>Developed by Greg Freedman Ellis, Jonathan Keane, Mike Malecki, Neal Richardson, Gordon Shotwell.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer>
</div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script><script>
  docsearch({
    
    
    apiKey: '9fbcb3ae4d05600402e31f66b9b9501e',
    indexName: 'crunch',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>
</body>
</html>
