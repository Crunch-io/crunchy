<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Generate a weight variable — makeWeight • Crunch</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../jquery.sticky-kit.min.js"></script>
<script src="../pkgdown.js"></script>
  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="Generate a weight variable — makeWeight" />

<meta property="og:description" content="This function allows you to generate a weight variable by supplying a set of
categorical variables and the target distribution for each of the variables'
categories. Weights are computed by iteratively 'raking' conditional 'cells'
to the provided marginal targets." />

<meta property="og:image" content="http://crunch.io/r/crunch/logo.png" />
<meta name="twitter:card" content="summary" />


<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Google analytics -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-50332119-2', 'auto');
  ga('send', 'pageview');

</script>



<!-- docsearch -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css" />

  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">crunch</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.21.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/getting-started.html">Intro</a>
</li>
<li>
  <a href="../reference/">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/getting-started.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/datasets.html">Datasets</a>
    </li>
    <li>
      <a href="../articles/variables.html">Variables</a>
    </li>
    <li>
      <a href="../articles/array-variables.html">Array Variables</a>
    </li>
    <li>
      <a href="../articles/variable-order.html">Organize Variables</a>
    </li>
    <li>
      <a href="../articles/derive.html">Derive Variables</a>
    </li>
    <li>
      <a href="../articles/filters.html">Filter Data</a>
    </li>
    <li>
      <a href="../articles/export.html">Export Data</a>
    </li>
    <li>
      <a href="../articles/subtotals.html">Subtotals and Headings</a>
    </li>
    <li>
      <a href="../articles/crunch-internals.html">Crunch Internals</a>
    </li>
    <li>
      <a href="../articles/abstract-categories.html">Abstract Categories</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/">News</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Crunch-io/rcrunch">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right" role="search">
        <div class="form-group">
          <input type="search" class="form-control" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate a weight variable</h1>
    <small>Source: <a href='https://github.com/Crunch-io/rcrunch/blob/master/R/weight.R'><code>R/weight.R</code></a></small>
    <div class="hidden name"><code>makeWeight.Rd</code></div>
    </div>

    
    <p>This function allows you to generate a weight variable by supplying a set of
categorical variables and the target distribution for each of the variables'
categories. Weights are computed by iteratively 'raking' conditional 'cells'
to the provided marginal targets.</p>
    

    <pre class="usage"><span class='fu'>makeWeight</span>(<span class='no'>...</span>, <span class='no'>name</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>A series of expressions of the form <code>variable ~ target_weights</code>.
The variable must be a categorical Crunch variable, and the target weights
must be a numeric vector whose length should be equal to the number of
categories contained in the variable, and whose sum is equal to 100 or 1. If
you supply fewer target weights than there are categories <code>makeWeight</code> will
pad the target weight vector with 0s.</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>The name of the resulting variable</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A crunch <code><a href='VariableDefinition.html'>VariableDefinition()</a></code> of the weight variable</p>
    
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For instance, if you wanted to create a
weight variable which equally weighted four categories stored in <code>ds$var</code>
you would call <code>ds$weight1 &lt;- makeWeight(ds$var ~ c(25, 25, 25, 25), name = "weight1")</code>.
Note that <code>makeWeight</code> returns a <code>VariableDefinition</code>, an expression that
when assigned into your Dataset becomes a derived variable. This does not on
its own set the new variable as "the weight" for your dataset. To set that
attribute, use <code><a href='weight.html'>weight()</a></code>. Alternatively, you can also create the variable
and set the weight attribute in one step with
<code>weight(ds) &lt;- makeWeight(ds$var ~ c(25, 25, 25, 25), name = "weight1")</code>.</p>
    
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='weight.html'>weight&lt;-()</a></code>; <code><a href='settings.html'>settings()</a></code> for the "default weight" for other
dataset viewers.</p></div>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='co'># NOT RUN {</span>
<span class='no'>mtcars</span>$<span class='no'>cyl</span> <span class='kw'>&lt;-</span> <span class='fu'>as.factor</span>(<span class='no'>mtcars</span>$<span class='no'>cyl</span>)
<span class='no'>mtcars</span>$<span class='no'>gear</span> <span class='kw'>&lt;-</span> <span class='fu'>as.factor</span>(<span class='no'>mtcars</span>$<span class='no'>gear</span>)
<span class='no'>ds</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='newDataset.html'>newDataset</a></span>(<span class='no'>mtcars</span>)
<span class='co'># Create a new "raked" variable</span>
<span class='no'>ds</span>$<span class='no'>weight</span> <span class='kw'>&lt;-</span> <span class='fu'>makeWeight</span>(<span class='no'>ds</span>$<span class='no'>cyl</span> ~ <span class='fu'>c</span>(<span class='fl'>30</span>, <span class='fl'>30</span>, <span class='fl'>40</span>, <span class='fl'>0</span>),
    <span class='no'>ds</span>$<span class='no'>gear</span> ~ <span class='fu'>c</span>(<span class='fl'>20</span>, <span class='fl'>20</span>, <span class='fl'>60</span>, <span class='fl'>0</span>), <span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"weight"</span>)
<span class='fu'>summary</span>(<span class='no'>ds</span>$<span class='no'>weight</span>)
<span class='co'># ds$weight is not "the weight" for the dataset unless you set it:</span>
<span class='fu'><a href='weight.html'>weight</a></span>(<span class='no'>ds</span>) <span class='kw'>&lt;-</span> <span class='no'>ds</span>$<span class='no'>weight</span>
<span class='co'># Or, you can create the variable and set as weight in one step:</span>
<span class='fu'><a href='weight.html'>weight</a></span>(<span class='no'>ds</span>) <span class='kw'>&lt;-</span>  <span class='fu'>makeWeight</span>(<span class='no'>ds</span>$<span class='no'>var</span> ~ <span class='fu'>c</span>(<span class='fl'>25</span>, <span class='fl'>25</span>, <span class='fl'>25</span>, <span class='fl'>25</span>), <span class='kw'>name</span> <span class='kw'>=</span> <span class='st'>"weight2"</span>)
<span class='co'># }</span></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>

      <li><a href="#details">Details</a></li>

      <li><a href="#see-also">See also</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Neal Richardson.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  
<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<script>
  docsearch({
    
    apiKey: '9fbcb3ae4d05600402e31f66b9b9501e',
    indexName: 'crunch',
    inputSelector: 'input#search-input.form-control',
    debug: false // Set debug to true if you want to inspect the dropdown
  });
</script>


  </body>
</html>

