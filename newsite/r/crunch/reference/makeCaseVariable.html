<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Make a case variable — makeCaseVariable • Crunch</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/simplex/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>


<!-- docsearch -->
<script src="../docsearch.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.3/docsearch.min.css" integrity="sha256-QOSRU/ra9ActyXkIBbiIB144aDBdtvXBcNc3OTNuX/Q=" crossorigin="anonymous" />
<link href="../docsearch.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>


  <link href="../extra.css" rel="stylesheet">
  

<meta property="og:title" content="Make a case variable — makeCaseVariable" />
<meta property="og:description" content="The makeCaseVariable function derives a variable using values from other
variables. These are evaluated in the order they are supplied in the list
as the cases argument (they proceed in an IF, ELSE IF, ELSE IF, ..., ELSE
fashion); the first one that matches selects the corresponding value from
the case list." />
<meta property="og:image" content="http://crunch.io/r/crunch/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-50332119-2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-50332119-2');
</script>


  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">Crunch</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.27.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/crunch.html">Intro</a>
</li>
<li>
  <a href="../reference/">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/crunch.html">Getting Started</a>
    </li>
    <li>
      <a href="../articles/variables.html">Variables</a>
    </li>
    <li>
      <a href="../articles/array-variables.html">Array Variables</a>
    </li>
    <li>
      <a href="../articles/variable-order.html">Organize Variables</a>
    </li>
    <li>
      <a href="../articles/derive.html">Derive Variables</a>
    </li>
    <li>
      <a href="../articles/analyze.html">Analyze Data</a>
    </li>
    <li>
      <a href="../articles/filters.html">Filter Data</a>
    </li>
    <li>
      <a href="../articles/export.html">Export Data</a>
    </li>
    <li>
      <a href="../articles/projects.html">Projects</a>
    </li>
    <li>
      <a href="../articles/fork-and-merge.html">Fork and Merge</a>
    </li>
    <li>
      <a href="../articles/subtotals.html">Subtotals and Headings</a>
    </li>
    <li>
      <a href="../articles/crunch-internals.html">Crunch Internals</a>
    </li>
    <li>
      <a href="../articles/abstract-categories.html">Abstract Categories</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/">News</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Crunch-io/rcrunch/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
      <form class="navbar-form navbar-right hidden-xs hidden-sm" role="search">
        <div class="form-group">
          <input type="search" class="form-control" name="search-input" id="search-input" placeholder="Search..." aria-label="Search for..." autocomplete="off">
        </div>
      </form>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Make a case variable</h1>
    <small class="dont-index">Source: <a href='https://github.com/Crunch-io/rcrunch/blob/master/R/case-variables.R'><code>R/case-variables.R</code></a></small>
    <div class="hidden name"><code>makeCaseVariable.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>The <code>makeCaseVariable</code> function derives a variable using values from other
variables. These are evaluated in the order they are supplied in the list
as the <code>cases</code> argument (they proceed in an IF, ELSE IF, ELSE IF, ..., ELSE
fashion); the first one that matches selects the corresponding value from
the case list.</p>
    </div>

    <pre class="usage"><span class='fu'>makeCaseVariable</span>(<span class='kw'>...</span>, <span class='kw'>cases</span>, data = <span class='kw'>NULL</span>, <span class='kw'>name</span>)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>...</th>
      <td><p>a sequence of named expressions to use as cases as well as other
properties to pass about the case variable (i.e. alias, description)</p></td>
    </tr>
    <tr>
      <th>cases</th>
      <td><p>a list of lists with each case condition to use each must
include at least a <code>name</code> and an <code>expression</code> element. Cases may also include
<code>missing</code> (logical) and <code>numeric_value</code> (numeric).</p></td>
    </tr>
    <tr>
      <th>data</th>
      <td><p>(optional) a crunch dataset to use. Specifying this means you
don't have to put <code>dataset$</code> in front of each variable name.</p></td>
    </tr>
    <tr>
      <th>name</th>
      <td><p>a character to use as the name of the case variable to create</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A <code><a href='VariableDefinition.html'>VariableDefinition</a></code> that will create the new
case variable when assigned into the Dataset.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>There are two ways to specify cases, but you must pick only one (note these
two will produce the same case variable):</p><ol>
<li><p>When you just want to specify conditions, you can use named conditions:
<code>makeCaseVariable(case1=ds$v1 == 1, case2=ds$v2 == 2, name="new case")</code></p></li>
<li><p>You can also use the <code>cases</code> argument, which is useful when you want to
provide category ids, numeric values, or missingness:
<code>makeCaseVariable(   cases=list( list(expression=ds$v1 == 1, name="case1"), list(expression=ds$v2 == 2, name="case2")   ),   name="new case" )</code></p></li>
</ol>

<p>Rows in the dataset that do not match any of the provided "cases" will
be assigned to an "else" category. By default, Crunch will use the system
missing "No Data" category. Alternatively, you can provide an else
case definition for these rows by including as the last "case" you provide
one with its <code>expression</code> set to the string "else". See the examples for
details.</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>if</span> (<span class='fl'>FALSE</span>) {
<span class='fu'>makeCaseVariable</span>(case1 = <span class='kw'>ds</span><span class='op'>$</span><span class='kw'>v1</span> <span class='op'>==</span> <span class='fl'>1</span>, case2 = <span class='kw'>ds</span><span class='op'>$</span><span class='kw'>v2</span> <span class='op'>==</span> <span class='fl'>2</span>, name = <span class='st'>"new case"</span>)
<span class='fu'>makeCaseVariable</span>(
    cases = <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
        <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(expression = <span class='kw'>ds</span><span class='op'>$</span><span class='kw'>v1</span> <span class='op'>==</span> <span class='fl'>1</span>, name = <span class='st'>"case1"</span>),
        <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(expression = <span class='kw'>ds</span><span class='op'>$</span><span class='kw'>v2</span> <span class='op'>==</span> <span class='fl'>2</span>, name = <span class='st'>"case2"</span>)
    ),
    name = <span class='st'>"new case"</span>
)

<span class='co'># different ways to specify else cases</span>
<span class='fu'>makeCaseVariable</span>(
    cases = <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(
        <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(expression = <span class='kw'>ds</span><span class='op'>$</span><span class='kw'>v1</span> <span class='op'>==</span> <span class='fl'>1</span>, name = <span class='st'>"case1"</span>),
        <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(expression = <span class='kw'>ds</span><span class='op'>$</span><span class='kw'>v2</span> <span class='op'>==</span> <span class='fl'>2</span>, name = <span class='st'>"case2"</span>),
        <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span>(expression = <span class='st'>"else"</span>, name = <span class='st'>"other"</span>)
    ),
    name = <span class='st'>"new case"</span>
)
<span class='fu'>makeCaseVariable</span>(case1 = <span class='kw'>ds</span><span class='op'>$</span><span class='kw'>v1</span> <span class='op'>==</span> <span class='fl'>1</span>, case2 = <span class='kw'>ds</span><span class='op'>$</span><span class='kw'>v2</span> <span class='op'>==</span> <span class='fl'>2</span>, other = <span class='st'>"else"</span>, name = <span class='st'>"new case"</span>)

<span class='co'># the dataset can be specified with data=</span>
<span class='fu'>makeCaseVariable</span>(case1 = <span class='kw'>v1</span> <span class='op'>==</span> <span class='fl'>1</span>, case2 = <span class='kw'>v2</span> <span class='op'>==</span> <span class='fl'>2</span>, data = <span class='kw'>ds</span>, name = <span class='st'>"new case"</span>)
}</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Greg Freedman Ellis, Jonathan Keane, Mike Malecki, Neal Richardson, Gordon Shotwell.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  
<script src="https://cdnjs.cloudflare.com/ajax/libs/docsearch.js/2.6.1/docsearch.min.js" integrity="sha256-GKvGqXDznoRYHCwKXGnuchvKSwmx9SRMrZOTh2g4Sb0=" crossorigin="anonymous"></script>
<script>
  docsearch({
    
    
    apiKey: '9fbcb3ae4d05600402e31f66b9b9501e',
    indexName: 'crunch',
    inputSelector: 'input#search-input.form-control',
    transformData: function(hits) {
      return hits.map(function (hit) {
        hit.url = updateHitURL(hit);
        return hit;
      });
    }
  });
</script>



  </body>
</html>


